angular.module("russ",["ngAnimate","ngAria","ngMaterial","ngFileUpload","angular-jwt","angularMoment","feed"]),angular.module("russ").config(["$animateProvider","$httpProvider","$sceDelegateProvider","jwtInterceptorProvider",function($animateProvider,$httpProvider,$sceDelegateProvider,jwtInterceptorProvider){$animateProvider.classNameFilter(/\bruss-animated\b/),$sceDelegateProvider.resourceUrlWhitelist(["self","http://russ.rrdev.co/**","http://www.youtube.com/embed/**","https://www.youtube.com/embed/**","https://player.vimeo.com/video/**"]),jwtInterceptorProvider.tokenGetter=["JWT_TOKEN",function(JWT_TOKEN){return JWT_TOKEN}],$httpProvider.interceptors.push("jwtInterceptor")}]),angular.module("russ").run(["$rootScope","$compile","ENDPOINT","auth","russUrl",function($rootScope,$compile,ENDPOINT,auth,russUrl){$rootScope.ENDPOINT=ENDPOINT,$rootScope.auth=auth,$rootScope.russUrl=russUrl,$rootScope.currentMinYear=2016;var flashNotificationElem=angular.element("<flash-notification>");flashNotificationElem.attr("ng-show","showFlashNotification"),$compile(flashNotificationElem)($rootScope);var body=angular.element(document.body);body.append(flashNotificationElem),setTimeout(function(){var fixedFooter=angular.element(document.querySelector("div.community-footer.navbar-fixed-bottom"));fixedFooter&&fixedFooter.removeClass("navbar-fixed-bottom"),body.removeClass("smart-footer-active")},500)}]),function(){var throttle=function(type,name,obj){obj=obj||window;var running=!1,func=function(){running||(running=!0,requestAnimationFrame(function(){obj.dispatchEvent(new CustomEvent(name)),running=!1}))};obj.addEventListener(type,func)};throttle("resize","optimizedResize"),throttle("scroll","optimizedScroll")}();var isElementInViewport=function(element,offsetTop){angular.isUndefined(offsetTop)&&(offsetTop=0);var rect=element.getBoundingClientRect();return rect.height&&rect.width&&(rect.top-((window.innerHeight||document.documentElement.clientHeight)+offsetTop)<=0||rect.bottom-(window.innerHeight||document.documentElement.clientHeight)<=0)&&(rect.top-offsetTop>=0||rect.bottom>=0)&&rect.left>=0};
"use strict";angular.module("feed",["ngResource","infinite-scroll"]),angular.module("infinite-scroll").value("THROTTLE_MILLISECONDS",500);
angular.module("russ").run(["$templateCache",function($templateCache){$templateCache.put("js/angular-app/flash-notification.directive.html",'<div class="russ-flash__message">\r\n    <p>{{flashService.message}}</p>\r\n    <p ng-hide="$root.hideFlashNotificationLogin">\r\n        <a class="russ-btn" ng-href="{{$root.russUrl.login()}}" ng-hide="$root.auth.incomplete">Logg inn</a>\r\n        <a class="russ-btn" ng-href="{{$root.russUrl.finishProfile()}}" ng-show="$root.auth.incomplete">Fullfør profil</a>\r\n    </p>\r\n</div>\r\n'),$templateCache.put("js/angular-app/classified/classified-page.directive.html",'<!--\r\n<section class="russ-wrapper--wide">\r\n\t<a ng-href="{{$root.russUrl.classifieds()}}" class="russ-btn russ-btn--back russ-btn--blue">Tilbake til kjøp/salg oversikt</a>\r\n\t<a ng-href="{{$root.russUrl.vehicle(vehicle.id)}}" class="russ-btn russ-btn--vehicle russ-btn--blue">\r\n\t\t<span>\r\n\t\t\t<span ng-if="vehicle.type === \'buss\'">Buss</span>\r\n\t\t\t<span ng-if="vehicle.type === \'van\'">Van</span>\r\n\t\t\t<span ng-if="vehicle.type === \'gruppe\'">Gruppe</span>\r\n\t\t</span>\r\n\t\t profil\r\n\t</a>\r\n\t<a ng-href="{{$root.russUrl.vehicleEdit(vehicle.id)}}" class="russ-btn russ-btn--back russ-btn--edit russ-btn--blue" ng-show="$root.auth.user && ($root.auth.user.isAdmin || ($root.auth.user.vehicle === vehicle.id))">\r\n\t\tRediger \r\n\t\t<span>\r\n\t\t\t<span ng-if="vehicle.type === \'buss\'">buss</span>\r\n\t\t\t<span ng-if="vehicle.type === \'van\'">van</span>\r\n\t\t\t<span ng-if="vehicle.type === \'gruppe\'">gruppe</span>\r\n\t\t</span>\r\n\t</a>\r\n</section>\r\n<br>\r\n-->\r\n\r\n<div class="classified-banner">\r\n\tDENNE BUSSEN ER TIL SALGS!\r\n</div>\r\n\r\n<section class="russ-wrapper--wide">\r\n\r\n\t<div class="classified-details container">\r\n\r\n\t\t<!-- Seller: -->\r\n\t\t<div class="classified-seller russ-vehicle-members col-xs-12 col-md-5">\r\n\t\t\t<div class="russ-vehicle-member">\r\n\t\t\t\t<div class="russ-section__header classified">\r\n\t\t\t\t\t<h2 class="russ-h2 russ-vehicle-section__heading">Selger</h2>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<a ng-href="/profile/view/{{vehicle.classified.seller[0].id}}" class="russ-vehicle-member__link">\r\n\t\t\t\t\t<div class="russ-vehicle-member__image" ng-style="{backgroundImage: \'url(\' + vehicle.classified.seller[0].picture + \')\'}"></div>\r\n\t\t\t\t\t<h2 class="russ-h2 russ-vehicle-member__name">{{vehicle.classified.seller[0].name}}</h2>\r\n\t\t\t\t</a>\r\n\r\n\t\t\t\t<p class="russ-vehicle-member__school">\r\n\t\t\t\t\t{{vehicle.classified.seller[0].school.name}}\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<a href="/message/send/{{vehicle.classified.seller[0].id}}" class="btn btn-block btn-primary btn-message">\r\n\t\t\t\t\t<i class="fa fa-envelope"></i> Send melding\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- Facts: -->\r\n\t\t<div class="classified-facts col-xs-12 col-md-4">\r\n\t\t\t<div class="russ-section__header classified">\r\n\t\t\t\t<h2 class="russ-h2 russ-vehicle-section__heading">Pris: {{vehicle.classified.price}} kr</h2>\r\n\t\t\t\t<h4 ng-if="vehicle.classified.transfer_fee_exempt"   class="classified">Fritatt for omregistrering</h4>\r\n\t\t\t\t<h4 ng-if="vehicle.classified.transfer_fee_included" class="classified">Inkludert omreg.</h4>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="name">Registreringsnummer:</div><div class="value">{{vehicle.classified.plate_number | uppercase}}</div>\r\n\t\t\t<div class="name">Merke:</div>\t\t\t\t<div class="value">{{vehicle.classified.brand}}</div>\r\n\t\t\t\r\n\t\t\t<div class="name">Type kjøretøy:</div>\t\t<div class="value" ng-if="vehicle.type === \'buss\'">Buss</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="value" ng-if="vehicle.type === \'van\'">Van</div>\r\n\r\n\t\t\t<div class="name">Område:</div>\t\t\t\t<div class="value">{{vehicle.classified.county.county}}</div>\r\n\t\t\t<div class="name">Pris:</div>\t\t\t\t<div class="value">{{vehicle.classified.price}} kr</div>\r\n\t\t\t<div class="name">Omregistrering:</div>\t\t<div class="value">{{vehicle.classified.transfer_fee}}</div>\r\n\t\t\t<div class="name">Årsmodell:</div>\t\t\t<div class="value">{{vehicle.classified.model_year}}</div>\r\n\t\t\t<div class="name">Kilometerstand:</div>\t\t<div class="value">{{vehicle.classified.mileage}}</div>\r\n\r\n\t\t\t<div class="name">Antall seter:</div>\t\t<div class="value">{{vehicle.classified.seats_total}}</div>\r\n\t\t\t\r\n\t\t\t<div class="name">Girkasse:</div>\t\t\t<div class="value" ng-if="vehicle.classified.gearbox == \'0\'">Manuell</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="value" ng-if="vehicle.classified.gearbox == \'1\'">Automat</div>\r\n\r\n\t\t\t<div class="name">Takrigg:</div>\t\t\t<div class="value" ng-if="vehicle.classified.tacho == \'true\'">Ja</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="value" ng-if="vehicle.classified.tacho == \'false\'">Nei</div>\r\n\r\n\t\t\t<div class="name">Lengde i meter:</div>\t\t<div class="value">{{vehicle.classified.length}}</div>\r\n\t\t\t<div class="name">Forrige konseptnavn:</div><div class="value">{{vehicle.classified.old_concept_name}}</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- Description: -->\r\n\t\t<div class="classified-description col-xs-12 col-md-3">\r\n\t\t\t<div class="russ-section__header classified">\r\n\t\t\t\t<h2 class="russ-h2 russ-vehicle-section__heading">Seter: {{vehicle.classified.seats_total}}</h2>\r\n\t\t\t\t\t<h4 ng-if="vehicle.classified.seats_regular" class="classified">Vanlige seter: {{vehicle.classified.seats_regular}}</h4>\r\n\t\t\t\t\t<h4 ng-if="vehicle.classified.seats_groups"  class="classified">Sidestilte seter: {{vehicle.classified.seats_lateral}}</h4>\r\n\t\t\t\t\t<h4 ng-if="vehicle.classified.seats_groups"  class="classified">Sittegrupper: {{vehicle.classified.seats_groups}}</h4>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="description">\r\n\t\t\t<p>{{vehicle.classified.description}}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</section>\r\n\r\n<vehicle-gallery-section\r\n\tng-if="vehicle.classified.gallery && vehicle.classified.gallery.length"\r\n\timages="vehicle.classified.gallery">\r\n</vehicle-gallery-section>'),$templateCache.put("js/angular-app/feed/feed.template.html",'<div id="feed-wrapper" >\r\n\t\r\n\t<div id="feed-write" ng-if="$ctrl.show_form">\r\n\t\t<feed-form user-id="$ctrl.userId" user-name="$ctrl.userName"></feed-form>\r\n\t</div>\r\n\r\n\t<div \r\n\t\tid="feed-items" \r\n\t\tinfinite-scroll="$ctrl.loadMoreCards()"\r\n\t\tinfinite-scroll-disabled="$ctrl.FeedFactory.busy"\r\n\t\tinfinite-scroll-immediate-check="false"\r\n\t\tinfinite-scroll-use-document-bottom="true"\r\n\t>\r\n\t\t<feed-item ng-repeat="item in $ctrl.FeedFactory.items"></feed-item>\r\n\t\t\r\n\t\t<!-- To keep infinite scroll happy... -->\r\n\t\t<div style=\'clear: both;\'></div>\r\n\t</div>\r\n</div>'),$templateCache.put("js/angular-app/overview/classifieds-overview-content.directive.html",'\r\n<a ng-href="{{$root.auth.user && $root.auth.user.vehicle ? $root.russUrl.classifiedEdit($root.auth.user.vehicle) : $root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-mobile">\r\n\t<div class="russ-wrapper--thin">\r\n\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-globe"></use></svg>\r\n\t\t<div class="russ-banner__content" ng-hide="$root.auth.user && $root.auth.user.vehicle">\r\n\t\t\t<h1 class="russ-banner__heading">Legg inn din buss/van</h1>\r\n\t\t</div>\r\n\t\t<div class="russ-banner__content" ng-show="$root.auth.user && $root.auth.user.vehicle">\r\n\t\t\t<h1 class="russ-banner__heading">Endre din buss/van</h1>\r\n\t\t</div>\r\n\t</div>\r\n</a>\r\n\r\n<div>\r\n\t<section class="russ-card-section">\r\n\t\t<h2 class="russ-card-section__heading">Nyeste busser/vans til salgs</h2>\r\n\t\t<div class="russ-cards">\r\n\t\t\t<classified-card \r\n\t\t\t\tclass="russ-card russ-card--classified russ-animated" \r\n\t\t\t\tclassified="classified" \r\n\t\t\t\tng-repeat="classified in classifieds | limitTo:currentCardLimit">\r\n\t\t\t</classified-card>\r\n\t\t</div>\r\n\t\t<div classifieds\r\n\t\t\tng-show="classifieds.length && currentCardLimit < classifieds.length" \r\n\t\t\twhen-in-view="showMoreCards()">Laster flere annonser...\r\n\t\t</div>\r\n\t</section>\r\n</div>'),$templateCache.put("js/angular-app/overview/classifieds-overview.directive.html",'<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-desktop">\r\n\t<div class="russ-wrapper--thin">\r\n\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-globe"></use></svg>\r\n\t\t<div class="russ-banner__content">\r\n\t\t\t<h1 class="russ-banner__heading" ng-show="$root.auth.user && $root.auth.user.vehicle">Legg inn din buss/van for salg</h1>\r\n\t\t</div>\r\n\t</div>\r\n</a>\r\n\r\n<section class="russ-flex">\r\n\r\n\t<aside class="russ-sidebar">\r\n\t\t<overview-filter>\r\n\t\t\t\r\n\t\t\t<div ng-init="showFilters = false" class="russ-content russ-hide-desktop">\r\n\t\t\t\t<div class="russ-switch" ng-class="{\'russ-switch--activated\': showFilters}" ng-click="showFilters = !showFilters" ng-swipe-left="!showFilters && (showFilters = true)" ng-swipe-right="showFilters && (showFilters = false)"><div class="russ-switch__knob"></div></div> Vis flere filtre\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="russ-content russ-filters" ng-class="{\'russ-filters--show\': showFilters}">\r\n\t\t\t\t<p ng-hide="true"><button type="button" name="resetFilters" ng-click="resetFilters()">Reset filters</button></p>\r\n\r\n\t\t\t\t<overview-search ng-if="true" filters="overview.filters" overview-type="classified"></overview-search>\t\r\n\t\t\t\t<classifieds-type-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Type</classifieds-type-options>\r\n\t\t\t\t<classifieds-county-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Områder</classifieds-county-options>\t\t\r\n\t\t\t\t<classifieds-price-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Pris</classifieds-price-options>\r\n\t\t\t\t<classifieds-modelyear-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Årsmodell</classifieds-modelyear-options>\r\n\t\t\t\t<classifieds-mileage-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Kilometerstand</classifieds-mileage-options>\r\n\t\t\t\t<classifieds-seatsnumber-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Antall seter</classifieds-seatsnumber-options>\r\n\t\t\t\t<classifieds-gearbox-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Girkasse</classifieds-gearbox-options>\r\n\t\t\t\t<classifieds-tacho-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Takrigg</classifieds-tacho-options>\t\t\t\t\r\n\t\t\t\t<classifieds-seats-options ng-if="true" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Seter</classifieds-seats-options>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</overview-filter>\r\n\t</aside>\r\n\r\n\t<main class="russ-main">\r\n\r\n\t\t<!-- Newest ads h2 title -->\r\n\t\t\r\n\t\t<classifieds-overview-content \r\n\t\t\tng-if="overview.data && overview.data.length" \r\n\t\t\tmeta="overview.meta" \r\n\t\t\tfilter-count="overview.filterCount" \r\n\t\t\tfilters="overview.filters" \r\n\t\t\tclassifieds="overview.filteredData" \r\n\t\t>\r\n\t\t</classifieds-overview-content>\r\n\r\n\t\t<div ng-if="overview.data && !overview.data.length">\r\n\t\t\t<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-mobile">\r\n\t\t\t\t<div class="russ-wrapper--thin">\r\n\t\t\t\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-globe"></use></svg>\r\n\t\t\t\t\t<div class="russ-banner__content">\r\n\t\t\t\t\t\t<h1 class="russ-banner__heading">Legg inn din buss/van</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t\t<h1>Ingen lagt inn!</h1>\r\n\t\t</div>\r\n\r\n\t\t<div ng-if="overview.data && overview.data.length && overview.filteredData && !overview.filteredData.length">\r\n\t\t\t<h1>Ingen matcher disse filtrene!</h1>\r\n\t\t</div>\r\n\r\n\t</main>\r\n</section>'),$templateCache.put("js/angular-app/overview/song-overview-content.directive.html",'<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-mobile">\r\n    <div class="russ-wrapper--thin">\r\n        <svg class="russ-ico russ-ico--2-5x russ-banner__icon">\r\n            <use xlink:href="#ico-waveform"></use>\r\n        </svg>\r\n        <div class="russ-banner__content">\r\n            <h1 class="russ-banner__heading">Legg inn deres russelåt</h1>\r\n            <p class="russ-banner__text">Russ.no inviterer alle til å stemme på årets russelåt!</p>\r\n        </div>\r\n    </div>\r\n</a>\r\n<div class="russ-banner russ-banner--bubble">\r\n    <div class="russ-wrapper--thin">\r\n        <h1>RUSS.NO</h1>\r\n        <h1>KÅRER ÅRETS KONSEPTLÅT</h1>\r\n        <!-- <div class="russ-video-player__embed" style="height:250px;width: 400px;max-width: 100%;margin: 20px auto 0 auto;">\r\n            <iframe\r\n                width="560"\r\n                height="315"\r\n                frameborder="0"\r\n                allowfullscreen=""\r\n                src="http://www.youtube.com/embed/OV982aLoPCM?feature=oembed&amp;wmode=opaque&amp;autoplay=0&amp;showsearch=0&amp;fs=1&amp;autohide=1&amp;showinfo=0&amp;rel=0&amp;theme=light&amp;color=white&amp;amp;ap=%2526fmt"></iframe>\r\n        </div> -->\r\n        <!-- <br /> -->\r\n        <!--\r\n        <h3>Nå kan dere vinne 10 000 kr dersom deres konseptlåt leder kåringen 1.mai 2017!</h3>\r\n        -->\r\n        <h4>Last opp låten deres og del låten!</h4>\r\n        <h4>Flest stemmer vinner konkurransen!</h4>\r\n    </div>\r\n</div>\r\n<song-overlay ng-click="toggleOverlay()" song="overlaySong" ng-if="showOverlay" class="russ-animated"></song-overlay>\r\n<div ng-show="filterCount || meta.currentYear.value < $root.currentMinYear">\r\n    <section class="russ-card-section">\r\n        <!-- <div ng-show="songs.length" class="russ-card-paginator">\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(-1)" type="button" ng-hide="currentPage === 0">Forrige</button>\r\n\t\t\t&nbsp;<span>Side {{currentPage + 1}} av {{getTotalPages()}}</span>&nbsp;\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(1)" type="button" ng-hide="currentPage === (getTotalPages() - 1)">Neste</button>\r\n\t\t</div> -->\r\n        <div class="russ-cards">\r\n            <article ng-click="toggleOverlay(song)" song-card class="russ-card russ-card--song russ-animated" song="song" ng-repeat="song in songs | orderBy:\'totalRank\' | limitTo:cardsPerPage:getRepeatStartIndex()"></article>\r\n        </div>\r\n        <div ng-show="songs.length && currentCardLimit < songs.length" when-in-view="showMoreCards()">Laster flere sanger...</div>\r\n        <!-- <div ng-show="songs.length" class="russ-card-paginator">\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(-1)" type="button" ng-hide="currentPage === 0">Forrige</button>\r\n\t\t\t&nbsp;<span>Side {{currentPage + 1}} av {{getTotalPages()}}</span>&nbsp;\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(1)" type="button" ng-hide="currentPage === (getTotalPages() - 1)">Neste</button>\r\n\t\t</div> -->\r\n    </section>\r\n</div>\r\n<div ng-hide="filterCount || meta.currentYear.value < $root.currentMinYear">\r\n    <!-- <section class="russ-card-section">\r\n\t\t<h2 class="russ-card-section__heading">Trending siste uke</h2>\r\n\t\t<div class="russ-cards">\r\n\t\t\t<article ng-click="toggleOverlay(song)" song-card class="russ-card russ-card--song russ-animated" song="song" ng-repeat="song in songs | orderBy:\'trendingRank\' | limitTo:6"></article>\r\n\t\t</div>\r\n\t</section> -->\r\n\r\n    <section class="russ-card-section">\r\n        <h2 class="russ-card-section__heading">Nyeste russelåter</h2>\r\n        <div class="russ-cards">\r\n            <article ng-click="toggleOverlay(song)" song-card class="russ-card russ-card--song russ-animated" song="song" ng-repeat="song in songs | orderBy:\'-createdAt\' | limitTo:2"></article>\r\n        </div>\r\n    </section>\r\n\r\n    <section class="russ-card-section">\r\n        <h2 class="russ-card-section__heading">Topplisten</h2>\r\n        <div class="russ-cards">\r\n            <article ng-click="toggleOverlay(song)" song-card class="russ-card russ-card--song russ-animated" song="song" ng-repeat="song in songs | orderBy:\'totalRank\' | limitTo:currentPopularCardLimit"></article>\r\n        </div>\r\n        <div ng-show="conceptSongs.length && currentPopularCardLimit < conceptSongs.length" when-in-view="showMorePopularCards()">Laster flere sanger...</div>\r\n    </section>\r\n\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/song-overview.directive.html",'<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-desktop">\r\n\t<div class="russ-wrapper--thin">\r\n\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-waveform"></use></svg>\r\n\t\t<div class="russ-banner__content">\r\n\t\t\t<h1 class="russ-banner__heading">Legg inn deres russelåt</h1>\r\n\t\t\t<p class="russ-banner__text">Russ.no inviterer alle til å stemme på årets russelåt!</p>\r\n\t\t</div>\r\n\t</div>\r\n</a>\r\n<section class="russ-flex">\r\n\t<aside class="russ-sidebar">\r\n\t\t<overview-filter>\r\n\t\t\t<!-- <div class="russ-sidebar__header">\r\n\t\t\t\t<div class="russ-content">\r\n\t\t\t\t\tTODO: add spotify\r\n\t\t\t\t</div>\r\n\t\t\t</div> -->\r\n\t\t\t<div ng-init="showFilters = false" class="russ-content russ-hide-desktop">\r\n\t\t\t\t<div class="russ-switch" ng-class="{\'russ-switch--activated\': showFilters}" ng-click="showFilters = !showFilters" md-swipe-left="!showFilters && (showFilters = true)" md-swipe-right="showFilters && (showFilters = false)"><div class="russ-switch__knob"></div></div> Vis flere filtere\r\n\t\t\t</div>\r\n\t\t\t<div class="russ-content russ-filters" ng-class="{\'russ-filters--show\': showFilters}">\r\n\t\t\t\t<p ng-hide="true"><button type="button" name="resetFilters" ng-click="resetFilters()">Reset filters</button></p>\r\n\t\t\t\t<overview-search overview-type="song" filters="overview.filters"></overview-search>\r\n\t\t\t\t<year-selector ng-hide="songYears.length === 1" ng-model="overview.data" overview-type="song" meta="overview.meta" ng-style="{display: \'block\'}"></year-selector>\r\n\t\t\t\t<song-vehicle-type-options filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Hva leter du etter?</song-vehicle-type-options>\r\n\t\t\t\t<released-phases-options overview-type="song" ng-hide="overview.meta.currentYear.value < $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Type russelåt</released-phases-options>\r\n\t\t\t\t<song-genre-options overview-type="song" ng-hide="overview.meta.currentYear.value < $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Sjanger</song-genre-options>\r\n\t\t\t\t<song-production-options overview-type="song" ng-hide="overview.meta.currentYear.value < $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Produksjon</song-production-options>\r\n\t\t\t</div>\r\n\t\t</overview-filter>\r\n\t</aside>\r\n\t<main class="russ-main">\r\n\t\t<song-overview-content filters="overview.filters" ng-if="overview.data && overview.data.length" meta="overview.meta" filter-count="overview.filterCount" songs="overview.filteredData" ></song-overview-content>\r\n\t\t<div ng-if="overview.data && !overview.data.length">\r\n\t\t\t<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive">\r\n\t\t\t\t<div class="russ-wrapper--thin">\r\n\t\t\t\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-waveform"></use></svg>\r\n\t\t\t\t\t<div class="russ-banner__content">\r\n\t\t\t\t\t\t<h1 class="russ-banner__heading">Legg inn deres russelåt</h1>\r\n\t\t\t\t\t\t<p class="russ-banner__text">Russ.no inviterer alle til å stemme på årets russelåt!</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t\t<h1>Ingen sanger lagt til!</h1>\r\n\t\t</div>\r\n\t</main>\r\n</section>\r\n'),$templateCache.put("js/angular-app/overview/vehicle-overview-content.directive.html",'<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-mobile">\r\n\t<div class="russ-wrapper--thin">\r\n\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-globe"></use></svg>\r\n\t\t<div class="russ-banner__content" ng-hide="$root.auth.user && $root.auth.user.vehicle">\r\n\t\t\t<h1 class="russ-banner__heading">Legg inn din buss/van</h1>\r\n\t\t</div>\r\n\t\t<div class="russ-banner__content" ng-show="$root.auth.user && $root.auth.user.vehicle">\r\n\t\t\t<h1 class="russ-banner__heading">Endre din buss/van</h1>\r\n\t\t</div>\r\n\t</div>\r\n</a>\r\n<div ng-show="(filterCount > 1) || meta.currentYear.value < $root.currentMinYear">\r\n\t<section class="russ-card-section">\r\n\t\t<!-- <div ng-show="vehicles.length" class="russ-card-paginator">\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(-1)" type="button" ng-hide="currentPage === 0">Forrige</button>\r\n\t\t\t&nbsp;<span>Side {{currentPage + 1}} av {{getTotalPages()}}</span>&nbsp;\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(1)" type="button" ng-hide="currentPage === (getTotalPages() - 1)">Neste</button>\r\n\t\t</div> -->\r\n\t\t<div class="russ-cards">\r\n\t\t\t<vehicle-card class="russ-card russ-card--vehicle russ-animated" vehicle="vehicle" ng-repeat="vehicle in vehicles | limitTo:currentCardLimit"></vehicle-card>\r\n\t\t</div>\r\n\t\t<div ng-show="vehicles.length && currentCardLimit < vehicles.length" when-in-view="showMoreCards()">Laster flere grupper...</div>\r\n\t\t<!-- <div ng-show="vehicles.length" class="russ-card-paginator">\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(-1)" type="button" ng-hide="currentPage === 0">Forrige</button>\r\n\t\t\t&nbsp;<span>Side {{currentPage + 1}} av {{getTotalPages()}}</span>&nbsp;\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--small russ-btn--grey" ng-click="changePage(1)" type="button" ng-hide="currentPage === (getTotalPages() - 1)">Neste</button>\r\n\t\t</div> -->\r\n\t</section>\r\n</div>\r\n<div ng-hide="(filterCount > 1) || meta.currentYear.value < $root.currentMinYear">\r\n\t<!-- <section class="russ-card-section">\r\n\t\t<h2 class="russ-card-section__heading">Trending siste uke</h2>\r\n\t\t<div class="russ-cards">\r\n\t\t\t<vehicle-card class="russ-card russ-card--vehicle russ-animated" vehicle="vehicle" ng-repeat="vehicle in vehicles | orderBy:\'trendingRank\' | limitTo:6"></vehicle-card>\r\n\t\t</div>\r\n\t</section> -->\r\n\r\n\t<section class="russ-card-section russ-hide-mobile" ng-if="vehiclesWithPicture && vehiclesWithPicture.length">\r\n\t\t<h2 class="russ-card-section__heading">Nylige fullførte busser\r\n\t\t\t<span class="russ-card-section__heading__addon">(med fullstendig profil og alle medlemmer registrert)</span>\r\n\t\t</h2>\r\n\t\t<div class="russ-cards">\r\n\t\t\t<vehicle-card class="russ-card russ-card--vehicle russ-animated" vehicle="vehicle" ng-repeat="vehicle in vehiclesWithPicture | orderBy:\'-completedAt\' | limitTo:2"></vehicle-card>\r\n\t\t</div>\r\n\t</section>\r\n\r\n\t<section class="russ-card-section">\r\n\t\t<h2 class="russ-card-section__heading russ-card-section--vehicle__heading">Topplisten</h2>\r\n\t\t<div class="russ-cards">\r\n\t\t\t<vehicle-card class="russ-card russ-card--vehicle russ-animated" vehicle="vehicle" ng-repeat="vehicle in vehicles | limitTo:currentPopularCardLimit"></vehicle-card>\r\n\t\t</div>\r\n\t\t<div ng-show="vehicles.length && currentPopularCardLimit < vehicles.length" when-in-view="showMorePopularCards()">Laster flere grupper...</div>\r\n\t</section>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/vehicle-overview.directive.html",'<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-desktop">\r\n\t<div class="russ-wrapper--thin">\r\n\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-globe"></use></svg>\r\n\t\t<div class="russ-banner__content">\r\n\t\t\t<h1 class="russ-banner__heading" ng-hide="$root.auth.user && $root.auth.user.vehicle">Legg inn din buss/van</h1>\r\n\t\t\t<h1 class="russ-banner__heading" ng-show="$root.auth.user && $root.auth.user.vehicle">Endre din buss/van</h1>\r\n\t\t</div>\r\n\t</div>\r\n</a>\r\n\r\n<section class="russ-flex">\r\n\t<aside class="russ-sidebar">\r\n\t\t<overview-filter>\r\n\t\t\t<div class="russ-sidebar__header">\r\n\t\t\t\t<div class="russ-content">\r\n\t\t\t\t\t<vehicle-type-options style="display:block;" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Hva leter du etter?</vehicle-type-options>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div ng-init="showFilters = false" class="russ-content russ-hide-desktop">\r\n\t\t\t\t<div class="russ-switch" ng-class="{\'russ-switch--activated\': showFilters}" ng-click="showFilters = !showFilters" md-swipe-left="!showFilters && (showFilters = true)" md-swipe-right="showFilters && (showFilters = false)"><div class="russ-switch__knob"></div></div> Vis flere filtre\r\n\t\t\t</div>\r\n\t\t\t<div class="russ-content russ-filters" ng-class="{\'russ-filters--show\': showFilters}">\r\n\t\t\t\t<p ng-hide="true"><button type="button" name="resetFilters" ng-click="resetFilters()">Reset filters</button></p>\r\n\t\t\t\t<overview-search filters="overview.filters"></overview-search>\r\n\t\t\t\t<year-selector ng-model="overview.data" overview-type="vehicle" meta="overview.meta" ng-style="{display: \'block\'}"></year-selector>\r\n\t\t\t\t<released-phases-options ng-if="overview.meta.currentYear.value >= $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Sluppet</released-phases-options>\r\n\t\t\t\t<county-options ng-if="true || overview.meta.currentYear.value >= $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Områder</county-options>\r\n\t\t\t\t<has-song-options ng-if="overview.meta.currentYear.value >= $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Russelåt</has-song-options>\r\n\t\t\t\t<gender-options ng-if="overview.meta.currentYear.value >= $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Kjønn</gender-options>\r\n\t\t\t\t<meetup-options ng-if="overview.meta.currentYear.value >= $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Landstreff</meetup-options>\r\n\t\t\t\t<buysell-options ng-if="overview.meta.currentYear.value >= $root.currentMinYear" filters="overview.filters" filter-data="filterData(filterKey)" meta="overview.meta" ng-style="{display: \'block\'}">Kjøp & Salg</buysell-options>\r\n\t\t\t</div>\r\n\t\t</overview-filter>\r\n\t</aside>\r\n\t<main class="russ-main">\r\n\t\t<vehicle-overview-content ng-if="overview.data && overview.data.length" meta="overview.meta" filter-count="overview.filterCount" filters="overview.filters" vehicles="overview.filteredData" ></vehicle-overview-content>\r\n\t\t<div ng-if="overview.data && !overview.data.length">\r\n\t\t\t<a ng-href="{{$root.russUrl.vehicleCreate()}}" class="russ-banner russ-banner--interactive russ-hide-mobile">\r\n\t\t\t\t<div class="russ-wrapper--thin">\r\n\t\t\t\t\t<svg class="russ-ico russ-ico--2-5x russ-banner__icon"><use xlink:href="#ico-globe"></use></svg>\r\n\t\t\t\t\t<div class="russ-banner__content">\r\n\t\t\t\t\t\t<h1 class="russ-banner__heading">Legg inn din buss/van</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t\t<h1>Ingen grupper lagt inn!</h1>\r\n\t\t</div>\r\n\t\t<div ng-if="overview.data && overview.data.length && overview.filteredData && !overview.filteredData.length">\r\n\t\t\t<h1>Ingen grupper matcher disse filtrene!</h1>\r\n\t\t</div>\r\n\t</main>\r\n</section>\r\n'),$templateCache.put("js/angular-app/vehicle/vehicle-page.directive.html",'<section class="russ-wrapper--wide">\r\n\t<a ng-href="{{$root.russUrl.vehicles()}}" class="russ-btn russ-btn--back russ-btn--blue">Tilbake til buss/van-oversikt</a>\r\n\t<a ng-href="{{$root.russUrl.vehicleEdit(vehicle.id)}}" class="russ-btn russ-btn--back russ-btn--edit russ-btn--blue" ng-show="$root.auth.user && ($root.auth.user.isAdmin || ($root.auth.user.vehicle === vehicle.id))">Rediger <span>\r\n\t\t<span ng-if="vehicle.type === \'buss\'">buss</span>\r\n\t\t<span ng-if="vehicle.type === \'van\'">van</span>\r\n\t\t<span ng-if="vehicle.type === \'gruppe\'">gruppe</span>\r\n\t</span></a>\r\n</section>\r\n\r\n<vehicle-general-info-section ng-if="vehicle" vehicle="vehicle"></vehicle-general-info-section>\r\n<classified-page ng-show="vehicle.sellingState" class="classifieds-view"></classified-page>\r\n<vehicle-songs ng-if="songs" songs="songs"></vehicle-songs>\r\n<vehicle-member-section class="russ-vehicle-section bg-white block" members="vehicle.members"></vehicle-member-section>\r\n<vehicle-gallery-section images="vehicle.gallery" ng-if="vehicle.gallery && vehicle.gallery.length"></vehicle-gallery-section>\r\n<vehicle-instagram-section class="russ-vehicle-section block" instagram="vehicle.instagram" ng-if="vehicle.instagram"></vehicle-instagram-section>\r\n\r\n<section class="russ-vehicle-section bg-white">\r\n\t<div class="russ-wrapper--wide">\r\n\t\t<div class="russ-flex russ-flex--compensate">\r\n\t\t\t<div class="russ-flex__col">\r\n\t\t\t\t<a ng-href="{{vehicle.facebookUrl}}" target="_blank" class="russ-banner russ-banner--interactive text-center russ-banner--top-icon" ng-if="vehicle.facebookUrl && vehicle.facebookUrl.length">\r\n\t\t\t\t\t<span class="russ-banner__content">\r\n\t\t\t\t\t\t<i class="fa fa-facebook-square russ-banner__top-icon"></i>\r\n\t\t\t\t\t\t<h2 class="russ-h2">Følg {{vehicleService.getName(vehicle)}} på Facebook</h2>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t\t<vehicle-spotify-section class="russ-flex__col block" ng-if="vehicle.spotify && vehicle.spotify.length"></vehicle-spotify-section>\r\n\t\t</div>\r\n\t</div>\r\n</section>'),$templateCache.put("js/angular-app/vehicle-registration/vehicle-create.directive.html",'<section class="russ-wrapper--wide">\r\n\t<a ng-href="{{$root.russUrl.vehicles()}}" class="russ-btn russ-btn--back russ-btn--blue">Tilbake til buss/van-oversikt</a>\r\n</section>\r\n<div class="russ-wrapper--thin">\r\n\t<div class="text-center">\r\n\t\t<h1>Registrering</h1>\r\n\t\t<p>Registrer ditt kjøretøy eller din vennegjeng på Russ.no sin offiselle oversikt. Du kan oppdatere informasjonen underveis i tiden før dere skal være russ. Husk at det kun skal opprettes en profil per gjeng/kjøretøy.</p>\r\n\t</div>\r\n</div>\r\n<vehicle-registration-type vehicle="vehicle" create="true"></vehicle-registration-type>\r\n'),
$templateCache.put("js/angular-app/vehicle-registration/vehicle-edit.directive.html",'<a ng-if="vehicle" ng-href="{{$root.russUrl.vehicle(vehicle.id)}}" class="russ-btn russ-btn--back russ-btn--blue">Til bussprofil</a>\r\n<div class="russ-wrapper--thin">\r\n\t<div class="text-center">\r\n\t\t<h1 class="russ-h1">Redigering</h1>\r\n\t</div>\r\n\r\n\t<vehicle-registration-phase ng-if="vehicle" vehicle="vehicle" phase="teaser"></vehicle-registration-phase>\r\n\t<vehicle-registration-phase ng-if="vehicle" vehicle="vehicle" phase="cover"></vehicle-registration-phase>\r\n\t<vehicle-registration-phase ng-if="vehicle" vehicle="vehicle" phase="concept"></vehicle-registration-phase>\r\n\t<vehicle-registration-classified ng-if="vehicle" vehicle="vehicle"></vehicle-registration-classified>\r\n\t<vehicle-registration-general ng-if="vehicle" vehicle="vehicle"></vehicle-registration-general>\r\n</div>\r\n'),$templateCache.put("js/angular-app/components/classified-card/classified-card.directive.html",'<a \r\n\tng-href="{{$root.russUrl.vehicle(classified.vehicle_id)}}"\r\n\tclass="russ-card__image russ-card__image--vehicle" \r\n\tng-style="{display:\'block\', backgroundImage: \'url(\' + classifiedPicture + \')\'}"\r\n>\r\n</a>\r\n\r\n<!--\r\n<div class="russ-card__badge russ-card__badge--sold" ng-show="vehicle.sellingState === \'sold\'">\r\n\t<span>Solgt</span>\r\n</div>\r\n\r\n<button type="button" ng-click="vehicle.showInquiry = true" class="russ-card__badge" ng-show="vehicle.sellingState === \'for_sale\'">\r\n\t<span>Til salgs</span>\r\n</button>\r\n-->\r\n\r\n<a class="russ-card__content" \r\n\tng-href="{{$root.russUrl.vehicle(classified.vehicle_id)}}"\r\n\tstyle="color: inherit;display: block;text-decoration: none;"\r\n>\r\n\t<p class="russ-card-title">\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="russ-h3">\r\n\t\t\t\t<span style="text-transform:capitalize;font-weight:bold;">{{classified.current_vehicle_name}}</span>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type">Type:</span>\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="russ-h3">\r\n\t\t\t\t<span style="text-transform:capitalize;">{{classified.type}}</span>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type">Merke:</span>\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="russ-h3">\r\n\t\t\t\t<span style="text-transform:capitalize;">{{classified.brand}}</span>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type">Område:</span>\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="russ-h3">\r\n\t\t\t\t<span style="text-transform:capitalize;">{{classified.county.county}}</span>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n</a>\r\n\r\n<div class="russ-card-footer">\r\n\t<div class="russ-card-footer__button">\r\n\t\t<svg class="russ-ico russ-ico--small russ-ico--medium-grey">\r\n\t\t\t<use xlink:href="#ico-members"></use>\r\n\t\t</svg>\r\n\t\t{{classified.seats_total}}&nbsp;&nbsp;\r\n\t\t<span class="russ-card-title__type">Seter</span>\r\n\t</div>\r\n\t<div class="russ-card-footer__button">\r\n\t\t<span class="russ-card-title__text" ng-class="russ-h3">\r\n\t\t\t<span>{{classified.price}} kr</span>\r\n\t\t</span>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/components/filter-tags/filter-tags.template.html",'<div class="filter-tags" ng-cloak>\r\n\t<md-content>\r\n\t\t<br>\r\n\r\n\t\t<md-chips ng-model="$ctrl.selectedFilterTags" md-require-match="$ctrl.requireMatch">\r\n\t\t\t<md-autocomplete md-selected-item="$ctrl.selectedItem" md-search-text="$ctrl.searchText" md-items="item in $ctrl.querySearch($ctrl.searchText)" md-item-text="item.name" placeholder="Add tag">\r\n\t\t\t\t<span md-highlight-text="$ctrl.searchText">{{item.name}}</span>\r\n\t\t\t\t<em md-highlight-text="$ctrl.searchText">({{item.type}})</em>\r\n\t\t\t</md-autocomplete>\r\n\r\n\t\t\t<md-chip-template>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<strong>{{$chip.name}}</strong>\r\n\t\t\t\t\t<em>({{$chip.type}})</em>\r\n\t\t\t\t</span>\r\n\t\t\t</md-chip-template>\r\n\t\t</md-chips>\r\n\r\n\t\t<br>\r\n\t\t<br>\r\n\t</md-content>\r\n</div>'),$templateCache.put("js/angular-app/components/search/search.template.html",'<md-autocomplete\r\n\tng-disabled="ctrl.isDisabled"\r\n\tmd-no-cache="ctrl.noCache"\r\n\tmd-selected-item="ctrl.selectedItem"\r\n\tmd-search-text-change="ctrl.searchTextChange(ctrl.searchText)"\r\n\tmd-search-text="ctrl.searchText"\r\n\tmd-selected-item-change="ctrl.selectedItemChange(item)"\r\n\tmd-items="item in ctrl.querySearch(ctrl.searchText)"\r\n\tmd-item-text="item.display"\r\n\tmd-min-length="999"\r\n\tplaceholder="Søk etter venner..."\r\n\tng-keypress="$ctrl.search($event, ctrl.searchText)"\r\n\tclass="search-component"\r\n>\r\n\t<md-item-template>\r\n\t\t<span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>\r\n\t</md-item-template>\r\n\t<md-not-found>\r\n\t\tNo states matching "{{ctrl.searchText}}" were found.\r\n\t\t<a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a>\r\n\t</md-not-found>\r\n</md-autocomplete>'),$templateCache.put("js/angular-app/components/song-card/song-card.directive.html",'<div class="russ-card__image" ng-style="{backgroundImage: \'url(\' + song.picture +\')\'}"></div>\r\n<div class="russ-card--song__menu">\r\n\t<button class="russ-card--song__menu-item" type="button">\r\n\t\t<svg class="russ-ico"><use xlink:href="#ico-play"></use></svg>\r\n\t\tHør og stem\r\n\t</button>\r\n\t<a class="russ-card--song__menu-item" ng-href="{{$root.russUrl.vehicle(song.vehicle.id)}}" ng-click="$event.stopPropagation()">\r\n\t\t<svg class="russ-ico"><use xlink:href="#ico-vehicle"></use></svg>\r\n\t\tSe profilen\r\n\t</a>\r\n\t<button class="russ-card--song__menu-item" ng-click="$event.stopPropagation();songService.share(song)" type="button">\r\n\t\t<svg class="russ-ico"><use xlink:href="#ico-facebook"></use></svg>\r\n\t\tDel låta\r\n\t</button>\r\n</div>\r\n<div class="russ-card__play-btn">\r\n\t<svg class="russ-ico russ-ico--2x"><use xlink:href="#ico-play"></use></svg>\r\n</div>\r\n<div class="russ-card__content">\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type russ-tooltip" ng-show="song.type === \'teaser\'" tooltip="Teasernavn">T:</span>\r\n\t\t<span class="russ-card-title__type russ-tooltip" ng-show="song.type === \'cover\'" tooltip="Dekknavn">D:</span>\r\n\t\t<span class="russ-card-title__type russ-tooltip" ng-show="song.type === \'concept\'" tooltip="Konseptnavn">K:</span>\r\n\t\t<span>\r\n\t\t\t<span class="russ-card-title__text russ-h3" style="text-transform:capitalize;">\r\n\t\t\t\t{{song.vehicle.name | lowercase | textOnEnd:song.vehicle.year}}\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n\t<div class="russ-flex">\r\n\t\t<div class="russ-card--song__details">\r\n\t\t\t<p class="russ-card--song__placement" ng-show="song.totalRank < 10000">{{song.totalRank}}. plass</p>\r\n\t\t\t<p class="russ-card--song__placement" ng-hide="song.totalRank < 10000">Urangert</p>\r\n\t\t\t<p class="russ-card--song__votes" style="white-space:nowrap">{{song.votes.total}} stemme<span ng-show="song.votes.total !== 1">r</span></p>\r\n\t\t\t<p class="russ-card--song__votes" style="white-space:nowrap" ng-show="song.votes.total">{{song.score}} poeng</p>\r\n\t\t</div>\r\n\t\t<div class="russ-card--song__vote-buttons" ng-click="$event.stopPropagation()">\r\n\t\t\t<!-- <button class="russ-card--song__vote-button" ng-click="songService.vote(song, 1)" ng-class="{\'russ-card--song__vote-button--active\': songService.hasVoted(song, 1), \'russ-card--song__vote-button--voted\': songService.hasVoted(song)}">Stem<span ng-show="songService.hasVoted(song, 1)">t</span> opp</button>\r\n\t\t\t<button class="russ-card--song__vote-button" ng-click="songService.vote(song, -1)" ng-class="{\'russ-card--song__vote-button--voted\': songService.hasVoted(song), \'russ-card--song__vote-button--active\': songService.hasVoted(song, -1)}">Stem<span ng-show="songService.hasVoted(song, -1)">t</span> ned</button> -->\r\n\t\t\t<button type="button" class="russ-card--song__vote-button russ-btn--blue" ng-click="songService.vote(song, 1)" ng-class="{\'russ-btn--green\': songService.hasVoted(song, 1), \'russ-card--song__vote-button--voted\': songService.hasVoted(song)}">\r\n\t\t\t\t<svg class="russ-ico russ-ico--small russ-ico--white">\r\n\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ico-thumbs-up"></use>\r\n\t\t\t\t</svg> <span ng-hide="songService.hasVoted(song, 1)">Stem<span ng-hide="songService.hasVoted(song)"></span></span><span ng-show="songService.hasVoted(song, 1)">Du har stemt</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),$templateCache.put("js/angular-app/components/song-overlay/song-overlay.directive.html",'<div class="russ-backdrop"></div>\r\n<div class="russ-song-overlay">\r\n\t<div class="russ-song-overlay__close">\r\n\t\t<button type="button" class="russ-song-overlay__close russ-icon-btn">\r\n\t\t\t<svg class="russ-ico russ-ico--medium-grey">\r\n\t\t\t\t<use xlink:href="#ico-x2"></use>\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="russ-song-overlay__island" ng-click="$event.stopPropagation()">\r\n\t\t<div class="russ-video-player">\r\n\t\t\t<div class="russ-video-player__embed">\r\n\t\t\t\t<iframe width="560" height="315" ng-src="{{songService.url.getVideoEmbed(song.video)}}" frameborder="0" allowfullscreen></iframe>\r\n\t\t\t</div>\r\n\t\t\t<div class="russ-video-player__meta">\r\n\t\t\t\t<div class="russ-backdrop" style="background-image: url(static/rr-icons/youtube-ph.jpg)"></div>\r\n\t\t\t\t<div class="russ-content">\r\n\t\t\t\t\t<p class="h3">Bli med å stemme frem årets offisielle russelåt!</p>\r\n\t\t\t\t\t<svg class="russ-ico russ-ico--2x russ-ico--white" ng-hide="songRank > 10">\r\n\t\t\t\t\t\t<use xlink:href="#ico-star"></use>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<p class="russ-video-player__placement-label" ng-show="songRank < 10000">Denne låta ligger på\r\n\t\t\t\t\t\t<span class="h2 russ-video-player__placement-count">{{songRank}}. plass</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p class="russ-video-player__placement-label" ng-hide="songRank < 10000">Denne låta er urangert</p>\r\n\t\t\t\t\t<div class="russ-video-player__vote-buttons">\r\n\t\t\t\t\t\t<button type="button" class="russ-btn russ-btn--full russ-btn--big russ-btn--blue" ng-click="songService.vote(song, 1)" ng-class="{\'russ-btn--green\': songService.hasVoted(song, 1)}">\r\n\t\t\t\t\t\t\t<svg class="russ-ico russ-ico--white">\r\n\t\t\t\t\t\t\t\t<use xlink:href="#ico-thumbs-up"></use>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t<span ng-hide="songService.hasVoted(song, 1)">Stem<span ng-hide="songService.hasVoted(song)"></span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span ng-show="songService.hasVoted(song, 1)">Du har stemt</span>\r\n\t\t\t\t\t\t\t<small ng-show="songService.hasVoted(song) && song.votes.up">({{song.votes.up}})</small>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>{{song.votes.total}} stemme<span ng-show="song.votes.total !== 1">r</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p class="russ-card--song__votes" style="white-space:nowrap" ng-show="song.votes.total">{{song.score}} poeng</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="russ-video-header">\r\n\t\t\t<div class="russ-content">\r\n\t\t\t\t<p class="russ-vehicle__type" ng-show="song.type === \'concept\'">Konseptnavn:</p>\r\n\t\t\t\t<p class="russ-vehicle__type" ng-show="song.type === \'cover\'">Dekknavn:</p>\r\n\t\t\t\t<p class="russ-vehicle__type" ng-show="song.type === \'teaser\'">Teasernavn:</p>\r\n\t\t\t\t<h2 class="russ-h1 russ-vehicle__name">\r\n\t\t\t\t\t<span style="text-transform:capitalize;">{{song.vehicle.name | lowercase | textOnEnd:song.vehicle.year}}</span>\r\n\t\t\t\t\t<a ng-href="{{$root.russUrl.vehicle(song.vehicle.id)}}" class="russ-btn russ-btn--in-heading russ-btn--blue" ng-hide="vehiclePage">Se buss-/vanprofil</a>\r\n\t\t\t\t</h2>\r\n\t\t\t\t<p class="russ-video-header__share russ-card-title">\r\n\t\t\t\t\t<a ng-show="song.source.spotify" target="_blank" ng-href="{{song.source.spotify}}" class="russ-song-overlay__social-share">\r\n\t\t\t\t\t\t<span>Hør på spotify &nbsp;</span>\r\n\t\t\t\t\t\t<span class="russ-card-title__text russ-h3">\r\n\t\t\t\t\t\t\t<i class="fa fa-spotify russ-ico--fb russ-ico--spotify"></i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t&nbsp; &nbsp; &nbsp;\r\n\t\t\t\t\t<button type="button" class="russ-song-overlay__social-share" ng-click="songService.share(song)">\r\n\t\t\t\t\t\t<span style="font-size:1.5em;">Del låta &nbsp;</span>\r\n\t\t\t\t\t\t<span class="russ-card-title__text russ-h3">\r\n\t\t\t\t\t\t\t<i class="fa fa-facebook-square russ-ico--fb" style="font-size:3rem;"></i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="russ-comment-section russ-comment-section--new-comment">\r\n\t\t\t<div class="russ-wrapper--thin">\r\n\t\t\t\t<div class="russ-comments__new">\r\n\t\t\t\t\t<form class="russ-comment russ-new-comment" ng-submit="postComment(commentForm)" name="commentForm">\r\n\t\t\t\t\t\t<div class="russ-comment__profile">\r\n\t\t\t\t\t\t\t<div class="russ-comment-profile__picture russ-comment-profile__picture--big" ng-style="{backgroundImage: \'url(\' + $root.user ? $root.user.picture : \'\' +\')\'}"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="russ-comment__text">\r\n\t\t\t\t\t\t\t<textarea ng-click="$root.auth.check(\'for å kommentere\')" ng-model="newComment" class="russ-new-comment__input" name="content" cols="30" rows="1" placeholder="Skriv inn din kommentar her" required></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type="submit" class="russ-btn russ-btn--green russ-new-comment__button">Post kommentar</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<section class="russ-comment-section">\r\n\t\t\t<div class="russ-wrapper--thin">\r\n\t\t\t\t<img src="/static/rr-icons/ajax-loader.gif" alt="" class="russ-ajax" ng-hide="song.comments">\r\n\t\t\t\t<div class="russ-comments russ-animated" ng-show="song.comments">\r\n\t\t\t\t\t<article class="russ-comment russ-animated" ng-repeat="comment in song.comments">\r\n\t\t\t\t\t\t<div class="russ-comment__profile">\r\n\t\t\t\t\t\t\t<a ng-href="{{$root.russUrl.user(comment.user.id)}}" class="russ-comment-profile__poster">\r\n\t\t\t\t\t\t\t\t<div class="russ-comment-profile__picture" ng-style="{backgroundImage: \'url(\' + comment.user.picture +\')\'}"></div>\r\n\t\t\t\t\t\t\t\t<p>{{comment.user.name}}</p>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<svg ng-if="comment.user.vehicle  && comment.user.vehicle.name" class="russ-ico russ-ico--small russ-ico--medium-grey">\r\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ico-vehicle"></use>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t<a ng-if="comment.user.vehicle" ng-href="{{$root.russUrl.vehicle(comment.user.vehicle.id)}}" class="russ-comment-profile__vehicle russ-link" style="text-transform:capitalize;">{{comment.user.vehicle.name | lowercase | textOnEnd:comment.user.vehicle.year}}</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="russ-comment__text">\r\n\t\t\t\t\t\t\t{{comment.content}}\r\n\t\t\t\t\t\t\t<div class="russ-comment__actions">\r\n\t\t\t\t\t\t\t\t<!-- TODO: Uncomment this to enable likes on comments -->\r\n\t\t\t\t\t\t\t\t<!-- <button class="russ-icon-btn" ng-click="commentService.like(comment)">\r\n\t\t\t\t\t\t\t\t\t<svg class="russ-ico russ-ico--interactive" ng-class="{\'russ-ico--medium-grey\': !commentService.hasLiked(comment), \'russ-ico--green\': commentService.hasLiked(comment)}">\r\n\t\t\t\t\t\t\t\t\t\t<use xlink:href="#ico-thumbs-up"></use>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<span ng-show="comment.likes">({{comment.likes}})</span> -->\r\n\r\n\t\t\t\t\t\t\t\t<button type="button" ng-show="$root.auth.user && $root.auth.user.id === comment.user.id" ng-style="{float:\'right\'}" class="russ-icon-btn" ng-click="deleteComment(comment)">\r\n\t\t\t\t\t\t\t\t\t<i class="fa fa-trash"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</article>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/components/vehicle-card/vehicle-card.directive.html",'<a ng-href="{{$root.russUrl.vehicle(vehicle.id)}}" class="russ-card__image russ-card__image--vehicle" ng-style="{display:\'block\', backgroundImage: \'url(\' + vehiclePicture + \')\'}"></a>\r\n<a ng-href="{{$root.russUrl.vehicle(vehicle.id)}}" type="button" class="russ-card__badge" ng-show="vehicle.sellingState"><span>Til salgs</span></a>\r\n\r\n<!-- TODO: Ucomment to enable inquiries -->\r\n<!-- <div ng-show="vehicle.showInquiry" class="russ-modal russ-animated" ng-click="vehicle.showInquiry = false">\r\n\t<div class="russ-modal__island russ-modal__island--red" ng-click="$event.stopPropagation()">\r\n\t\t<button class="russ-modal__close russ-icon-btn" ng-click="vehicle.showInquiry = false">\r\n\t\t\t<svg class="russ-ico russ-ico--medium-grey"><use xlink:href="#ico-x2"></use></svg>\r\n\t\t</button>\r\n\t\t<div class="russ-content">\r\n\t\t\t<h1 class="russ-h3 russ-modal__heading">Til salgs</h1>\r\n\t\t\t<p>\r\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\r\n\t\t\t</p>\r\n\t\t\t<form ng-submit="sendQuestion()" name="questionForm">\r\n\t\t\t\t<textarea class="russ-textarea" name="text" ng-model="question.text" rows="4" cols="40" required placeholder="Skriv inn din melding"></textarea>\r\n\t\t\t\t<button type="submit" class="russ-btn russ-btn--big russ-btn--interactive">Send inn</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</div> -->\r\n<a class="russ-card__content" ng-href="{{$root.russUrl.vehicle(vehicle.id)}}" style="color: inherit;display: block;text-decoration: none;">\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type russ-tooltip" tooltip="Konseptnavn">K:</span>\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="{\'russ-h3\': vehicle.phases.concept.isNewest}">\r\n\t\t\t\t<span style="text-transform:capitalize;">{{vehicle.phases.concept.name | lowercase | textOnEnd:vehicle.year}}</span>\r\n\t\t\t\t<i class="fa fa-music" ng-show="vehicle.phases.concept.songCount"></i>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type russ-tooltip" tooltip="Dekknavn">D:</span>\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="{\'russ-h3\': vehicle.phases.cover.isNewest}">\r\n\t\t\t\t<span style="text-transform:capitalize;">{{vehicle.phases.cover.name | lowercase | textOnEnd:vehicle.year}}</span>\r\n\t\t\t\t<i class="fa fa-music" ng-show="vehicle.phases.cover.songCount"></i>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n\t<p class="russ-card-title">\r\n\t\t<span class="russ-card-title__type russ-tooltip" tooltip="Teasernavn">T:</span>\r\n\t\t<span ng-show="true">\r\n\t\t\t<span class="russ-card-title__text" ng-class="{\'russ-h3\': vehicle.phases.teaser.isNewest}">\r\n\t\t\t\t<span style="text-transform:capitalize;">{{vehicle.phases.teaser.name | lowercase | textOnEnd:vehicle.year}}</span>\r\n\t\t\t\t<i class="fa fa-music" ng-show="vehicle.phases.teaser.songCount"></i>\r\n\t\t\t</span>\r\n\t\t</span>\r\n\t</p>\r\n</a>\r\n<div class="russ-card-footer">\r\n\t<div class="russ-card-footer__button">\r\n\t\t<svg class="russ-ico russ-ico--small russ-ico--medium-grey">\r\n\t\t\t<use xlink:href="#ico-members"></use>\r\n\t\t</svg>\r\n\t\t{{vehicle.membersCount}}\r\n\t\t<a ng-href="{{$root.russUrl.vehicle(vehicle.id)}}" ng-style="{marginLeft: \'4px\'}" class="russ-link">Se medlemmer</a>\r\n\t</div>\r\n\t<div class="russ-card-footer__button">\r\n\t\t<svg class="russ-ico russ-ico--small russ-ico--medium-grey" ng-hide="vehicleService.hasLiked(vehicle)">\r\n\t\t\t<use xlink:href="#ico-thumbs-up"></use>\r\n\t\t</svg>\r\n\t\t<svg class="russ-ico russ-ico--small russ-ico--green" ng-show="vehicleService.hasLiked(vehicle)">\r\n\t\t\t<use xlink:href="#ico-thumbs-up"></use>\r\n\t\t</svg>\r\n\t\t{{vehicle.likes}}\r\n\t\t<button type="button" class="russ-link" ng-hide="vehicleService.hasLiked(vehicle)" ng-click="vehicleService.like(vehicle)">Like side</button>\r\n\t\t<button type="button" class="russ-link" ng-show="vehicleService.hasLiked(vehicle)" ng-click="vehicleService.like(vehicle)">Fjern like</button>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/components/vehicle-songs/vehicle-songs.directive.html",'<section class="russ-vehicle-section russ-vehicle-section--songs">\r\n\t<div class="russ-wrapper--wide text-center">\r\n\t\t<div class="russ-section__header">\r\n\t\t\t<h2 class="russ-h2 russ-vehicle-section__heading">Låter</h2>\r\n\t\t\t<p class="russ-section__ingress">Kampen om årets russelåt er i gang! Se, lytt og STEM på denne bussens/vanens låter, eller se alle <a ng-href="{{$root.russUrl.songs()}}" class="russ-link">låter her</a></p>\r\n\t\t</div>\r\n\t\t<div class="russ-cards" ng-class="{\'russ-cards--few\': songs.length < 3}">\r\n\t\t\t<article song-card song="song" class="russ-card russ-card--song russ-card--play-btn russ-animated" ng-repeat="song in songs | orderBy:\'totalRank\'" ng-click="toggleOverlay(song)"></article>\r\n\t\t</div>\r\n\t\t<song-overlay vehicle-page="true" ng-click="toggleOverlay()" song="overlaySong" ng-if="showOverlay" class="russ-animated"></song-overlay>\r\n\t</div>\r\n</section>\r\n'),$templateCache.put("js/angular-app/feed/ads/feed-ads.template.html",'<!--\r\n<p>Anbefalte produkter fra Russedress på tilbud</p>\r\n<a href="http://russedress.no"><img src="/gfx/ads/varmeparkas.jpg"/></a>\r\n<p>Anbefalte produkter fra Russeservice</p>\r\n<a href="http://russeservice.no"><img src="/gfx/etc/aretsbusslaat.jpg"/></a>\r\n<a href="http://russeservice.no"><img src="/gfx/ads/fleece_jakker.jpg"/></a>\r\n-->'),$templateCache.put("js/angular-app/feed/form/comment-form.template.html",'<img ng-src="{{$root.auth.user.images.tiny}}" class="md-avatar" alt="{{$root.auth.user.name}}" />\r\n<div class="md-list-item-text">\r\n\t<p>\r\n\t\t<md-input-container class="md-block">\r\n\t\t\t<label>Kommenter</label>\r\n\t\t\t<textarea \r\n\t\t\t\tcomment-form-directive\r\n\t\t\t\tng-model="$ctrl.comment_text" \r\n\t\t\t\tng-keyup="$ctrl.check_input($event)"\r\n\t\t\t\trows="1" \r\n\t\t\t\tmd-select-on-focus>\r\n\t\t\t</textarea>\r\n\t\t</md-input-container>\r\n\t</p>\r\n</div>'),$templateCache.put("js/angular-app/feed/form/feed-form.template.html",'<md-card>\r\n\t<md-card-content>\r\n\t\t<search ng-if="!$ctrl.userId"></search>\r\n\t\t<search ng-if="$ctrl.userId" hide show-gt-sm></search>\r\n\r\n\t\t<div ng-if="!$ctrl.userId">\r\n\t\t\t<p>\r\n\t\t\tHei <strong>{{$root.auth.user.first_name}}</strong>. Velkommen tilbake til Russ.no<br />\r\n\t\t\tRuss.no holder deg oppdatert over alle russebusser, biler, vans, russelåter og nyheter. Husk å registrere din egen buss, og legge inn alle medlemmene. Russ.no er stedet for publisering av russebusser, vans og russelåter.</p>\r\n\r\n\t\t\t<md-card-actions ng-show="$ctrl.notices" layout="column">\r\n\t\t\t\t<md-button ng-if="!$root.auth.user.vehicle && !$ctrl.notices.hide_add_vehicle" layout="row" layout-align="space-between">\r\n\t\t\t\t\t<a ng-href="{{$root.russUrl.vehicleCreate()}}">\r\n\t\t\t\t\t\t<span class="icon"><md-icon>directions_bus</md-icon></span>\r\n\t\t\t\t\t\t<span>+ LEGG TIL DIN BUSS</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<span ng-click="$ctrl.hideButton(\'hide_add_vehicle\')"><md-icon>clear</md-icon></span>\r\n\t\t\t\t</md-button>\r\n\t\t\t\t<md-button ng-if="$root.auth.user.unread_messages && !$ctrl.notices.hide_unread_messages" layout="row" layout-align="space-between">\r\n\t\t\t\t\t<a ng-href="{{$root.russUrl.messages()}}">\r\n\t\t\t\t\t\t<span class="icon"><md-icon>message</md-icon></span>\r\n\t\t\t\t\t\t<span ng-if="$root.auth.user.unread_messages == 1">DU HAR {{$root.auth.user.unread_messages}} ULEST MELDING</span>\r\n\t\t\t\t\t\t<span ng-if="$root.auth.user.unread_messages > 1">DU HAR {{$root.auth.user.unread_messages}} ULESTE MELDINGER</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<span ng-click="$ctrl.hideButton(\'hide_unread_messages\')"><md-icon>clear</md-icon></span>\r\n\t\t\t\t</md-button>\r\n\t\t\t</md-card-actions>\r\n\t\t</div>\r\n\r\n\t\t<md-card ng-if="$ctrl.image">\r\n\t\t\t<img ngf-src="$ctrl.image" alt="Upload image preview">\r\n\t\t\t<md-progress-linear md-mode="determinate" value="{{$ctrl.image.uploadProgress}}"></md-progress-linear>\r\n\t\t</md-card>\r\n\r\n\t\t<div layout="row" class="post-text">\r\n\t\t\t<img ng-src="{{$root.auth.user.images.tiny}}" alt="{{$root.auth.user.first_name}}" />\r\n\t\t\t<md-input-container md-no-float class="md-block" flex>\r\n\t\t\t\t<textarea placeholder="{{!$ctrl.userId && \'Hva skjer?\' || \'Skriv noe til \'+$ctrl.userName}}" ng-model="$ctrl.status" rows="3" md-select-on-focus md-no-autogrow></textarea>\r\n\t\t\t</md-input-container>\r\n\t\t</div>\r\n\r\n\t\t<div layout="row" layout-align="{{$ctrl.userId && \'end\' || \'space-between center\' }}">\r\n\t\t\t<div \r\n\t\t\t\tng-if="!$ctrl.userId"\r\n\t\t\t\tname="picture" \r\n\t\t\t\tclass="md-button md-icon-button" \r\n\t\t\t\taria-label="Upload image"\r\n\t\t\t\tngf-fix-orientation="true" \r\n\t\t\t\tngf-select="$ctrl.select_image($file)" \r\n\t\t\t\tngf-pattern="\'image/*\'" \r\n\t\t\t\tngf-accept="\'image/*\'" \r\n\t\t\t\tngf-max-size="6MB" \r\n\t\t\t\t>\r\n\t\t\t\t<md-tooltip md-direction="top">Velg bilde</md-tooltip>\r\n\t\t\t\t<md-icon>perm_media</md-icon>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<span ng-if="!$ctrl.userId">\r\n\t\t\t\t\t<md-tooltip md-direction="top">Synlighet</md-tooltip>\r\n\t\t\t\t\t<md-icon>visibility</md-icon>\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<md-input-container ng-if="!$ctrl.userId">\r\n\t\t\t\t\t<md-select ng-model="$ctrl.selectedPrivacyMode" placeholder="Synlighet" ng-model-options="{trackBy: \'$value.id\'}">\r\n\t\t\t\t\t\t<md-option ng-value="privacyMode" ng-repeat="privacyMode in $ctrl.privacyModes">{{privacyMode.name}}</md-option>\r\n\t\t\t\t\t</md-select>\r\n\t\t\t\t</md-input-container>\r\n\r\n\t\t\t\t<md-button ng-click="$ctrl.post()" class="md-icon-button" aria-label="Post">\r\n\t\t\t\t\t<md-tooltip md-direction="top">Post</md-tooltip>\r\n\t\t\t\t\t<md-icon>send</md-icon>\r\n\t\t\t\t</md-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</md-card-content>\r\n</md-card>'),$templateCache.put("js/angular-app/feed/item/feed-item.template.html",'<md-card>\r\n\t<md-card-header>\r\n\t\t<md-card-avatar>\r\n\t\t\t<a ng-href="{{item.avatar.link}}">\r\n\t\t\t\t<img class="profile-image" ng-src="{{item.avatar.image}}" alt="&nbsp;" />\r\n\t\t\t</a>\r\n\t\t</md-card-avatar>\r\n\r\n\t\t<md-card-header-text>\r\n\t\t\t<span class="md-title">\r\n\t\t\t\t<span ng-repeat="part in item.title"><a ng-if="part.link && !part.symbol" ng-href="{{part.link}}">{{part.text}}</a><span ng-if="!part.link  && !part.symbol">{{part.text}}</span><span ng-if="part.symbol" class="symbol" ng-bind-html="part.symbol | html"></span></span>\r\n\t\t\t</span>\r\n\t\t\t<span class="md-subhead">\r\n\t\t\t\t<span am-time-ago="item.created | amFromUnix">\r\n\t\t\t\t<md-tooltip md-direction="right">{{item.created | amFromUnix | amDateFormat:\'DD.MM.YYYY HH:mm\'}}</md-tooltip>\r\n\t\t\t</span>\r\n\t\t</md-card-header-text>\r\n\r\n\t\t<md-menu md-offset="0 -7">\r\n\t\t\t<md-button ng-click="$mdMenu.open($event)" class="md-icon-button" aria-label="Actions">\r\n\t\t\t\t<md-tooltip md-menu-origin md-direction="top">Valg</md-tooltip>\r\n\t\t\t\t<md-icon>more_vert</md-icon>\r\n\t\t\t</md-button>\r\n\r\n\t\t\t<md-menu-content width="2">\r\n\t\t\t\t<md-menu-item ng-repeat="i in [1]">\r\n\t\t\t\t\t<md-button ng-if="item.user_can_edit" ng-click="confirmDeletePost($event)">\r\n\t\t\t\t\t\t<span md-menu-align-target>Slett</span>\r\n\t\t\t\t\t</md-button>\r\n\t\t\t\t\t<md-button ng-href="{{item.avatar.link}}" ng-if="!item.user_can_edit">\r\n\t\t\t\t\t\t<span md-menu-align-target>Gå til profil</span>\r\n\t\t\t\t\t</md-button>\r\n\t\t\t\t</md-menu-item>\r\n\t\t\t</md-menu-content>\r\n\t\t</md-menu>\r\n\t</md-card-header>\r\n\r\n\t<img ng-if="item.image" ng-src="{{item.image}}" ng-click="clickImage($event, item)" class="md-card-image" alt="{{item.imagealt}}">\r\n\t<img ng-if="item.about_type == 7" ng-src="{{socialImage()}}" ng-click="clickImage($event, item)" class="md-card-image" alt="{{item.description}}">\r\n\t<img ng-if="item.about_type == 8" ng-src="{{socialImage()}}" ng-click="clickImage($event, item)" class="md-card-image" alt="{{item.title[0].text}} - {{item.title[0].link}}">\r\n\r\n\t<div ng-if="embed" class="responsive-embed-wrapper">\r\n\t\t<iframe ng-src="{{embed}}" frameborder="0" allowfullscreen></iframe>\r\n\t</div>\r\n\r\n\t<md-card-content ng-if="item.description">\r\n\t\t<p>{{item.description}}</p>\r\n\t</md-card-content>\r\n\r\n\t<md-card-actions layout="row" layout-align="space-between center">\r\n\t\t<div ng-if="!item.can_vote">\r\n\t\t\t<md-button class="md-raised" ng-click="like()" ng-class="{liked: item.user_liked}" aria-label="Favorite" md-ink-ripple="false" md-no-ink>\r\n\t\t\t\t<md-icon>favorite_border</md-icon>\r\n\t\t\t\t<span>{{item.user_liked ? "LIKER" : "LIK"}}</span>\r\n\t\t\t</md-button>\r\n\t\t\t<div class="item-counter">{{item.num_likes ? item.num_likes + \' liker\' : \'&nbsp;\'}}</div>\r\n\t\t</div>\r\n\r\n\t\t<div ng-if="item.can_vote">\r\n\t\t\t<md-button class="md-raised" ng-click="vote()" ng-class="{liked: item.user_voted}" aria-label="Thumb up" md-ink-ripple="false" md-no-ink>\r\n\t\t\t\t<md-icon>star_border</md-icon>\r\n\t\t\t\t<span>{{item.user_voted ? "STEMT" : "STEM"}}</span>\r\n\t\t\t</md-button>\r\n\t\t\t<div class="item-counter">{{item.num_votes ? item.num_votes + \' stemme\' + (item.num_votes > 1 ? \'r\' : \'\') : \'&nbsp;\'}}</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div ng-if="item.can_follow">\r\n\t\t\t<md-button ng-click="follow()" class="md-icon-button" aria-label="Follow" md-ink-ripple="false">\r\n\t\t\t\t<md-icon ng-class="{followed: item.user_followed}">add</md-icon>\r\n\t\t\t\t<span>{{item.user_followed ? "FØLGER" : "FØLG"}}</span>\r\n\t\t\t</md-button>\r\n\t\t\t<div class="item-counter">{{item.num_follows ? item.num_follows + \' følger\' : \'&nbsp;\'}}</div>\r\n\t\t</div>\r\n\t</md-card-actions>\r\n\r\n\t<md-content ng-controller="feedItemController">\r\n\t\t<md-list class="md-dense comments" flex>\r\n\r\n\t\t\t<md-list-item \r\n\t\t\t\tng-if="item.num_comments > -comment_limit" \r\n\t\t\t\tlayout="row" \r\n\t\t\t\tlayout-align="center center"\r\n\t\t\t\tng-click="toggle_limit()"\r\n\t\t\t\tclass="toggle-row"\r\n\t\t\t>\r\n\t\t\t\t<md-icon>message</md-icon>\r\n\t\t\t\t<p ng-if="limit != \'Infinite\'">Vis alle {{item.num_comments}} kommentarer</p>\r\n\t\t\t\t<p ng-if="limit == \'Infinite\'">Skjul kommentarer</p>\r\n  \t\t\t</md-list-item>\r\n\r\n\t\t\t<md-list-item \r\n\t\t\t\tng-repeat="comment in comments | orderBy:\'created\' | limitTo:limit"\r\n\t\t\t\tclass="md-2-line md-long-text"\r\n\t\t\t\tng-mouseenter="edit=true" \r\n\t\t\t\tng-mouseleave="edit=false"\r\n\t\t\t>\r\n\t\t\t\t<img ng-if="!comment.user_can_edit || !comment.editing_enabled" ng-src="{{comment.user[0].images.tiny}}" class="md-avatar" alt="{{comment.user[0].name}}" />\r\n\t\t\t\t\r\n\t\t\t\t<div class="feed-comment" ng-if="!comment.user_can_edit || !comment.editing_enabled" class="md-list-item-text">\r\n\t\t\t\t\t<a ng-href="{{comment.user_link}}"><h3>{{comment.user[0].name}}</h3></a>\r\n\t\t\t\t\t<span class="angular-newline">{{comment.comment_text}}</span>\r\n\t\t\t\t\t<p><span class="timestamp" am-time-ago="comment.created | amFromUnix"></span></p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<comment-form \r\n\t\t\t\t\tng-if="comment.user_can_edit && comment.editing_enabled"\r\n\t\t\t\t\titem="item" \r\n\t\t\t\t\tcomments="comments" \r\n\t\t\t\t\tedit="comment">\r\n\t\t\t\t</comment-form>\r\n\r\n\t\t\t\t<md-menu md-offset="0 -7" ng-if="comment.user_can_edit">\r\n\t\t\t\t\t<md-button ng-click="$mdMenu.open($event)" class="md-icon-button" aria-label="Actions">\r\n\t\t\t\t\t\t<md-tooltip md-menu-origin md-direction="top">Valg</md-tooltip>\r\n\t\t\t\t\t\t<md-icon ng-show="edit">expand_more</md-icon>\r\n\t\t\t\t\t</md-button>\r\n\r\n\t\t\t\t\t<md-menu-content width="2">\r\n\t\t\t\t\t\t<md-menu-item ng-repeat="c in comment_menu">\r\n\t\t\t\t\t\t\t<md-button ng-click="this[c.method]($event, comment)">\r\n\t\t\t\t\t\t\t\t<span md-menu-align-target>{{c.text}}</span>\r\n\t\t\t\t\t\t\t</md-button>\r\n\t\t\t\t\t\t</md-menu-item>\r\n\t\t\t\t\t</md-menu-content>\r\n\t\t\t\t</md-menu>\r\n\t\t\t</md-list-item>\r\n\r\n\t\t\t<md-list-item class="md-2-line md-long-text">\r\n\t\t\t\t<comment-form item="item" comments="comments"></comment-form>\r\n\t\t\t</md-list-item>\r\n\r\n\t\t</md-list>\r\n\t</md-content>\r\n</md-card>\r\n\r\n<div class="show-image">\r\n\t<div class="md-dialog-container" id="show-image-{{item.id}}">\r\n\t\t<md-dialog>\r\n\t\t\t<img ng-if="item.image" ng-src="{{item.image}}" class="md-card-image" alt="{{item.imagealt}}">\r\n\t\t</md-dialog>\r\n\t</div>\r\n</div>'),
$templateCache.put("js/angular-app/feed/profile/feed-profile.template.html",'<md-card id="small-profile" hide-gt-sm ng-if="$root.auth.user && $ctrl.profile.user && ($ctrl.profile.user.id != $root.auth.user.id || $ctrl.show_profile)">\r\n\t<md-card-content>\r\n\t\t<search></search>\r\n\r\n\t\t<div layout="row">\r\n\t\t\t<img ng-src="{{$ctrl.profile.picture.tiny}}" alt="&nbsp;" />\r\n\t\t\t<div layout="column" class="user-info">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{{$ctrl.profile.full_name}}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{{$ctrl.profile.color}}russ {{$ctrl.profile.season}}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<a ng-href="{{$root.russUrl.school($ctrl.profile.school.id)}}">{{$ctrl.profile.school.name}}</a>, {{$ctrl.profile.address.county}}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-if="$ctrl.vehicle && $ctrl.vehicle.id">\r\n\t\t\t\t\tMedlem av {{$ctrl.vehicle.type_da}} <a ng-href="{{$root.russUrl.vehicle($ctrl.vehicle.id)}}">{{$ctrl.vehicleService.getName($ctrl.vehicle)}}</a>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<p class="social" ng-if="$ctrl.profile.instagram || $ctrl.profile.snapchat || $ctrl.profile.twitter || $ctrl.profile.soundcloud">\r\n\t\t\t\t\t<span ng-if="$ctrl.profile.instagram">Instagram <a ng-href="http://instagram.com/{{$ctrl.profile.instagram}}">@{{$ctrl.profile.instagram}}</a><br /></span>\r\n\t\t\t\t\t<span ng-if="$ctrl.profile.snapchat">Snapchat <a ng-href="https://www.snapchat.com/add/{{$ctrl.profile.snapchat}}">{{$ctrl.profile.snapchat}}</a><br /></span>\r\n\t\t\t\t\t<span ng-if="$ctrl.profile.twitter">Twitter <a ng-href="https://twitter.com/{{$ctrl.profile.twitter}}">@{{$ctrl.profile.twitter}}</a><br /></span>\r\n\t\t\t\t\t<span ng-if="$ctrl.profile.soundcloud">Soundcloud <a ng-href="https://soundcloud.com/{{$ctrl.profile.soundcloud}}">{{$ctrl.profile.soundcloud}}</a><br /></span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p ng-if="$ctrl.profile.events.length">\r\n\t\t\t\t\tSkal til <br />\r\n\t\t\t\t\t<strong ng-repeat="event in $ctrl.profile.events">\r\n\t\t\t\t\t\t<a ng-href="{{$root.russUrl.event(event.id)}}">\r\n\t\t\t\t\t\t\t{{event.title}}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t</strong>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div layout="row" layout-align="space-around center" class="user-actions">\r\n\t\t\t<md-button ng-show="!$root.auth.isFriend($ctrl.profile.user)" ng-href="{{$root.russUrl.addFriend($ctrl.profile.user.id)}}" class="md-icon-button" aria-label="Legg til som venn" md-ink-ripple="false">\r\n\t\t\t\t<md-icon>add</md-icon>\r\n\t\t\t\t<span>Legg til som venn</span>\r\n\t\t\t</md-button>\r\n\t\t\t<md-button ng-show="$root.auth.isFriend($ctrl.profile.user)" ng-href="{{$root.russUrl.removeFriend($ctrl.profile.user.id)}}" class="md-icon-button" aria-label="Fjern til som venn" md-ink-ripple="false">\r\n\t\t\t\t<md-icon>remove</md-icon>\r\n\t\t\t\t<span>Fjern som venn</span>\r\n\t\t\t</md-button>\r\n\t\t\t\r\n\t\t\t<md-button ng-href="{{$root.russUrl.sendMessage($ctrl.profile.user.id)}}" class="md-icon-button" aria-label="Send melding" md-ink-ripple="false">\r\n\t\t\t\t<md-icon>mail_outline</md-icon>\r\n\t\t\t\t<span>Send melding</span>\r\n\t\t\t</md-button>\r\n\t\t</div>\r\n\t</md-card-content>\r\n</md-card>\r\n\r\n<div hide show-gt-sm>\r\n\t<p>\r\n\t\t<img width="200px" ng-src="{{$ctrl.profile.picture.small}}" alt="{{$ctrl.profile.full_name}}" />\r\n\t</p>\r\n\r\n\t<p class="profile-actions" ng-if="$root.auth.user && $ctrl.profile.user && $ctrl.profile.user.id == $root.auth.user.id">\r\n\t\t<md-button ng-href="{{$root.russUrl.profileEdit()}}" class="md-icon-button" aria-label="Rediger profil" md-ink-ripple="false">\r\n\t\t\t<md-icon>create</md-icon>\r\n\t\t\t<span>Rediger profil</span>\r\n\t\t</md-button>\r\n\t</p>\r\n\r\n\t<p>\r\n\t\t<strong>{{$ctrl.profile.full_name}}</strong>\r\n\t</p>\r\n\r\n\t<p>\r\n\t\t<strong ng-show="$ctrl.profile.season">Russ {{$ctrl.profile.season}}</strong> <br />\r\n\t\t<strong ng-show="$ctrl.profile.color">{{$ctrl.profile.color}}russ</strong> <br />\r\n\t\t<a ng-href="{{$root.russUrl.school($ctrl.profile.school.id)}}"><strong>{{$ctrl.profile.school.name}}</strong></a> <br />\r\n\t\t<strong>{{$ctrl.profile.address.county}}</strong> <br />\r\n\t</p>\r\n\r\n\t<p class="social" ng-if="$ctrl.profile.instagram || $ctrl.profile.snapchat || $ctrl.profile.twitter || $ctrl.profile.soundcloud">\r\n\t\t<span ng-if="$ctrl.profile.instagram">Instagram <a ng-href="http://instagram.com/{{$ctrl.profile.instagram}}">@{{$ctrl.profile.instagram}}</a><br /></span>\r\n\t\t<span ng-if="$ctrl.profile.snapchat">Snapchat <a ng-href="https://www.snapchat.com/add/{{$ctrl.profile.snapchat}}">{{$ctrl.profile.snapchat}}</a><br /></span>\r\n\t\t<span ng-if="$ctrl.profile.twitter">Twitter <a ng-href="https://twitter.com/{{$ctrl.profile.twitter}}">@{{$ctrl.profile.twitter}}</a><br /></span>\r\n\t\t<span ng-if="$ctrl.profile.soundcloud">Soundcloud <a ng-href="https://soundcloud.com/{{$ctrl.profile.soundcloud}}">{{$ctrl.profile.soundcloud}}</a><br /></span>\r\n\t</p>\r\n\r\n\t<p class="user-actions" ng-if="$root.auth.user && $ctrl.profile.user && $ctrl.profile.user.id != $root.auth.user.id">\r\n\t\t<md-button ng-show="!$root.auth.isFriend($ctrl.profile.user)" ng-href="{{$root.russUrl.addFriend($ctrl.profile.user.id)}}" class="md-icon-button" aria-label="Legg til som venn" md-ink-ripple="false">\r\n\t\t\t<md-icon>add</md-icon>\r\n\t\t\t<span>Legg til som venn</span>\r\n\t\t</md-button>\r\n\t\t<md-button ng-show="$root.auth.isFriend($ctrl.profile.user)" ng-href="{{$root.russUrl.removeFriend($ctrl.profile.user.id)}}" class="md-icon-button" aria-label="Fjern til som venn" md-ink-ripple="false">\r\n\t\t\t<md-icon>remove</md-icon>\r\n\t\t\t<span>Fjern som venn</span>\r\n\t\t</md-button>\r\n\t\t\r\n\t\t<md-button ng-href="{{$root.russUrl.sendMessage($ctrl.profile.user.id)}}" class="md-icon-button" aria-label="Send melding" md-ink-ripple="false">\r\n\t\t\t<md-icon>mail_outline</md-icon>\r\n\t\t\t<span>Send melding</span>\r\n\t\t</md-button>\r\n\t</p>\r\n\r\n\t<div ng-if="$ctrl.vehicle && $ctrl.vehicle.id">\r\n\t\tMedlem av {{$ctrl.vehicle.type}} med {{$ctrl.translatePhaseName($ctrl.vehicle.current_phase)}} <br />\r\n\r\n\t\t<p>\r\n\t\t\t<a ng-href="{{$root.russUrl.vehicle($ctrl.vehicle.id)}}">\r\n\t\t\t\t<strong>{{$ctrl.vehicleService.getName($ctrl.vehicle)}}</strong>\r\n\t\t\t\t<img width="200px" ng-src="{{$ctrl.vehicleService.getSmallImage($ctrl.vehicle)}}" alt="" />\r\n\t\t\t</a>\r\n\t\t</p>\r\n\r\n\t\t<p class="profile-actions" ng-if="$root.auth.user && $ctrl.profile.user && $ctrl.profile.user.id == $root.auth.user.id">\r\n\t\t\t<md-button ng-href="{{$root.russUrl.vehicleEdit($ctrl.vehicle.id)}}" class="md-icon-button" aria-label="Rediger" md-ink-ripple="false">\r\n\t\t\t\t<md-icon>create</md-icon>\r\n\t\t\t\t<span>Rediger {{$ctrl.vehicle.type}}</span>\r\n\t\t\t</md-button>\r\n\t\t</p>\r\n\r\n\t\t<p>\r\n\t\t\t<a ng-href="{{$root.russUrl.vehicles()}}">\r\n\t\t\t\t<strong>Se alle {{$ctrl.vehicle.type_da}}e</strong>\r\n\t\t\t</a>\r\n\t\t</p>\r\n\t</div>\r\n\r\n\t<div ng-if="$ctrl.profile.events.length">\r\n\t\t<strong>{{$ctrl.profile.first_name}}</strong> skal til <br />\r\n\t\t<p>\r\n\t\t\t<strong ng-repeat="event in $ctrl.profile.events">\r\n\t\t\t\t<a ng-href="{{$root.russUrl.event(event.id)}}">\r\n\t\t\t\t\t{{event.title}}\r\n\t\t\t\t</a>\r\n\t\t\t\t<br />\r\n\t\t\t</strong>\r\n\t\t</p>\r\n\t</div>\r\n\r\n\t<br />\r\n\r\n\t<div ng-if="$ctrl.vehicleFriends.length">\r\n\t\tVenner fra samme {{$ctrl.vehicle.type}} <br/>\r\n\r\n\t\t<ul id="friends">\r\n\t\t\t<li ng-repeat="friend in $ctrl.vehicleFriends">\r\n\t\t\t\t<a ng-href="{{$root.russUrl.feed(friend.id)}}">\r\n\t\t\t\t\t<img width="50px"  height="50px" ng-src="{{friend.images.tiny}}" alt="{{friend.name}}" />\r\n\t\t\t\t\t<strong>{{friend.name}}</strong> <br />\r\n\t\t\t\t\t{{friend.school}} <br />\r\n\t\t\t\t\t{{friend.color}}russ {{friend.season}} <br />\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n\r\n\t<br />\r\n\t<br />\r\n\r\n\t<!--\r\n\t<p>\r\n\t\tSamarbeider med <br />\r\n\t\t<a href="http://russedress.no">\r\n\t\t\t<img width="125px" src="/russedress.png"/>\r\n\t\t</a>\r\n\t</p>\r\n\t-->\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/buysell-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Kjøp & Salg</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="buysellAll" type="radio" ng-model="selectedSellingState" ng-value="">\r\n\t\t<label class="russ-radio__label" for="buysellAll">Alle <span class="russ-radio__count">({{buysellMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="buysellForSale" type="radio" ng-model="selectedSellingState" value="for_sale">\r\n\t\t<label class="russ-radio__label" for="buysellForSale">Til salgs <span class="russ-radio__count">({{buysellMeta.for_sale || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="buysellTeaser" type="radio" ng-model="selectedSellingState" value="none">\r\n\t\t<label class="russ-radio__label" for="buysellTeaser">Ukjent <span class="russ-radio__count">({{buysellMeta.none || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/classifieds-county-options.directive.html",'<div class="russ-sidebar__section">\r\n\r\n\t<h3 class="russ-h3">Områder</h3>\r\n\t\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="countyAll" type="radio" ng-model="selected.county" ng-value="">\r\n\t\t<label class="russ-radio__label" for="countyAll">Alle <span class="russ-radio__count">({{countiesMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio" ng-repeat="county in counties | limitTo:showLimit">\r\n\t\t<input class="russ-radio__input" id="county{{county.name}}" type="radio" ng-model="selected.county" ng-value="county.lowerCaseName">\r\n\t\t<label class="russ-radio__label" for="county{{county.name}}">{{county.name}} <span class="russ-radio__count">({{countiesMeta[county.lowerCaseName] || 0}})</span></label>\r\n\t</div>\r\n\t<button class="russ-btn russ-btn--grey russ-btn--interactive russ-btn--small" type="button" name="showAllCounties" ng-click="showLimit = counties.length" ng-show="showLimit < counties.length">Vis alle</button>\r\n\t<button class="russ-btn russ-btn--grey russ-btn--interactive russ-btn--small" type="button" name="showFewerCounties" ng-click="showLimit = 5" ng-show="showLimit === counties.length">Vis færre</button>\r\n\t\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/classifieds-gearbox-options.directive.html",'<div class="russ-sidebar__section">\r\n\r\n\t<h3 class="russ-h3">Girkasse</h3>\r\n\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="gearboxAll" type="radio" name="gearboxAll" ng-model="selectedGearbox" ng-value="\'all\'">\r\n\t\t<label class="russ-radio__label" for="gearboxAll">Alle <span class="russ-radio__count">({{gearboxMeta.total || 0}})</span></label>\r\n\t</div>\r\n\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="gearboxAutomatic" type="radio" name="gearboxAutomatic" ng-model="selectedGearbox" ng-value="\'automatic\'">\r\n\t\t<label class="russ-radio__label" for="gearboxAutomatic">Automat <span class="russ-radio__count">({{gearboxMeta.automatic || 0}})</span></label>\r\n\t</div>\r\n\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="gearboxManual" type="radio" name="gearboxManual" ng-model="selectedGearbox" ng-value="\'manual\'">\r\n\t\t<label class="russ-radio__label" for="gearboxManual">Manuell <span class="russ-radio__count">({{gearboxMeta.manual || 0}})</span></label>\r\n\t</div>\r\n\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-mileage-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Kilometerstand</h3>\r\n\t<input class="russ-input range-filter from" type="text" placeholder="Fra" ng-model="mileageFrom" ng-model-options="{debounce: 100}">\r\n\t<input class="russ-input range-filter to" type="text" placeholder="Til" ng-model="mileageTo" ng-model-options="{debounce: 100}">\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-modelyear-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Årsmodell</h3>\r\n\t<input class="russ-input range-filter from" type="text" placeholder="Fra" ng-model="modelyearFrom" ng-model-options="{debounce: 100}">\r\n\t<input class="russ-input range-filter to" type="text" placeholder="Til" ng-model="modelyearTo" ng-model-options="{debounce: 100}">\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-price-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Pris</h3>\r\n\t<input class="russ-input range-filter from" type="text" placeholder="Fra" ng-model="mPriceFrom" ng-model-options="{debounce: 100}">\r\n\t<input class="russ-input range-filter to" \ttype="text" placeholder="Til" ng-model="mPriceTo" ng-model-options="{debounce: 100}">\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-seats-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Seter</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="seatsAll" type="radio" ng-model="selectedSeats" ng-value="\'all\'">\r\n\t\t<label class="russ-radio__label" for="seatsAll">Alle <span class="russ-radio__count">({{seatsMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="seatsNormal" type="radio" ng-model="selectedSeats" ng-value="\'normal\'">\r\n\t\t<label class="russ-radio__label" for="seatsNormal">Vanlige setter <span class="russ-radio__count">({{seatsMeta.normal || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="seatsSide" type="radio" ng-model="selectedSeats" ng-value="\'side\'">\r\n\t\t<label class="russ-radio__label" for="seatsSide">Sidestilte <span class="russ-radio__count">({{seatsMeta.side || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="seatsGroups" type="radio" ng-model="selectedSeats" ng-value="\'groups\'">\r\n\t\t<label class="russ-radio__label" for="seatsGroups">Sittegrupper <span class="russ-radio__count">({{seatsMeta.groups || 0}})</span></label>\r\n\t</div>\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-seatsnumber-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Antall seter</h3>\r\n\t<input class="russ-input range-filter from" type="text" placeholder="Fra" ng-model="seatsnumberFrom" ng-model-options="{debounce: 100}">\r\n\t<input class="russ-input range-filter to" type="text" placeholder="Til" ng-model="seatsnumberTo" ng-model-options="{debounce: 100}">\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-tacho-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Takrigg</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="tachoAll" type="radio" ng-model="selectedTacho" ng-value="\'all\'">\r\n\t\t<label class="russ-radio__label" for="tachoAll">Alle <span class="russ-radio__count">({{tachoMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="tachoYes" type="radio" ng-model="selectedTacho" ng-value="\'yes\'">\r\n\t\t<label class="russ-radio__label" for="tachoYes">Ja <span class="russ-radio__count">({{tachoMeta.yes || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="tachoNo" type="radio" ng-model="selectedTacho" ng-value="\'no\'">\r\n\t\t<label class="russ-radio__label" for="tachoNo">Nei <span class="russ-radio__count">({{tachoMeta.no || 0}})</span></label>\r\n\t</div>\r\n</div>'),$templateCache.put("js/angular-app/overview/options/classifieds-type-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Type</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="typeAll" type="radio" ng-model="selectedType" ng-value="\'all\'">\r\n\t\t<label class="russ-radio__label" for="typeAll">Alle <span class="russ-radio__count">({{typeMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="typeBus" type="radio" ng-model="selectedType" ng-value="\'bus\'">\r\n\t\t<label class="russ-radio__label" for="typeBus">Buss/minibus <span class="russ-radio__count">({{typeMeta.bus || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="typeVan" type="radio" ng-model="selectedType" ng-value="\'van\'">\r\n\t\t<label class="russ-radio__label" for="typeVan">Van/bil <span class="russ-radio__count">({{typeMeta.van || 0}})</span></label>\r\n\t</div>\r\n</div>'),$templateCache.put("js/angular-app/overview/options/county-options.directive.html",'<div class="russ-sidebar__section">\r\n\r\n\t<h3 class="russ-h3">Områder</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="countyAll" type="radio" ng-model="selected.county" ng-value="">\r\n\t\t<label class="russ-radio__label" for="countyAll">Alle <span class="russ-radio__count">({{countiesMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio" ng-repeat="county in counties | limitTo:showLimit">\r\n\t\t<input class="russ-radio__input" id="county{{county.name}}" type="radio" ng-model="selected.county" ng-value="county.lowerCaseName">\r\n\t\t<label class="russ-radio__label" for="county{{county.name}}">{{county.name}} <span class="russ-radio__count">({{countiesMeta[county.lowerCaseName] || 0}})</span></label>\r\n\t</div>\r\n\t<button class="russ-btn russ-btn--grey russ-btn--interactive russ-btn--small" type="button" name="showAllCounties" ng-click="showLimit = counties.length" ng-show="showLimit < counties.length">Vis alle</button>\r\n\t<button class="russ-btn russ-btn--grey russ-btn--interactive russ-btn--small" type="button" name="showFewerCounties" ng-click="showLimit = 5" ng-show="showLimit === counties.length">Vis færre</button>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/gender-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Kjønn</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="genderAll" type="radio" ng-model="selectedGender" ng-value="">\r\n\t\t<label class="russ-radio__label" for="genderAll">Alle <span class="russ-radio__count">({{genderMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="genderMale" type="radio" ng-model="selectedGender" value="male">\r\n\t\t<label class="russ-radio__label" for="genderMale">Gutt <span class="russ-radio__count">({{genderMeta.male || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="genderFemale" type="radio" ng-model="selectedGender" value="female">\r\n\t\t<label class="russ-radio__label" for="genderFemale">Jente <span class="russ-radio__count">({{genderMeta.female || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="genderBoth" type="radio" ng-model="selectedGender" value="both">\r\n\t\t<label class="russ-radio__label" for="genderBoth">Begge <span class="russ-radio__count">({{genderMeta.both || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/has-song-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Russelåt</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="hasSongAll" type="radio" ng-model="selectedHasSong" ng-value="">\r\n\t\t<label class="russ-radio__label" for="hasSongAll">Alle <span class="russ-radio__count">({{hasSongMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="hasSongYes" type="radio" ng-model="selectedHasSong" ng-value="true">\r\n\t\t<label class="russ-radio__label" for="hasSongYes">Ja <span class="russ-radio__count">({{hasSongMeta.yes || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="hasSongNo" type="radio" ng-model="selectedHasSong" ng-value="false">\r\n\t\t<label class="russ-radio__label" for="hasSongNo">Nei <span class="russ-radio__count">({{hasSongMeta.no || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/meetup-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Russetreff</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="meetupAll" type="radio" ng-model="selected.meetup" ng-value="">\r\n\t\t<label class="russ-radio__label" for="meetupAll">Alle <span class="russ-radio__count">({{meetupsMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio" ng-repeat="meetup in currentYearMeetups">\r\n\t\t<input class="russ-radio__input" id="meetup{{meetup.id}}" type="radio" ng-model="selected.meetup" ng-value="meetup.id">\r\n\t\t<label class="russ-radio__label" for="meetup{{meetup.id}}">{{meetup.title}} <span class="russ-radio__count">({{meetupsMeta[meetup.id] || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/overview-search.directive.html",'<div class="russ-sidebar__section">\r\n\t<input class="russ-input" type="search" placeholder="Søk..." ng-model="searchInput" ng-model-options="{debounce: 100}">\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/released-phases-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3" ng-transclude></h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="releasedPhaseAll" type="radio" ng-model="selectedPhase" ng-value="">\r\n\t\t<label class="russ-radio__label" for="releasedPhaseAll">Alle <span class="russ-radio__count">({{phasesMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="releasedPhaseConcept" type="radio" ng-model="selectedPhase" value="concept">\r\n\t\t<label class="russ-radio__label" for="releasedPhaseConcept">Konsept <span class="russ-radio__count">({{phasesMeta.concept || 0}})</span></label>\r\n\t</div>\r\n\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="releasedPhaseCover" type="radio" ng-model="selectedPhase" value="cover">\r\n\t\t<label class="russ-radio__label" for="releasedPhaseCover">Dekk <span class="russ-radio__count">({{phasesMeta.cover || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="releasedPhaseTeaser" type="radio" ng-model="selectedPhase" value="teaser">\r\n\t\t<label class="russ-radio__label" for="releasedPhaseTeaser">Teaser <span class="russ-radio__count">({{phasesMeta.teaser || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/song-genre-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Sjanger</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songGenreAll" type="radio" ng-model="selectedSongGenre" ng-value="">\r\n\t\t<label class="russ-radio__label" for="songGenreAll">Alle <span class="russ-radio__count">({{songGenreMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songGenreHipHop" type="radio" ng-model="selectedSongGenre" value="hiphop">\r\n\t\t<label class="russ-radio__label" for="songGenreHipHop">HipHop <span class="russ-radio__count">({{songGenreMeta.hiphop || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songGenreElectronic" type="radio" ng-model="selectedSongGenre" value="electronic">\r\n\t\t<label class="russ-radio__label" for="songGenreElectronic">Electronisk <span class="russ-radio__count">({{songGenreMeta.electronic || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songGenreOther" type="radio" ng-model="selectedSongGenre" value="other">\r\n\t\t<label class="russ-radio__label" for="songGenreOther">Annet <span class="russ-radio__count">({{songGenreMeta.other || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/song-production-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Produsert</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songProductionAll" type="radio" ng-model="selectedSongProduction" ng-value="">\r\n\t\t<label class="russ-radio__label" for="songProductionAll">Alle <span class="russ-radio__count">({{songProductionMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songProductionArtist" type="radio" ng-model="selectedSongProduction" value="artist">\r\n\t\t<label class="russ-radio__label" for="songProductionArtist">Artist <span class="russ-radio__count">({{songProductionMeta.artist || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songProductionSelf" type="radio" ng-model="selectedSongProduction" value="self">\r\n\t\t<label class="russ-radio__label" for="songProductionSelf">Egen <span class="russ-radio__count">({{songProductionMeta.self || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/song-vehicle-type-options.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Kategori</h3>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songVehicleTypeAll" type="radio" ng-model="selectedSongVehicleType" ng-value="">\r\n\t\t<label class="russ-radio__label" for="songVehicleTypeAll">Alle <span class="russ-radio__count">({{songVehicleTypeMeta.total || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songVehicleTypeBus" type="radio" ng-model="selectedSongVehicleType" value="Buss">\r\n\t\t<label class="russ-radio__label" for="songVehicleTypeBus">Buss <span class="russ-radio__count">({{songVehicleTypeMeta.Buss || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songVehicleTypeVan" type="radio" ng-model="selectedSongVehicleType" value="Van">\r\n\t\t<label class="russ-radio__label" for="songVehicleTypeVan">Van <span class="russ-radio__count">({{songVehicleTypeMeta.Van || 0}})</span></label>\r\n\t</div>\r\n\t<div class="russ-radio">\r\n\t\t<input class="russ-radio__input" id="songVehicleTypeGroup" type="radio" ng-model="selectedSongVehicleType" value="Gruppe">\r\n\t\t<label class="russ-radio__label" for="songVehicleTypeGroup">Gruppe <span class="russ-radio__count">({{songVehicleTypeMeta.Gruppe || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/vehicle-type-options.directive.html",'<p>Hva leter du etter?</p>\r\n<div class="russ-btn-filters">\r\n\t<button class="russ-btn russ-btn--interactive russ-btn--filter" ng-class="{\'russ-btn--blue\': selectedVehicleType === \'buss\'}" type="button" ng-click="setVehicleType(\'buss\')">Buss</button>\r\n\t<button class="russ-btn russ-btn--interactive russ-btn--filter" ng-class="{\'russ-btn--blue\': selectedVehicleType === \'van\'}" type="button" ng-click="setVehicleType(\'van\')">Van</button>\r\n\t<button class="russ-btn russ-btn--interactive russ-btn--filter" ng-class="{\'russ-btn--blue\': selectedVehicleType === \'gruppe\'}" type="button" ng-click="setVehicleType(\'gruppe\')">Gruppe</button>\r\n</div>\r\n'),$templateCache.put("js/angular-app/overview/options/year-selector.directive.html",'<div class="russ-sidebar__section">\r\n\t<h3 class="russ-h3">Årstall</h3>\r\n\t<div class="russ-radio" ng-repeat="year in years" ng-show="year.count">\r\n\t\t<input class="russ-radio__input" id="year-{{year.value}}" type="radio" ng-model="selected.year" ng-value="year">\r\n\t\t<label class="russ-radio__label" for="year-{{year.value}}">{{year.value}} <span class="russ-radio__count">({{year.count || 0}})</span></label>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle/sections/vehicle-gallery-section.html",'<div class="russ-carousel">\r\n\t<div class="russ-carousel__slides" ng-class="{\'russ-carousel__slides--simple\': images.length < 6}">\r\n\t\t<div class="russ-carousel-slide russ-carousel-slide--{{$index}} russ-animated" ng-class="{\'russ-carousel-slide--current\': $index === centerIndex}" ng-click="$index !== centerIndex && goToImage(image)" ng-repeat="image in currentImages" ng-hide="paginationClick" md-swipe-right="$index === centerIndex && goToImage(currentImages[getIndex(-1, centerIndex)])" md-swipe-left="$index === centerIndex && goToImage(currentImages[getIndex(1, centerIndex)])">\r\n\t\t\t<div class="russ-carousel-slide__image" ng-style="{backgroundImage: \'url(\' + image.full + \')\'}"></div>\r\n\t\t</div>\r\n\t\t<div class="russ-carousel__buttons" ng-show="currentImages.length > 1">\r\n\t\t\t<div class="russ-carousel__button russ-carousel__button--previous" ng-click="goToImage(currentImages[getIndex(-1, centerIndex)])">\r\n\t\t\t\t<svg class="russ-ico russ-ico--2x"><use xlink:href="#ico-arrow-left"></use></svg>\r\n\t\t\t</div>\r\n\t\t\t<div class="russ-carousel__button russ-carousel__button--next" ng-click="goToImage(currentImages[getIndex(1, centerIndex)])">\r\n\t\t\t\t<svg class="russ-ico russ-ico--2x"><use xlink:href="#ico-arrow-right"></use></svg>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="russ-carousel__paginators" ng-show="currentImages.length > 1">\r\n\t\t<div class="russ-wrapper--wide">\r\n\t\t\t<div class="russ-paginators">\r\n\t\t\t\t<div class="russ-paginator" ng-style="{backgroundImage: \'url(\' + image.thumb + \')\'}" ng-click="goToImage(image)" ng-repeat="image in images" ng-class="{\'russ-paginator--selected\': currentIndex === $index}"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle/sections/vehicle-general-info-section.html",'<section class="russ-vehicle-general-info">\r\n\t<div class="russ-wrapper--wide">\r\n\t\t<div class="russ-flex russ-flex--start">\r\n\t\t\t<div class="russ-vehicle__image" ng-style="{backgroundImage: \'url(\' + vehicleService.getPicture(vehicle) + \')\'}"></div>\r\n\t\t\t<div class="russ-vehicle__content">\r\n\t\t\t\t<div class="russ-content">\r\n\t\t\t\t\t<p class="russ-vehicle__type" ng-hide="names[0]">Ingen navn publisert</p>\r\n\t\t\t\t\t<p class="russ-vehicle__type" ng-show="names[0]">{{names[0].desc}}:</p>\r\n\t\t\t\t\t<h1 class="russ-vehicle__name russ-h1" ng-show="names[0]" style="text-transform:capitalize;">\r\n\t\t\t\t\t\t<span>{{names[0].text | lowercase | textOnEnd:vehicle.year}}</span>\r\n\t\t\t\t\t\t<span class="russ-vehicle__name__type">\r\n\t\t\t\t\t\t\t<span ng-if="vehicle.type === \'buss\'">Buss</span>\r\n\t\t\t\t\t\t\t<span ng-if="vehicle.type === \'van\'">Van</span>\r\n\t\t\t\t\t\t\t<span ng-if="vehicle.type === \'gruppe\'">Gruppe</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t<div class="russ-vehicle__schools">\r\n\t\t\t\t\t\t<span class="russ-link russ-vehicle__school" ng-repeat="school in schools">\r\n\t\t\t\t\t\t\t<a ng-href="{{$root.russUrl.school(school.id)}}" class="russ-vehicle__school__link">{{school.name}}</a> <span class="russ-vehicle__school__separator" ng-if="!$last">/</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-if="vehicle.description">{{vehicle.description}}</div>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<div ng-show="names[0] && names[0].about"><strong>{{names[0].aboutDesc}}:</strong><br> {{names[0].about}}</div>\r\n\t\t\t\t\t<div class="russ-vehicle__names">\r\n\t\t\t\t\t\t<p class="russ-card-title" ng-show="names[1]">\r\n\t\t\t\t\t\t\t<span class="russ-vehicle__type">{{names[1].desc}}:</span>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<span class="russ-card-title__text russ-h3" style="text-transform:capitalize;">\r\n\t\t\t\t\t\t\t\t\t{{names[1].text | lowercase | textOnEnd:vehicle.year}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p class="russ-card-title" ng-show="names[2]">\r\n\t\t\t\t\t\t\t<span class="russ-vehicle__type">{{names[2].desc}}:</span>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<span class="russ-card-title__text russ-h3" style="text-transform:capitalize;">\r\n\t\t\t\t\t\t\t\t\t{{names[2].text | lowercase | textOnEnd:vehicle.year}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class="russ-card-title" style="cursor:pointer;" ng-click="vehicleService.share(vehicle)">\r\n\t\t\t\t\t\t<span class="russ-vehicle__type">Del bussen</span>\r\n\t\t\t\t\t\t<button type="button" class="russ-card--song__menu-item" style="display:inline-block;width:inherit;">\r\n\t\t\t\t\t\t\t<span class="russ-card-title__text russ-h3">\r\n\t\t\t\t\t\t\t\t<i class="fa fa-facebook-square russ-ico--fb"></i>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p class="russ-card-title" ng-show="vehicle.snapchatName">\r\n\t\t\t\t\t\t<span class="russ-vehicle__type">Snapchat:</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<span class="russ-card-title__text russ-h3" style="text-transform:lowercase;">\r\n\t\t\t\t\t\t\t\t{{vehicle.snapchatName}}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</p>\r\n\r\n\r\n\t\t\t\t\t<div class="russ-card-footer russ-vehicle__actions">\r\n\t\t\t\t\t\t<div class="russ-vehicle__action">\r\n\t\t\t\t\t\t\t<svg class="russ-ico russ-ico--medium-grey"><use xlink:href="#ico-members"></use></svg>\r\n\t\t\t\t\t\t\t{{vehicle.members.length}} medlem<span ng-show="vehicle.members.length > 1">mer</span>\r\n\t\t\t\t\t\t\t<!-- TODO: Uncomment this stuff to enable applyForMembership -->\r\n\t\t\t\t\t\t\t<!-- <button class="russ-btn russ-btn--green" ng-hide="vehicle.isMember || vehicleService.hasApplied(vehicle)" ng-click="$root.auth.check(\'for å søke om medlemsskap\') && (showApply = true)">Søk om medlemsskap</button>\r\n\t\t\t\t\t\t\t<div ng-show="vehicleService.hasApplied(vehicle)">Søknad om medlemsskap sendt</div> -->\r\n\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t\t<div class="russ-vehicle__action">\r\n\t\t\t\t\t\t\t<svg class="russ-ico russ-ico--medium-grey" ng-hide="vehicle.is_following"><use xlink:href="#ico-thumbs-up"></use></svg>\r\n\t\t\t\t\t\t\t<svg class="russ-ico russ-ico--green" ng-show="vehicle.is_following"><use xlink:href="#ico-thumbs-up"></use></svg>\r\n\t\t\t\t\t\t\t{{vehicle.followers}} Følg denne siden\r\n\t\t\t\t\t\t\t<button type="button" class="russ-btn russ-btn--green" ng-hide="vehicle.is_following" ng-click="vehicleService.follow(vehicle)">Følg buss</button>\r\n\t\t\t\t\t\t\t<button type="button" class="russ-btn russ-btn--blue" ng-show="vehicle.is_following" ng-click="vehicleService.follow(vehicle)">Fjern følg</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div ng-show="vehicle && showApply" class="russ-modal" ng-click="showApply = false">\r\n\t\t\t\t\t\t<div class="russ-modal__island russ-modal__island--green" ng-click="$event.stopPropagation()">\r\n\t\t\t\t\t\t\t<button type="button" class="russ-modal__close russ-icon-btn" ng-click="showApply = false">\r\n\t\t\t\t\t\t\t\t<svg class="russ-ico russ-ico--medium-grey"><use xlink:href="#ico-x2"></use></svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<div class="russ-content">\r\n\t\t\t\t\t\t\t\t<h1 class="russ-h3 russ-modal__heading">Søk om medlemsskap</h1>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tBe om å bli lagt til i denne gruppa!\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<form ng-submit="vehicleService.applyForMembership(vehicle);hasSentApplication = true" name="questionForm">\r\n\t\t\t\t\t\t\t\t\t<div ng-style="{textAlign: \'center\'}">\r\n\t\t\t\t\t\t\t\t\t\t<button type="submit" class="russ-btn russ-btn--big russ-btn--interactive" ng-hide="hasSentApplication">Send søknad</button>\r\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="russ-btn russ-btn--big russ-btn--green" ng-show="hasSentApplication" disabled>Søknad sendt</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</section>\r\n'),
$templateCache.put("js/angular-app/vehicle/sections/vehicle-instagram-section.html",'<section class="russ-wrapper--wide">\r\n\t<h2 class="russ-h2">\r\n\t\t<i class="fa fa-instagram russ-vehicle-heading__icon"></i> \r\n\t\t<a ng-href="{{instagram.link}}" target="_blank" class="russ-instagram__heading-fragment">@{{instagram.name}}</a>\r\n\t</h2>\r\n\t<div class="russ-instagram__images" ng-show="images && images.length">\r\n\t\t<div class="russ-instagram__image" ng-style="{backgroundImage: \'url(\' + image + \')\'}" ng-click="openLightbox(image)" ng-repeat="image in images | limitTo:10"></div>\r\n\t</div>\r\n\t<h3 ng-if="!images || !images.length">Ingen bilder i Instagram-feeden!</h3>\r\n\t<div class="russ-lightbox russ-animated" ng-show="isLightboxVisible" ng-click="closeLightbox($event)" md-swipe-right="$event.stopPropagation();changeLightboxImage(-1)" md-swipe-left="$event.stopPropagation();changeLightboxImage(1)">\r\n\t\t<div class="russ-lightbox__close russ-icon-btn" ng-click="closeLightbox($event)"><svg class="russ-ico"><use xlink:href="#ico-x"></use></svg></div>\r\n\t\t<div class="russ-lightbox__content">\r\n\t\t\t<div class="russ-lightbox__image" ng-style="{backgroundImage: \'url(\' + currentImage + \')\'}" ng-click="$event.stopPropagation()">\r\n\t\t\t\t<div class="russ-instagram__navigation-buttons">\r\n\t\t\t\t\t<button class="russ-instagram__navigation-button russ-icon-btn russ-instagram__navigation-button--prev" ng-hide="currentIndex === 0" type="button" ng-click="$event.stopPropagation();changeLightboxImage(-1)">\r\n\t\t\t\t\t\t<svg class="russ-ico russ-ico--2x"><use xlink:href="#ico-arrow-left"></use></svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="russ-instagram__navigation-button russ-icon-btn russ-instagram__navigation-button--next" ng-hide="currentIndex === (images.length - 1)" type="button" ng-click="$event.stopPropagation();changeLightboxImage(1)">\r\n\t\t\t\t\t\t<svg class="russ-ico russ-ico--2x"><use xlink:href="#ico-arrow-right"></use></svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-instagram__image-details">\r\n\t\t\t\t\t<h2 class="russ-h2 russ-flex russ-flex--between">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<i class="fa fa-instagram russ-vehicle-heading__icon"></i>\r\n\t\t\t\t\t\t\t<span class="russ-instagram__heading-fragment">\r\n\t\t\t\t\t\t\t\t<a target="_blank" ng-href="{{instagram.link}}">@{{instagram.name}}</a>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</section>'),$templateCache.put("js/angular-app/vehicle/sections/vehicle-member-section.html",'<section class="russ-wrapper--wide">\r\n\t<section class="russ-vehicle-section text-center">\r\n\t\t<div class="russ-vehicle-section__header">\r\n\t\t\t<h2 class="russ-h2 russ-vehicle-section__heading">Medlemmer</h2>\r\n\t\t</div>\r\n\t\t<div class="russ-vehicle-members">\r\n\t\t\t<article vehicle-member class="russ-vehicle-member" user="member" ng-repeat="member in members"></article>\r\n\t\t</div>\r\n\t</section>\r\n</section>\r\n'),$templateCache.put("js/angular-app/vehicle/sections/vehicle-member.html",'<a ng-href="/profile/view/{{user.id}}" class="russ-vehicle-member__link">\r\n\t<div class="russ-vehicle-member__image" ng-style="{backgroundImage: \'url(\' + user.picture + \')\'}"></div>\r\n\t<h2 class="russ-h2 russ-vehicle-member__name">{{user.name}}</h2>\r\n</a>\r\n<p class="russ-vehicle-member__school">\r\n\t{{user.school.name}}\r\n</p>\r\n<div class="russ-vehicle-member__actions" ng-hide="$root.auth.user && $root.auth.user.id === user.id">\r\n\t<button type="button" ng-click="addFriend(user)" ng-hide="user.isFriend || $root.auth.isFriend(user) || addingFriend" class="russ-icon-btn russ-tooltip relative" tooltip="Legg til venn">\r\n\t\t<svg class="russ-ico russ-ico--grey russ-ico--add-friend"><use xlink:href="#ico-add-friend"></use></svg>\r\n\t</button>\r\n\t<img src="/static/rr-icons/ajax-loader.gif" alt="" class="russ-ajax" ng-show="addingFriend">\r\n\t<button type="button" ng-show="addingFriend" ng-click="cancelFriendRequest()" class="russ-regret-flash">Angre?</button>\r\n\t<span ng-show="user.isFriend">\r\n\t\t<svg class="russ-ico russ-ico--green"><use xlink:href="#ico-friend"></use></svg>\r\n\t</span>\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle/sections/vehicle-spotify-section.html",'<iframe src="https://embed.spotify.com/?uri=spotify%3Atrack%3A7LBJui5MdjfCd8YZr4xaqA" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-classified-gallery.directive.html",'<div class="russ-phase__gallery-upload russ-animated" ng-repeat="image in vehicle.classified.gallery;">\r\n\t<div class="russ-phase__image-action" title="Fjern bilde" ng-click="removeImage(image)"></div>\r\n\t<div class="russ-phase__image-bg" ng-style="{backgroundImage: \'url(\' + image.thumb + \')\'}"></div>\r\n</div><div class="russ-phase__gallery-upload russ-animated russ-phase__image--expanded" ng-repeat="image in uploadingImages">\r\n\t<div class="russ-phase__image-action" title="Fjern bilde" ng-show="image.error" ng-click="removeUploadImage(image)"></div>\r\n\t<div class="russ-phase__image-bg" ngf-background="image"></div>\r\n\t<div class="russ-phase__image-bg russ-phase__image-bg--progress">\r\n\t\t<div class="russ-phase__image-bg--progress__bar" ng-style="{transform: \'translateY(\' + (100 - (image.uploadProgress)) + \'%)\'}" ng-class="{\'russ-bg--red\': image.error}"></div>\r\n\t\t<!-- <div class="russ-phase__image-bg--progress__percent" ng-hide="!image.uploadProgress || image.error">{{image.uploadProgress}}%</div> -->\r\n\t\t<div class="russ-phase__image-bg--progress__percent" ng-show="image.error">Error</div>\r\n\t</div>\r\n</div><div class="russ-phase__gallery-upload russ-phase__image russ-phase__image--expanded">\r\n\t<div class="russ-phase__image-bg russ-phase__image-bg--placeholder" ngf-fix-orientation="true" ngf-select="uploadImage($file, $invalidFiles)" name="picture" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-max-size="10MB" ngf-min-height="450" ngf-min-width="680"></div>\r\n</div>\r\n\r\n<p ng-style="{verticalAlign: \'middle\', color:\'#F56F6C\'}" ng-switch="validationError">\r\n\t<small ng-switch-when="maxSize">Filstørrelsen må være under 10MB</small>\r\n\t<small ng-switch-when="minWidth">Bredden må være minst 680px</small>\r\n\t<small ng-switch-when="minHeight">Høyden må være minst 450px</small>\r\n</p>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-classified.directive.html",'<div class="russ-phase" ng-class="{\'russ-phase--expanded\': expanded}" style="margin-bottom: -7px;">\r\n    <form name="generalForm">\r\n        <div class="russ-phase__header" ng-click="expanded = !expanded">\r\n            <h2 class="russ-phase__heading russ-h3">Salgsannonse\r\n                <span class="russ-phase__heading__status" ng-show="vehicle.classified.is_published">\r\n                    &nbsp;Publisert\r\n                </span>\r\n                <span class="russ-phase__heading__status" style="color: #CCC; left: 20px; right: unset;" ng-show="savingState">\r\n                    &nbsp;{{savingState}}\r\n                </span>\r\n            </h2>\r\n            <button type="button" class="russ-phase__toggle"></button>\r\n        </div>\r\n\r\n        <div class="russ-content">\r\n            <div class="russ-wrapper--tiny">\r\n\r\n                <!-- Brand -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="brand">Merke:</label>\r\n                    <input \r\n                        type="text"\r\n                        name="brand" \r\n                        id="brand" \r\n                        class="russ-input-field__input" \r\n                        ng-model="vehicle.classified.brand" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false" \r\n                        ng-change="save()" \r\n                        placeholder="F.eks Volvo"\r\n                    >\r\n                </div>\r\n\r\n                <!-- Post Number -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="post_number">Hvor står kjøretøyet:</label>\r\n                    <input \r\n                        type="text"\r\n                        name="postal_code"\r\n                        id="postal_code" \r\n                        class="russ-input-field__input" \r\n                        ng-model="vehicle.classified.post_number" \r\n                        ng-model-options="{\'debounce\': 1000}"\r\n                        ng-trim="false" \r\n                        ng-pattern="/^[0-9]*$/"\r\n                        ng-change="checkZip()" \r\n                        placeholder="Postnummer"\r\n                    >\r\n                    <span id="postal_city">{{vehicle.classified.post_city}}</span>\r\n                </div>\r\n                \r\n                <!-- Plate Number -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="plate_number">Registreringsnummer:</label>\r\n                    <input \r\n                        type="text"\r\n                        name="plate_number" \r\n                        id="plate_number" \r\n                        class="russ-input-field__input russ-grow" \r\n                        ng-model="vehicle.classified.plate_number" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false"\r\n                        ng-change="save()" \r\n                        placeholder="F.eks XX 124546"\r\n                    >\r\n                </div>\r\n\r\n                <!-- Price -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="price">Pris: eks.omreg.</label>\r\n                    <input \r\n                        type="number"\r\n                        min="0"\r\n                        name="price" \r\n                        id="price" \r\n                        class="russ-input-field__input russ-grow" \r\n                        ng-model="vehicle.classified.price" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false"\r\n                        ng-change="save()" \r\n                        ng-pattern="/^[0-9]*$/"\r\n                        placeholder="F.eks 100 000"\r\n                    >\r\n                </div>\r\n\r\n                <!-- Transfer Fee -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="transfer_fee">Omregistrering:</label>\r\n                    <div class="russ-input-field__input">\r\n                        <!-- Price -->\r\n                        <input \r\n                            type="number"\r\n                            min="0"\r\n                            name="transfer_fee" \r\n                            id="transfer_fee" \r\n                            class="russ-input-field__input russ-grow" \r\n                            ng-model="vehicle.classified.transfer_fee" \r\n                            ng-model-options="{\'debounce\': 500}"\r\n                            ng-trim="false"\r\n                            ng-pattern="/^[0-9]*$/"\r\n                            ng-change="save()" \r\n                            placeholder="F.eks 3 000"\r\n                        >\r\n                        <!-- Check 1 -->\r\n                        <div class="russ-radio">\r\n                            <input \r\n                                class="russ-radio__input" \r\n                                id="transfer_check_1" \r\n                                type="checkbox" \r\n                                ng-model="vehicle.classified.transfer_fee_exempt" \r\n                                ng-model-options="{\'debounce\': 500}" \r\n                                ng-change="save()"\r\n                            >\r\n                            <label class="russ-radio__label russ-checkbox__label" for="transfer_check_1">Fritatt for omregistrering</label>\r\n                        </div>\r\n                        <!-- Check 2 -->\r\n                        <div class="russ-radio">\r\n                            <input \r\n                                class="russ-radio__input" \r\n                                id="transfer_check_2" \r\n                                type="checkbox" \r\n                                ng-model="vehicle.classified.transfer_fee_included" \r\n                                ng-model-options="{\'debounce\': 500}" \r\n                                ng-change="save()"\r\n                            >\r\n                            <label class="russ-radio__label russ-checkbox__label" for="transfer_check_2">Prisen er inkludert omregistrering</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <!-- Model year -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="model_year">Årsmodell:</label>\r\n                    <input \r\n                        type="number"\r\n                        min="1920"\r\n                        name="model_year" \r\n                        id="model_year" \r\n                        class="russ-input-field__input" \r\n                        ng-model="vehicle.classified.model_year" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false" \r\n                        ng-pattern="/^[0-9]*$/"\r\n                        ng-change="save()" \r\n                        placeholder="F.eks 2001"\r\n                    >\r\n                </div>\r\n\r\n                <!-- Mileage -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="mileage">Kilometerstand:</label>\r\n                    <input \r\n                        type="number"\r\n                        min="0"\r\n                        name="mileage" \r\n                        id="mileage" \r\n                        class="russ-input-field__input russ-grow" \r\n                        ng-model="vehicle.classified.mileage" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false"\r\n                        ng-pattern="/^[0-9]*$/"\r\n                        ng-change="save()" \r\n                        placeholder="F.eks 100 000"\r\n                    >\r\n                </div>\r\n\r\n                <!-- Length -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="length">Lengde i meter:</label>\r\n                    <input \r\n                        type="number"\r\n                        min="0"\r\n                        step="0.1"\r\n                        name="length" \r\n                        id="length" \r\n                        class="russ-input-field__input russ-grow" \r\n                        ng-model="vehicle.classified.length" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false"\r\n                        ng-change="save()" \r\n                        placeholder="F.eks 13.5"\r\n                    >\r\n                </div>\r\n\r\n                <!-- Gearbox -->\r\n                <div class="russ-input-field">\r\n                    <label class="russ-input-field__label russ-input-field__label--wide">Girkasse:</label>\r\n                    <div class="russ-input-field__input">\r\n                        <div class="russ-radio">\r\n                            <input \r\n                                class="russ-radio__input" \r\n                                name="gearbox_r" \r\n                                id="gearbox_m" \r\n                                type="radio" \r\n                                ng-model="vehicle.classified.gearbox"\r\n                                ng-change="save()" \r\n                                value="0"\r\n                                required\r\n                            >\r\n                            <label class="russ-radio__label" for="gearbox_m">Manuell</label>\r\n                        </div>\r\n                        <div class="russ-radio">\r\n                            <input \r\n                                class="russ-radio__input" \r\n                                name="gearbox_r" \r\n                                id="gearbox_a" \r\n                                type="radio" \r\n                                ng-model="vehicle.classified.gearbox"\r\n                                ng-change="save()" \r\n                                value="1"\r\n                                required\r\n                            >\r\n                            <label class="russ-radio__label" for="gearbox_a">Automat</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <!-- Seats -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="mileage">Seter:</label>\r\n\r\n                    <div class="russ-input-field__input">\r\n                        <input \r\n                            type="number"\r\n                            min="0"\r\n                            max="99"\r\n                            name="seats_regular" \r\n                            id="seats_regular" \r\n                            class="russ-input-field__input russ-grow seat-inputs" \r\n                            ng-model="vehicle.classified.seats_regular" \r\n                            ng-model-options="{\'debounce\': 500}"\r\n                            ng-trim="false"\r\n                            ng-change="save()" \r\n                            ng-pattern="/^[0-9]*$/"\r\n                            placeholder="Vanlige seter"\r\n                        ><br>\r\n                        <input \r\n                            type="number"\r\n                            min="0"\r\n                            max="99"\r\n                            name="seats_groups" \r\n                            id="seats_groups" \r\n                            class="russ-input-field__input russ-grow seat-inputs" \r\n                            ng-model="vehicle.classified.seats_groups" \r\n                            ng-model-options="{\'debounce\': 500}"\r\n                            ng-trim="false"\r\n                            ng-change="save()" \r\n                            ng-pattern="/^[0-9]*$/"\r\n                            placeholder="Sittegrupper"\r\n                        ><br>\r\n                        <input \r\n                            type="number"\r\n                            min="0"\r\n                            max="99"\r\n                            name="seats_lateral" \r\n                            id="seats_lateral" \r\n                            class="russ-input-field__input russ-grow seat-inputs" \r\n                            ng-model="vehicle.classified.seats_lateral" \r\n                            ng-model-options="{\'debounce\': 500}"\r\n                            ng-trim="false"\r\n                            ng-change="save()" \r\n                            ng-pattern="/^[0-9]*$/"\r\n                            placeholder="Sidestilte"\r\n                        >\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Tacho -->\r\n                <div class="russ-input-field">\r\n                    <label class="russ-input-field__label russ-input-field__label--wide">Takrigg:</label>\r\n                    <div class="russ-input-field__input">\r\n                        <div class="russ-radio">\r\n                            <input \r\n                                class="russ-radio__input" \r\n                                name="tacho" \r\n                                id="tacho_y" \r\n                                type="radio" \r\n                                ng-model="vehicle.classified.tacho"\r\n                                ng-change="save()" \r\n                                value="true"\r\n                                required\r\n                            >\r\n                            <label class="russ-radio__label" for="tacho_y">Ja</label>\r\n                        </div>\r\n                        <div class="russ-radio">\r\n                            <input \r\n                                class="russ-radio__input" \r\n                                name="tacho" \r\n                                id="tacho_n" \r\n                                type="radio" \r\n                                ng-model="vehicle.classified.tacho"\r\n                                ng-change="save()" \r\n                                value="false"\r\n                                required\r\n                            >\r\n                            <label class="russ-radio__label" for="tacho_n">Nei</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Description -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="description" ng-style="{verticalAlign:\'top\'}">Beskrivelse av bussen:</label>\r\n                    <textarea \r\n                        type="text"\r\n                        name="description"  \r\n                        id="description"\r\n                        rows="2" \r\n                        cols="30" \r\n                        class="russ-input-field__input russ-grow"  \r\n                        ng-model="vehicle.classified.description" \r\n                        ng-model-options="{\'debounce\': 500}" \r\n                        ng-change="save()" \r\n                        placeholder=""\r\n                    >\r\n                    </textarea>\r\n                </div>\r\n\r\n                <!-- Gallery -->\r\n                <div class="russ-input-field">\r\n                    <label class="russ-input-field__label">Bilder\r\n                        <small>(bilder må være minst 680x450px og maks 10MB)</small>:\r\n                    </label>\r\n                    <br>\r\n                    <vehicle-registration-classified-gallery ng-if="vehicle" vehicle="vehicle"></vehicle-registration-classified-gallery>\r\n                </div>\r\n\r\n                <!-- Old concept name -->\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="model_year">Konseptnavn fra forrige år:</label>\r\n                    <input \r\n                        type="text"\r\n                        name="old_concept_name" \r\n                        id="old_concept_name" \r\n                        class="russ-input-field__input" \r\n                        ng-model="vehicle.classified.old_concept_name" \r\n                        ng-model-options="{\'debounce\': 500}"\r\n                        ng-trim="false" \r\n                        ng-change="save()" \r\n                        placeholder="F.eks The Asteroids"\r\n                    >\r\n                </div>\r\n\r\n                <div class="russ-phase__activated">\r\n                    <div class="russ-wrapper--tiny">\r\n                        <p>Bussen/vannen vil ligge ute i 30 dager om du trykker publiser.<br>Du vil motta epost når folk tar kontakt med deg vedrørende kjøp.</p>\r\n                        <p>PS: Blir ikke bussen/vanen solgt innen 30 dager må du gå inn her og fornye annonsen for nye 30 dager.</p>\r\n                        <!-- Publish button -->\r\n                        <div\r\n                            class="russ-switch"\r\n                            ng-class="{\'russ-switch--activated\': vehicle.classified.is_published}"\r\n                            ng-click="setPublishedState(!vehicle.classified.is_published)"\r\n                            ng-swipe-left="vehicle.classified.setPublishedState(true)"\r\n                            ng-swipe-right="vehicle.classified.setPublishedState(false)">\r\n                            <div class="russ-switch__knob"></div>\r\n                        </div>\r\n                        <span>{{vehicle.classified.is_published ? \'Publisert\' : \'Ikke publisert\'}}</span>\r\n                        \r\n                        <!-- Renew button -->\r\n                        <div class="russ-wrapper--tiny classified">\r\n                            <div\r\n                                class="russ-switch"\r\n                                ng-class="{\'russ-switch--activated\': renewal_state}"\r\n                                ng-click="renewPublishTime()"\r\n                                ng-swipe-left="renewPublishTime()"\r\n                                ng-swipe-right="renewPublishTime()">\r\n                                <div class="russ-switch__knob"></div>\r\n                            </div>\r\n                        </div>\r\n                        <span>Forny nye 30 dager</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-gallery.directive.html",'<div class="russ-phase__gallery-upload russ-animated" ng-repeat="image in gallery">\r\n\t<div class="russ-phase__image-action" title="Fjern bilde" ng-click="removeImage(image)"></div>\r\n\t<div class="russ-phase__image-bg" ng-style="{backgroundImage: \'url(\' + image.thumb + \')\'}"></div>\r\n</div><div class="russ-phase__gallery-upload russ-animated russ-phase__image--expanded" ng-repeat="image in uploadingImages">\r\n\t<div class="russ-phase__image-action" title="Fjern bilde" ng-show="image.error" ng-click="removeUploadImage(image)"></div>\r\n\t<div class="russ-phase__image-bg" ngf-background="image"></div>\r\n\t<div class="russ-phase__image-bg russ-phase__image-bg--progress">\r\n\t\t<div class="russ-phase__image-bg--progress__bar" ng-style="{transform: \'translateY(\' + (100 - (image.uploadProgress)) + \'%)\'}" ng-class="{\'russ-bg--red\': image.error}"></div>\r\n\t\t<!-- <div class="russ-phase__image-bg--progress__percent" ng-hide="!image.uploadProgress || image.error">{{image.uploadProgress}}%</div> -->\r\n\t\t<div class="russ-phase__image-bg--progress__percent" ng-show="image.error">Error</div>\r\n\t</div>\r\n</div><div class="russ-phase__gallery-upload russ-phase__image russ-phase__image--expanded">\r\n\t<div class="russ-phase__image-bg russ-phase__image-bg--placeholder" ngf-fix-orientation="true" ngf-select="uploadImage($file, $invalidFiles)" name="picture" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-max-size="10MB" ngf-min-height="450" ngf-min-width="680"></div>\r\n</div>\r\n\r\n<p ng-style="{verticalAlign: \'middle\', color:\'#F56F6C\'}" ng-switch="validationError">\r\n\t<small ng-switch-when="maxSize">Filstørrelsen må være under 10MB</small>\r\n\t<small ng-switch-when="minWidth">Bredden må være minst 680px</small>\r\n\t<small ng-switch-when="minHeight">Høyden må være minst 450px</small>\r\n</p>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-general.directive.html",'<div class="russ-phase russ-phase--expanded uc">\r\n\t<form name="generalForm">\r\n\t\t<div class="russ-phase__header" ng-style="{cursor: \'default\'}">\r\n\t\t\t<h2 class="russ-phase__heading russ-h3">Generelt\r\n\t\t\t\t<span class="russ-phase__heading__status" style="color: #CCC; left: 20px; right: unset;" ng-show="savingState">\r\n\t\t\t\t\t&nbsp;{{savingState}}</span>\r\n\t\t\t</h2>\r\n\t\t</div>\r\n\t\t<div class="russ-content">\r\n\t\t\t<vehicle-registration-type ng-if="vehicle" vehicle="vehicle"></vehicle-registration-type>\r\n\r\n\t\t\t<div class="russ-wrapper--tiny">\r\n\t\t\t\t<div class="russ-input-field russ-flex">\r\n\t\t\t\t\t<label class="russ-input-field__label" for="generalDescription" ng-style="{verticalAlign:\'top\'}">Om\r\n\t\t\t\t\t\t{{words.title}}:</label>\r\n\t\t\t\t\t<textarea rows="2" cols="30" class="russ-input-field__input russ-grow" name="description" type="text" id="generalDescription" ng-model="vehicle.description" ng-model-options="{\'debounce\': 500}" ng-change="save()" placeholder="En kort beskrivelse av dere"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-input-field russ-flex">\r\n\t\t\t\t\t<label class="russ-input-field__label" for="amountOfMembers">Estimert antall medlemmer:</label>\r\n\t\t\t\t\t<select class="russ-input-field__input russ-grow" name="amountOfMembers" id="amountOfMembers" ng-change="save()" ng-model-options="{\'debounce\': 500}" ng-model="vehicle.amountOfMembers" ng-options="number as number for number in amountOfMembersOptions"></select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- <div class="russ-input-field russ-flex">\r\n                    <label class="russ0-input-field__label" for="amountOfMembers">Estimert antall medlemmer:</label><input class="russ-input-field__input russ-grow" name="amountOfMembers" type="number" id="amountOfMembers" ng-change="save()" ng-model-options="{\'debounce\': 500}" ng-model="vehicle.amountOfMembers" placeholder="F.eks. 15">\r\n                </div> -->\r\n\t\t\t\t<div class="russ-input-field russ-flex">\r\n\t\t\t\t\t<label class="russ-input-field__label" for="facebook">Facebook:</label>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tclass="russ-input-field__input russ-grow" \r\n\t\t\t\t\t\tname="facebook" \r\n\t\t\t\t\t\ttype="url" \r\n\t\t\t\t\t\tid="facebook" \r\n\t\t\t\t\t\tng-model="vehicle.facebookUrl" \r\n\t\t\t\t\t\tplaceholder="F.eks. https://www.facebook.com/5shadesofruss" \r\n\t\t\t\t\t\tng-class="{\'russ-input--error\': generalForm.facebook.$touched && generalForm.facebook.$invalid}" \r\n\t\t\t\t\t\tng-model-options="{\'debounce\': 500}" \r\n\t\t\t\t\t\tng-change="save()"\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-input-field russ-flex">\r\n\t\t\t\t\t<label class="russ-input-field__label" for="snapchat">Snap-brukernavn:</label>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tclass="russ-input-field__input russ-grow" \r\n\t\t\t\t\t\tname="snapchat" \r\n\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\tid="snapchat" \r\n\t\t\t\t\t\tng-model="vehicle.snapchatName" \r\n\t\t\t\t\t\tng-trim="false" \r\n\t\t\t\t\t\tng-change="snapchatNameChanged()" \r\n\t\t\t\t\t\tplaceholder="F.eks. macklemoresnapchat"\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-input-field" ng-if="vehicle && !vehicle.instagram">\r\n\t\t\t\t\t<label class="russ-input-field__label">Instagram:</label><br>\r\n\t\t\t\t\t<button ng-click="connectWithInstagram()" class="russ-btn russ-btn--back russ-btn--instagram" type="button">Koble til Instagram</button><br>\r\n\t\t\t\t\t<small>Du må være eier av gruppens Instagram konto for å koble den opp</small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-input-field" ng-if="vehicle && vehicle.instagram">\r\n\t\t\t\t\t<label style="margin-right: 20px;" class="russ-input-field__label">Instagram tilkoblet\r\n\t\t\t\t\t\t<a target="_blank" ng-href="{{vehicle.instagram.link}}">@{{vehicle.instagram.name}}</a>\r\n\t\t\t\t\t</label><button type="button" ng-click="removeInstagram()" class="russ-btn russ-btn--small russ-btn--instagram">Fjern kobling</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class="russ-input-field">\r\n\t\t\t\t\t<label class="russ-input-field__label">Russetreff:</label>\r\n\t\t\t\t\t<vehicle-registration-meetups ng-if="vehicle" vehicle="vehicle"></vehicle-registration-meetups>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-input-field">\r\n\t\t\t\t\t<label class="russ-input-field__label">Galleri\r\n\t\t\t\t\t\t<small>(bilder må være minst 680x450px og maks 10MB)</small>:</label><br>\r\n\t\t\t\t\t<vehicle-registration-gallery ng-if="vehicle" vehicle="vehicle"></vehicle-registration-gallery>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<vehicle-registration-members ng-if="vehicle" vehicle="vehicle"></vehicle-registration-members>\r\n\t\t</div>\r\n\t</form>\r\n\r\n\t<p style="float:right;margin-right: 25px;" ng-show="savingState">{{savingState}}\r\n\t\t<small ng-show="savingState === states.saved">({{lastSavedDate | date:\'dd.MM.yy kl HH:mm\'}})</small>\r\n\t\t<small ng-repeat="friend in couldNotBeAdded">{{friend.name}} er allerede medlem av en gruppe.</small>\r\n\t</p>\r\n\t<br>\r\n\t<br>\r\n\r\n\t<!-- <div class="russ-phase__activated russ-animated russ-bg--green" ng-show="generalForm.$dirty">\r\n        <div class="russ-wrapper--tiny">\r\n            <p class="russ-top0">Du har gjort endringer. Vil du lagre disse endringene?</p>\r\n            <button class="russ-btn russ-btn--border russ-btn--green russ-btn--big" ng-click="save()">Lagre endringer</button>\r\n            <small class="russ-top0" ng-show="savingError">En feil skjedde under lagring.</small>\r\n        </div>\r\n    </div> -->\r\n\t<button ng-show="vehicle && ($root.auth.user.isAdmin || userIsOrWasAdmin)" style="margin-bottom:25px;margin-top:8px;margin-left:25px;" class="russ-btn russ-btn--red russ-btn--interactive" type="button" ng-click="deleteVehicle()">Slett {{vehicle.type | lowercase}}</button>\r\n\t<small class="russ-top0" ng-show="deletionError">En feil skjedde under sletting.</small>\r\n\t<button ng-show="vehicle && isMember($root.auth.user)" style="float:right;margin-bottom:25px;margin-top:8px;margin-right:25px;" class="russ-btn russ-btn--interactive" type="button" ng-click="leaveVehicle()">Forlat {{vehicle.type | lowercase}}</button>\r\n</div>\r\n'),
$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-meetups.html",'<div class="russ-radio" ng-repeat="meetup in meetups">\r\n\t<input class="russ-radio__input" id="meetup{{meetup.id}}" type="checkbox" ng-model="meetup.isGoing" ng-model-options="{\'debounce\': 500}" ng-change="updateVehicleMeetups()">\r\n\t<label class="russ-radio__label russ-checkbox__label" for="meetup{{meetup.id}}">{{meetup.title}}</label>\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-members.directive.html",'<div class="russ-wrapper--tiny">\r\n    <div class="russ-input-field">\r\n        <br>\r\n        <br>\r\n        <label class="russ-input-field__label">Medlemmer:</label><br>\r\n        <div class="russ-phase__members">\r\n            <div class="russ-phase__member russ-animated" ng-repeat="member in vehicle.members">\r\n                <div class="russ-phase__gallery-upload">\r\n                    <div class="russ-phase__image-action" ng-hide="$root.auth.user.id === member.id || (member.isAdmin && !isCurrentUserAdmin)" ng-click="removeMember(member)"></div>\r\n                    <div class="russ-phase__image-bg" ng-style="{backgroundImage: member.picture ? \'url(\' + member.picture + \')\' : \'\'}"></div>\r\n                </div>\r\n                <p class="russ-vehicle-member__name">\r\n                    {{member.name}}\r\n                </p>\r\n\r\n                <div ng-show="(isCurrentUserAdmin || $root.auth.user.isAdmin) && member.id != $root.auth.user.id">\r\n                    <button class="russ-btn russ-btn--green russ-btn--interactive russ-btn--small" type="button" ng-click="makeAdmin(member)" ng-hide="member.isAdmin"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;&nbsp;Admin</button>\r\n                    <button class="russ-btn russ-btn--red russ-btn--interactive russ-btn--small" type="button" ng-click="removeAdmin(member)" ng-show="member.isAdmin"><i class="fa fa-minus-circle" aria-hidden="true"></i>&nbsp;&nbsp;Admin</button>\r\n                </div>\r\n            </div>\r\n            <div class="russ-phase__member" ng-show="!isSelectingFriends">\r\n                <div class="russ-phase__image russ-phase__gallery-upload russ-phase__image--expanded">\r\n                    <div class="russ-phase__image-bg russ-phase__image-bg--placeholder" ng-hide="isSelectingFriends" ng-click="isSelectingFriends = true"></div>\r\n                    <div class="russ-phase__image-bg russ-phase__image-bg--placeholder" ng-show="isSelectingFriends" ng-click="isSelectingFriends = false"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="text-center" ng-style="{marginBottom: \'1em\'}" ng-hide="isSelectingFriends">\r\n            <div>\r\n                <small>Legg til medlemmer ved å trykke på + ikonet.</small>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div ng-show="isSelectingFriends" class="russ-phase__activated relative text-center">\r\n    <button type="button" class="russ-phase__activated__close russ-icon-btn" ng-click="isSelectingFriends = false">\r\n        <svg class="russ-ico russ-ico--grey">\r\n            <use xlink:href="#ico-x2"></use>\r\n        </svg>\r\n    </button>\r\n    <p>Legg til medlemmer på bussen</p>\r\n    <p>\r\n        <small>Er du ikke venn med noen medlemmer enda? Søk opp navnet\r\n            <span ng-hide="noSearchInput" style="cursor:pointer;" class="russ-link" ng-click="focusSearch()">her</span>\r\n            <a ng-show="noSearchInput" class="russ-link" ng-href="{{$root.russUrl.friends()}}">her</a>\r\n            og legg til som venn på profilen deres. Da kan du legge personen til bussen/vanen din.</small>\r\n    </p>\r\n    <form ng-submit="sendPhoneInvite()">\r\n        <div class="russ-wrapper--tiny" style="max-width:475px;">\r\n            <div class="russ-input-field russ-flex">\r\n                <label class="russ-input-field__label" for="phoneNumberInvite">Inviter med mobilnummer:</label>\r\n                <div style="white-space:nowrap;">\r\n                    <input class="russ-input-field__input russ-grow" type="tel" id="phoneNumberInvite" ng-model="newPhoneNumber" placeholder="F.eks. 98765432" style="max-width:140px;">\r\n                    <button type="submit" class="russ-btn russ-btn--border russ-btn--green russ-btn--small russ-grow">Send invitasjon</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <div class="russ-phase__member russ-animated" ng-repeat="friend in $root.auth.user.friends" ng-hide="$root.auth.user && $root.auth.user.id === friend.id">\r\n        <div class="russ-phase__gallery-upload" style="cursor:pointer;" ng-click="isMember(friend) ? removeMember(getMember(friend.id)) : addMember(friend)">\r\n            <div class="russ-phase__image-bg" ng-style="{backgroundImage: \'url(\' + friend.picture + \')\'}"></div>\r\n        </div>\r\n        <p class="russ-p russ-vehicle-member__name">{{friend.name}}</p>\r\n\r\n        <button ng-click="showAlreadyMemberFlash(friend)" ng-show="friend.vehicleId && friend.vehicleId !== vehicle.id" class="russ-icon-btn" title="Allerede medlem av en annen gruppe" type="button">\r\n            <i class="fa fa-truck fa-2"></i>\r\n        </button>\r\n        <button ng-click="addMember(friend)" ng-hide="isMember(friend) || (friend.vehicleId && friend.vehicleId !== vehicle.id)" class="russ-icon-btn" title="Legg til medlem" type="button">\r\n            <svg class="russ-ico russ-ico--grey russ-ico--add-friend">\r\n                <use xlink:href="#ico-add-friend"></use>\r\n            </svg>\r\n        </button>\r\n        <span ng-show="isMember(friend)" ng-click="removeMember(getMember(friend.id))" title="Fjern medlem">\r\n            <svg class="russ-ico russ-ico--green">\r\n                <use xlink:href="#ico-friend"></use>\r\n            </svg>\r\n        </span>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-phase.directive.html",'<div class="russ-phase" ng-class="{\'russ-phase--expanded\': expanded}">\r\n    <form name="phaseForm" class="russ-form">\r\n        <div class="russ-phase__header" ng-click="expanded = !expanded">\r\n            <h2 class="russ-phase__heading russ-h3">{{words.title}}\r\n                <span class="russ-phase__heading__status" ng-show="phase.isPublished">\r\n                    &nbsp;Publisert</span>\r\n                <span class="russ-phase__heading__status" style="color: #CCC; left: 20px; right: unset;" ng-show="savingState">\r\n                    &nbsp;{{savingState}}</span>\r\n            </h2>\r\n            <button type="button" class="russ-phase__toggle"></button>\r\n        </div>\r\n        <div class="russ-content">\r\n            <div class="russ-wrapper--tiny">\r\n                <p class="text-center russ-phase__instructions russ-medium-grey">\r\n                    <small>{{words.explanation}}</small>\r\n                </p>\r\n                <h3 style="margin-bottom:1em;text-align:center;text-transform:capitalize;" ng-show="phase.name">{{phase.name | lowercase | textOnEnd:vehicle.year}}</h3>\r\n                <div class="russ-input-field russ-flex" ng-style="{position:\'relative\'}">\r\n                    <div class="russ-phase__image-action input-validation-circle" title="Påkrevd felt" ng-class="{\'russ-bg--green\': phaseForm.name.$valid}"></div>\r\n                    <label class="russ-input-field__label" for="name{{phaseName}}">{{words.name}}:</label><input\r\n                        class="russ-input-field__input russ-grow"\r\n                        name="name"\r\n                        type="text"\r\n                        id="name{{phaseName}}"\r\n                        ng-model="phase.name"\r\n                        placeholder="F.eks. The Asteroids"\r\n                        vehicle="vehicle"\r\n                        unique-vehicle-name-validation\r\n                        required\r\n                        ng-if="vehicle"\r\n                        ng-class="{\'russ-input--error\': phaseForm.name.$invalid && (phaseForm.$submitted || phase.isPublished)}">\r\n                </div>\r\n                <small class="russ-text--red" style="display: block;margin-top: -25px;margin-bottom: 25px;" ng-show="phaseForm.name.$error.uniqueVehicleName">Dette navnet er allerede i bruk</small>\r\n                <div class="russ-input-field russ-flex">\r\n                    <label class="russ-input-field__label" for="about{{phaseName}}" ng-style="{verticalAlign:\'top\'}">Om\r\n                        {{words.title}}:</label>\r\n                    <textarea rows="2" cols="30" class="russ-input-field__input russ-grow" name="about" type="text" id="about{{phaseName}}" ng-model="phase.about" ng-model-options="{\'debounce\': 500}" ng-change="save()" placeholder="En kort beskrivelse av deres {{words.concept}}"></textarea>\r\n                </div>\r\n                <div>\r\n                    <div class="russ-input-field">\r\n                        <label class="russ-input-field__label russ-input-field__label--fixed">{{words.picture}}:</label>\r\n                        <div class="russ-phase__image">\r\n\r\n                            <div class="russ-phase__image-action" title="Fjern bilde" ng-show="phase.newPicture || phase.picture" ng-click="removePicture()"></div>\r\n\r\n                            <div\r\n                                class="russ-phase__image-bg russ-phase__file russ-animated"\r\n                                name="picture"\r\n                                type="file"\r\n                                id="picture{{phaseName}}"\r\n                                ng-model="phase.newPicture"\r\n                                ngf-select="validateImage($file, $invalidFiles)"\r\n                                ngf-fix-orientation="true"\r\n                                ngf-pattern="\'image/*\'"\r\n                                ngf-accept="\'image/*\'"\r\n                                ngf-max-size="10MB"\r\n                                ngf-min-height="450"\r\n                                ngf-min-width="680"\r\n                                ng-if="!phase.picture && !phase.newPicture"></div>\r\n                            <div class="russ-phase__image-bg russ-phase__image-bg--progress" ng-show="!!phase.newPicture" ng-style="{zIndex:\'2\'}">\r\n                        \t\t<div class="russ-phase__image-bg--progress__bar" ng-style="{transform: \'translateY(\' + (100 - (phase.newPicture.uploadProgress)) + \'%)\'}" ng-class="{\'russ-bg--red\': phase.newPicture.error}"></div>\r\n                        \t\t<!-- <div class="russ-phase__image-bg--progress__percent" ng-hide="!phase.newPicture.uploadProgress || phase.newPicture.error">{{phase.newPicture.uploadProgress}}%</div> -->\r\n                        \t\t<div class="russ-phase__image-bg--progress__percent" ng-show="phase.newPicture.error">Error</div>\r\n                        \t</div>\r\n                            <div class="russ-phase__image-bg russ-phase__image-bg--placeholder" ng-hide="phase.picture || !!phase.newPicture"></div>\r\n\r\n                            <div class="russ-phase__image-bg" ng-style="{backgroundImage: phase.picture ? \'url(\' + phase.picture + \')\' : \'\'}" ng-hide="!!phase.newPicture"></div>\r\n\r\n                            <div class="russ-phase__image-bg" ng-show="!!phase.newPicture" ngf-background="phase.newPicture"></div>\r\n                        </div>\r\n                        <p class="russ-medium-grey" style="margin-top: 0.5em;"><small>Bilder må være minst 680x450px og maks 10MB. Kvadratiske bilder funker best.</small></p>\r\n                        <p ng-style="{verticalAlign: \'middle\', color:\'#F56F6C\'}" ng-switch="validationError">\r\n                            <small ng-switch-when="maxSize">Filstørrelsen må være mindre enn 10MB</small>\r\n                            <small ng-switch-when="minWidth">Bredden må være minst 680px</small>\r\n                            <small ng-switch-when="minHeight">Høyden må være minst 450px</small>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <vehicle-registration-songs phase-name="phaseName" vehicle-id="vehicle.id" songs="phase.songs" words="words" class="russ-phase__songs"></vehicle-registration-songs>\r\n    <div class="russ-wrapper--tiny" style="margin-bottom: 1.5em; margin-top:-1em;">\r\n        <p class="russ-medium-grey" ng-hide="!expanded || phase.isPublished"><small>OBS! Låter i {{words.title | lowercase}} vil ikke vises før {{words.title | lowercase}} er publisert.</small></p>\r\n\r\n    </div>\r\n    <div class="russ-phase__activated">\r\n        <div class="russ-wrapper--tiny">\r\n            <h3 class="russ-input-field__label russ-top0">Aktiver\r\n                {{words.title}}\r\n                på profilen</h3>\r\n            <p>{{words.publishCta}}</p>\r\n            <div\r\n                class="russ-switch"\r\n                ng-class="{\'russ-switch--activated\': phase.isPublished}"\r\n                ng-click="setPublishedState(!phase.isPublished)"\r\n                md-swipe-left="phase.isPublished(true)"\r\n                md-swipe-right="phase.isPublished(false)">\r\n                <div class="russ-switch__knob"></div>\r\n            </div>\r\n            <span>{{phase.isPublished ? \'Publisert\' : \'Ikke publisert\'}}</span>\r\n        </div>\r\n    </div>\r\n    <!-- <div class="russ-phase__activated russ-animated russ-bg--green" ng-show="phaseForm.$dirty || isPublishedChanged || pictureChanged">\r\n        <div class="russ-wrapper--tiny">\r\n            <p class="russ-top0">Du har gjort endringer i\r\n                <strong>{{words.title | lowercase}}</strong>. Vil du lagre disse endringene?</p>\r\n            <button class="russ-btn russ-btn--border russ-btn--green russ-btn--big" ng-click="save(phaseForm)">Lagre endringer</button>\r\n            <small class="russ-top0" ng-show="savingError">En feil skjedde under lagring.</small>\r\n        </div>\r\n    </div> -->\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-song.directive.html",'<div class="russ-phase__image-action russ-phase__image-action--edit" ng-click="song.isEditing = true" title="Rediger sang"></div>\r\n\r\n<div class="russ-phase__image-bg" ng-show="song.picture" ng-style="{backgroundImage: \'url(\' + song.picture + \')\'}" ng-click="song.isEditing = true"></div>\r\n\r\n<form name="songForm" class="russ-phase__edit-form">\r\n\t<div class="russ-wrapper--tiny">\r\n\r\n\t\t<div class="russ-input-field" ng-style="{position:\'relative\'}">\r\n\t\t\t<div class="russ-phase__image-action input-validation-circle" title="Påkrevd felt" ng-class="{\'russ-bg--green\': songForm.video.$valid}"></div>\r\n\t\t\t<label class="russ-input-field__label russ-input-field__label--wide" for="songVideoUrl{{$id}}">YouTube/Vimeo URL</label>\r\n\t\t\t<input \r\n\t\t\t\tclass="russ-bg--white russ-input-field__input" \r\n\t\t\t\tid="songVideoUrl{{$id}}" \r\n\t\t\t\ttype="url" \r\n\t\t\t\tname="video" \r\n\t\t\t\tng-change="getPicture()" \r\n\t\t\t\tng-model="song.video" \r\n\t\t\t\tsong-video-validation \r\n\t\t\t\tplaceholder="Lim inn YouTube-url her" \r\n\t\t\t\tng-class="{\'russ-input--error\': songForm.video.$dirty && songForm.video.$invalid}"\r\n\t\t\t\tng-disabled="!isCreate && !$root.auth.user.isAdmin"\r\n\t\t\t\trequired\r\n\t\t\t>\r\n\t\t\t<small ng-show="songForm.video.$invalid && songForm.video.$error.vimeo">Kunne ikke hente video fra vimeo.</small>\r\n\t\t</div>\r\n\r\n\t\t<div class="russ-input-field" ng-style="{position:\'relative\'}">\r\n\t\t\t<div class="russ-phase__image-action input-validation-circle" title="Påkrevd felt" ng-class="{\'russ-bg--green\': songForm.spotify.$valid}"></div>\r\n\t\t\t<label class="russ-input-field__label russ-input-field__label--wide" for="songSpotifyUrl{{$id}}">Spotify Track URL</label>\r\n\t\t\t<input \r\n\t\t\t\tclass="russ-bg--white russ-input-field__input" \r\n\t\t\t\tid="songSpotifyUrl{{$id}}" \r\n\t\t\t\ttype="url" \r\n\t\t\t\tname="spotify" \r\n\t\t\t\tspotify-validation \r\n\t\t\t\tng-model="song.spotify"\r\n\t\t\t\tplaceholder="Lim inn Spotify-url her" \r\n\t\t\t\tng-class="{\'russ-input--error\': songForm.spotify.$dirty && songForm.spotify.$invalid}"\r\n\t\t\t>\r\n\t\t\t<small ng-show="songForm.spotify.$invalid">Kunne ikke hente track fra spotify.</small>\r\n\t\t</div>\r\n\r\n\t\t<div class="russ-input-field">\r\n\t\t\t<label class="russ-input-field__label russ-input-field__label--wide">Sjanger:</label>\r\n\t\t\t<div class="russ-input-field__input">\r\n\t\t\t\t<div class="russ-radio">\r\n\t\t\t\t\t<input class="russ-radio__input" name="genre" id="songGenreElectronic{{$id}}" type="radio" ng-model="song.genre" value="electronic" required>\r\n\t\t\t\t\t<label class="russ-radio__label" for="songGenreElectronic{{$id}}">Elektronisk</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-radio">\r\n\t\t\t\t\t<input class="russ-radio__input" name="genre" id="songGenreHipHop{{$id}}" type="radio" ng-model="song.genre" value="hiphop" required>\r\n\t\t\t\t\t<label class="russ-radio__label" for="songGenreHipHop{{$id}}">Hip-hop</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-radio">\r\n\t\t\t\t\t<input class="russ-radio__input" name="genre" id="songGenreOther{{$id}}" type="radio" ng-model="song.genre" value="other" required>\r\n\t\t\t\t\t<label class="russ-radio__label" for="songGenreOther{{$id}}">Annet</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="russ-input-field">\r\n\t\t\t<label class="russ-input-field__label russ-input-field__label--wide">Produksjon:</label>\r\n\t\t\t<div class="russ-input-field__input">\r\n\t\t\t\t<div class="russ-radio">\r\n\t\t\t\t\t<input class="russ-radio__input" name="production" id="songProductionArtist{{$id}}" type="radio" ng-model="song.production" value="artist" required>\r\n\t\t\t\t\t<label class="russ-radio__label" for="songProductionArtist{{$id}}">Artist</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="russ-radio">\r\n\t\t\t\t\t<input class="russ-radio__input" name="production" id="songProductionSelf{{$id}}" type="radio" ng-model="song.production" value="self" required>\r\n\t\t\t\t\t<label class="russ-radio__label" for="songProductionSelf{{$id}}">Egen</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<button class="russ-btn russ-btn--red" type="button" ng-hide="isCreate" ng-click="delete()">Slett</button>\r\n\t\t<button class="russ-btn" type="button" name="cancel" ng-click="cancel()">Avbryt</button>\r\n\t\t<button class="russ-btn russ-btn--green" type="button" name="save" ng-click="save()" ng-show="songForm.$valid && !saving">Lagre</button>\r\n\t\t<small class="russ-top0" ng-show="song.error">En feil skjedde under lagring.</small>\r\n\t</div>\r\n</form>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-songs.directive.html",'<div class="russ-content" style="padding-top: 0;padding-bottom: 0;">\r\n    <div class="russ-wrapper--tiny">\r\n        <div class="russ-input-field">\r\n            <label class="russ-input-field__label">{{words.song}}:</label>\r\n\r\n            <div ng-class="{\'russ-phase__edit-song\': song.isEditing, \'russ-phase__image\': !song.isEditing, \'russ-phase__image--song\': !song.isEditing}" vehicle-registration-song remove-function="removeSong(song)" song="song" ng-repeat="song in songs"></div>\r\n\r\n            <div class="russ-phase__image russ-phase__image--song" ng-hide="isAnySongEditing()">\r\n                <button type="button" class="russ-phase__image-bg russ-phase__image-bg--placeholder" ng-click="addNewSong()"></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("js/angular-app/vehicle-registration/sections/vehicle-registration-type.directive.html",'<form ng-submit="updateVehicleType()">\r\n\t<div class="russ-wrapper--tiny">\r\n\t\t<div class="russ-flex russ-flex--mobile">\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--filter russ-btn--filter-bright" ng-class="{\'russ-btn--blue\': type === \'buss\'}" type="button" ng-click="setVehicleType(\'buss\')" ng-class="{\'bg-facebook\': type === \'buss\'}">Buss</button>\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--filter russ-btn--filter-bright" ng-class="{\'russ-btn--blue\': type === \'van\'}" type="button" ng-click="setVehicleType(\'van\')" ng-class="{\'bg-facebook\': type === \'van\'}">Van</button>\r\n\t\t\t<button class="russ-btn russ-btn--interactive russ-btn--filter russ-btn--filter-bright" ng-class="{\'russ-btn--blue\': type === \'gruppe\'}" type="button" ng-click="setVehicleType(\'gruppe\')" ng-class="{\'bg-facebook\': type === \'gruppe\'}">Gruppe</button>\r\n\t\t\t<br>\r\n\t\t</div>\r\n\t</div>\r\n\t<p style="text-align: right;margin-top: 10px;margin-bottom: -18px;" ng-show="!isCreate && savingState">{{savingState}} <small ng-show="savingState === states.saved">({{lastSavedDate | date:\'dd.MM.yy kl HH:mm\'}})</small></p>\r\n\t<!-- FIXME: Remove inline styles -->\r\n\t<!-- <div ng-style="{margin:\'.3em auto 0 auto\', maxWidth: \'400px\', textAlign:\'center\'}"> -->\r\n\t\t<!-- <button class="russ-btn russ-btn--interactive russ-btn--green russ-btn--big" type="submit" ng-show="type !== originalType && vehicleTypeState !== \'saving\'"><span ng-hide="isCreate">Lagre</span><span ng-show="isCreate">Opprett</span></button> -->\r\n\t\t<!-- <span ng-switch="vehicleTypeState">\r\n\t\t\t<span ng-switch-when="saving" ng-hide="isCreate">Lagrer...</span>\r\n\t\t\t<span ng-switch-when="saving" ng-show="isCreate">Oppretter...</span>\r\n\t\t\t<span ng-switch-when="saved">Lagret!</span>\r\n\t\t\t<span ng-switch-when="error">En feil skjedde under lagring</span>\r\n\t\t</span> -->\r\n\t<!-- </div> -->\r\n</form>\r\n')}]);
angular.module("russ").factory("auth",["$http","$q","ENDPOINT","JWT_TOKEN","flashService","russDataParse",function($http,$q,ENDPOINT,JWT_TOKEN,flashService,russDataParse){var noUserMessage="Du må være innlogget for å gjøre dette",incompleteProfileMessage="Du må fullføre profilen din for å gjøre dette",serviceObject={user:null,getUserPromise:null,incomplete:null,check:function(message){return message=angular.isUndefined(message)?serviceObject.incomplete?incompleteProfileMessage:noUserMessage:serviceObject.incomplete?"Fullfør profilen din "+message:"Logg inn "+message,!!serviceObject.user||(flashService.showMessage(message),!1)},isFriend:function(user){var loggedInUser=serviceObject.user;if(!loggedInUser)return!1;for(var i=0,j=loggedInUser.friends.length;i<j;i++)if(loggedInUser.friends[i].id===user.id)return user.isFriend=!0,!0;return!1}};return JWT_TOKEN&&(serviceObject.getUserPromise=$http.get(ENDPOINT+"users/self").then(function(response){var user=response.data;return user=russDataParse.user(user),serviceObject.user=user,user})["catch"](function(response){return 400===response.status&&(serviceObject.incomplete=!0),$q.reject("incomplete user profile")})),serviceObject}]);
angular.module("russ").factory("commentService",["$http","ENDPOINT","auth",function($http,ENDPOINT,auth){var commentEndpoint="comments",serviceObject={like:function(comment){if(!comment)throw new Error("No comment given to like function");if(auth.check("for å like kommentarer")){var commentId=comment.id;if(commentId){var likeValue,likedCommentIndex=auth.user.likedComments.indexOf(commentId),hasLiked=serviceObject.hasLiked(comment);return hasLiked?(likeValue=!1,auth.user.likedComments.splice(likedCommentIndex,1),comment.likes-=1):(likeValue=!0,auth.user.likedComments.push(commentId),comment.likes+=1),$http.post(ENDPOINT+commentEndpoint+"/"+comment.id+"/like",{value:likeValue})}}},"delete":function(comment){return $http["delete"](ENDPOINT+commentEndpoint+"/"+comment.id)},hasLiked:function(comment){if(auth.user){var commentId=comment.id,likedCommentIndex=auth.user.likedComments.indexOf(commentId);return likedCommentIndex!==-1}}};return serviceObject}]);
angular.module("russ").directive("directiveTemplate",[function(){return{restrict:"E",templateUrl:"js/angular-app/directive-template.html"}}]);
angular.module("russ").directive("flashNotification",["flashService",function(flashService){return{restrict:"E",scope:{},templateUrl:"js/angular-app/flash-notification.directive.html",link:function(scope,elem,attrs){elem.addClass("russ-animated"),elem.addClass("russ-flash"),scope.flashService=flashService}}}]);
angular.module("russ").factory("flashService",["$rootScope","$timeout",function($rootScope,$timeout){var flashNotificationTimeout,defaultDuration=5e3,serviceObject={showMessage:function(message,duration,hideLogin){angular.isUndefined(message)&&(message="En ukjent feil har skjedd"),!angular.isUndefined(duration)&&duration||(duration=defaultDuration),$rootScope.showFlashNotification=!0,$rootScope.hideFlashNotificationLogin=hideLogin,serviceObject.message=message,flashNotificationTimeout&&$timeout.cancel(flashNotificationTimeout),flashNotificationTimeout=$timeout(function(){$rootScope.showFlashNotification=!1,$rootScope.hideFlashNotificationLogin=!1,flashNotificationTimeout=null},duration)}};return serviceObject}]);
angular.module("russ").factory("friend",["$http","ENDPOINT","auth",function($http,ENDPOINT,auth){return{add:function(user){if(auth.check("for å legge til venner"))return $http.post(ENDPOINT+"friend",{id:user.id})}}}]);
"use strict";var imageEndpoint="image";angular.module("russ").factory("Image",["Upload","ENDPOINT","russDataParse",function(Upload,ENDPOINT,russDataParse){var image={};return image.upload_image=function(file){return Upload.upload({url:ENDPOINT+imageEndpoint,method:"POST",data:{picture:file}}).then(function(response){var uploadedImage=russDataParse.galleryUpload(response.data);return uploadedImage})},image}]);
angular.module("tempmenu",["ngAnimate","ngAria","ngMaterial"]),angular.module("tempmenu").config(["$mdThemingProvider",function($mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("red").accentPalette("blue-grey").warnPalette("orange").backgroundPalette("grey")}]),angular.module("tempmenu").controller("tempmenuappctrl",function($scope,$timeout,$mdSidenav,$log){function buildToggler(navID){return function(){$mdSidenav(navID).toggle()}}$scope.toggleProfile=buildToggler("profile"),$scope.toggleStores=buildToggler("stores")});
"use strict";var noticeEndpoint="notice";angular.module("russ").factory("noticeService",["$resource","ENDPOINT",function($resource,ENDPOINT){var notice={};return notice.get=function(){return $resource(ENDPOINT+noticeEndpoint+"/get",{},{query:{method:"GET"}})},notice.set=function(){return $resource(ENDPOINT+noticeEndpoint+"/set",{},{save:{method:"POST"}})},notice}]);
angular.module("russ").factory("russDataParse",[function(){var cache={},setCachedData=function(data,type){if(!type||!data.id)throw new Error("No type or no id given");cache.hasOwnProperty(type)||(cache[type]={});var cachedType=cache[type],cachedData=cachedType[data.id];cachedData?angular.extend(cachedData,data):cachedType[data.id]=data},getCachedData=function(data){if(!data.type||!data.id)throw new Error("No type or no id given");var cachedType=cache[data.type],cachedData=cachedType?cachedType[data.id]:null;return cachedData?cachedData:(setCachedData({id:data.id},data.type),getCachedData(data))},getUniqueRelationshipArray=function(relationshipData){var alreadyShown=[],result=relationshipData.filter(function(elem){if(alreadyShown.indexOf(elem.id)<0)return alreadyShown.push(elem.id),!0});return result},parseJsonApiData=function(data){var result=data.attributes;result.id=data.id;var relationship,relationships=data.relationships;for(var key in relationships)relationships.hasOwnProperty(key)&&(relationship=relationships[key],relationship&&relationship.data&&(angular.isArray(relationship.data)?result[key]=getUniqueRelationshipArray(relationship.data).map(getCachedData):result[key]=getCachedData(relationship.data)));return setCachedData(result,data.type),result},parseJsonApiObject=function(jsonApiObject){if(jsonApiObject.included){var included=jsonApiObject.included;angular.forEach(included,function(includedData){parseJsonApiData(includedData)})}var result,data=jsonApiObject.data;return angular.isArray(data)?result=data.map(parseJsonApiData):data&&(result=parseJsonApiData(data)),result},parseVehicle=function(vehicle){var resultVehicle=parseJsonApiObject(vehicle);return resultVehicle},parseVehicles=function(vehicles){var resultVehicles=parseJsonApiObject(vehicles);return resultVehicles},parseUser=function(user){var resultUser=parseJsonApiObject(user);return resultUser},parsePhase=function(phase){var resultPhase=parseJsonApiObject(phase);return resultPhase},parseClassified=function(classified){var resultClassified=parseJsonApiObject(classified);return resultClassified},parseClassifieds=function(classifieds){var resultClassifieds=parseJsonApiObject(classifieds);return resultClassifieds},parse=function(obj){var result=parseJsonApiObject(obj);return result};return{vehicles:parseVehicles,vehicle:parseVehicle,classified:parseClassified,classifieds:parseClassifieds,phase:parsePhase,songs:parseJsonApiObject,song:parseJsonApiObject,user:parseUser,galleryUpload:parseJsonApiObject,parse:parse}}]);
angular.module("russ").factory("russUrl",["$location",function($location){var basePath=$location.protocol()+"://"+$location.host(),cacheBust="/capi/empty_user_cache",vehicles="/groups",vehiclePage=vehicles+"/view",vehicleCreate=vehicles+"/create",vehicleEdit=vehicles+"/edit",classifieds="/classifieds",songs="/tunes",messages="/message/view",sendMessage="/message/send",songPage=songs+"#?song=",user="/profile/view",feed="/feed/view",finishProfile="/profile/create",profileEdit="/profile/edit",login="/account/login",friends="/friends",addFriend="/friends/add",removeFriend="/friends/remove",school="/school/index",event="/events/view",instagramClientId="959bf4e319aa4c54918dfdc453242c64",instagramRedirectUriComponent=encodeURIComponent(basePath+"/socialapi/connect_vehicle_instagram?vehicle_id="),instagram="https://api.instagram.com/oauth/authorize/?client_id="+instagramClientId+"&response_type=token&redirect_uri="+instagramRedirectUriComponent;return{cacheBust:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=cacheBust,shouldEncode?encodeURIComponent(result):result},vehicles:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=vehicles,shouldEncode?encodeURIComponent(result):result},classifieds:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=classifieds,shouldEncode?encodeURIComponent(result):result},classifiedEdit:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=vehicleEdit+"/"+id+"#!?tab=classifieds",shouldEncode?encodeURIComponent(result):result},login:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=login,shouldEncode?encodeURIComponent(result):result},finishProfile:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=finishProfile,shouldEncode?encodeURIComponent(result):result},friends:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=friends,shouldEncode?encodeURIComponent(result):result},addFriend:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=addFriend+"/"+id,shouldEncode?encodeURIComponent(result):result},removeFriend:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=removeFriend+"/"+id,shouldEncode?encodeURIComponent(result):result},vehicle:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=vehiclePage+"/"+id,shouldEncode?encodeURIComponent(result):result},vehicleCreate:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=vehicleCreate,shouldEncode?encodeURIComponent(result):result},vehicleEdit:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=vehicleEdit+"/"+id,shouldEncode?encodeURIComponent(result):result},songs:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=songs,shouldEncode?encodeURIComponent(result):result},song:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=songPage+id,shouldEncode?encodeURIComponent(result):result},user:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=user+"/"+id,shouldEncode?encodeURIComponent(result):result},feed:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=feed+"/"+id,shouldEncode?encodeURIComponent(result):result},school:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=school+"/"+id,shouldEncode?encodeURIComponent(result):result},messages:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=messages,shouldEncode?encodeURIComponent(result):result},profileEdit:function(absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=profileEdit,shouldEncode?encodeURIComponent(result):result},sendMessage:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=sendMessage+"/"+id,shouldEncode?encodeURIComponent(result):result},event:function(id,absPath,shouldEncode){var result="";return absPath&&(result+=basePath),result+=event+"/"+id,shouldEncode?encodeURIComponent(result):result},instagram:function(id){var result=instagram+id;return result}}}]);
angular.module("russ").factory("songService",["$http","$q","$filter","ENDPOINT","auth","russDataParse","russUrl",function($http,$q,$filter,ENDPOINT,auth,russDataParse,russUrl){var VIMEO_REGEXP=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,YOUTUBE_REGEXP=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,SPOTIFY_REGEXP=/https?:\/\/(?:www\.|play\.|open\.)?spotify.com\/track\/(.+)/,getVimeoJsonUrl=function(id){return"https://vimeo.com/api/v2/video/"+id+".json"},getYoutubeImageUrl=function(id){return"https://img.youtube.com/vi/"+id+"/hqdefault.jpg"},cachedVimeoResponses={},cachedYears={},cachedFullSongs={},songEndpoint="songs",textOnEndFilter=$filter("textOnEnd"),decorateSong=function(song){return song.video=song.source.video,song.spotify=song.source.spotify,song.genre&&(song.genre=song.genre.toLowerCase()),song.votes.total=song.votes.up+song.votes.down,song.comments&&song.comments.reverse(),song},serviceObject={decorateSong:decorateSong,get:function(year){return cachedYears[year]?$q.when(cachedYears[year]):$http.get(ENDPOINT+songEndpoint,{params:{year:year}}).then(function(response){var parsedData=russDataParse.songs(response.data);return parsedData=parsedData.filter(function(song){return song.vehicle.name}),parsedData.sort(function(songA,songB){var aCount=songA.totalRank,bCount=songB.totalRank;return aCount<bCount?-1:aCount>bCount?1:0}),parsedData=parsedData.map(decorateSong),cachedYears[year]=parsedData,parsedData})["catch"](function(response){return[]})},getOne:function(id){return cachedFullSongs[id]?$q.when(cachedFullSongs[id]):$http.get(ENDPOINT+songEndpoint+"/"+id,{params:{include:"comments"}}).then(function(response){var parsedData=russDataParse.song(response.data);return parsedData=decorateSong(parsedData),cachedFullSongs[id]=parsedData,parsedData})["catch"](function(response){return[]})},create:function(song){var createObject={},props=["picture","video","spotify","genre","production","vehicle","phase"];return angular.forEach(props,function(prop){song.hasOwnProperty(prop)&&(createObject[prop]=song[prop])}),$http.post(ENDPOINT+songEndpoint,createObject).then(function(response){return response.data.id})},update:function(song){var updateObject={},props=["picture","video","spotify","genre","production"];return angular.forEach(props,function(prop){updateObject[prop]=song[prop]}),$http.post(ENDPOINT+songEndpoint+"/"+song.id,updateObject)},"delete":function(song){return $http["delete"](ENDPOINT+songEndpoint+"/"+song.id)},comment:function(song,content){if(auth.check("for å kommentere på sanger!")){var songId=song.id,newSongComment={content:content,user:{id:auth.user.id,name:auth.user.name,picture:auth.user.picture}};return song.comments.unshift(newSongComment),$http.post(ENDPOINT+songEndpoint+"/"+songId+"/comment",{content:content}).then(function(response){var newId=response.data.id;return newSongComment.id=newId,newSongComment})}},vote:function(song,value){if(auth.check("for å stemme på sanger!")){var voteValue,songId=song.id,currentSongVote=serviceObject.getVote(song);auth.user.songVotes.indexOf(currentSongVote);return currentSongVote?(1===currentSongVote.value?(song.votes.up-=1,song.score-=10):currentSongVote.value===-1&&(song.votes.down-=1,song.score+=1),currentSongVote.value===value?voteValue=0:(voteValue=value,1===value?(song.votes.up+=1,song.score+=10):value===-1&&(song.votes.down+=1,song.score-=1)),currentSongVote.value=voteValue):(voteValue=value,1===value?(song.votes.up+=1,song.score+=10):value===-1&&(song.votes.down+=1,song.score-=1),auth.user.songVotes.push({id:songId,value:voteValue})),song.votes.total=song.votes.up+song.votes.down,song.votes.total<0&&(song.votes.total=0),song.score<0&&(song.score=0),$http.post(ENDPOINT+songEndpoint+"/"+songId+"/vote",{value:voteValue})}},getVote:function(song){if(song)for(var currentVote,songId=song.id,songVotes=auth.user.songVotes,i=0,j=songVotes.length;i<j;i++)if(currentVote=songVotes[i],songId===currentVote.id)return currentVote},hasVoted:function(song,value){if(auth.user){var vote=serviceObject.getVote(song);if(vote)if(angular.isDefined(value)){if(vote.value===value)return!0}else if(1===vote.value||vote.value===-1)return!0}},share:function(song){var songUrl=russUrl.song(song.id,!0);FB.ui({method:"feed",name:"Stem på "+textOnEndFilter(song.vehicle.name.toLowerCase(),song.vehicle.year)+" til Årets Russelåt!",link:songUrl,picture:song.picture,caption:"russ.no",description:"Russ.no inviterer alle til å stemme på årets russelåter!\nDekknavn/teaserlåt kan vinne 10 000 kr, mens årets konseptlåt vil stikke av med 15 000 kr!\n Stem i dag!",message:""})},url:{isVimeo:function(url){return!(url.indexOf("vimeo.com")===-1||!serviceObject.url.getVimeoId(url))},getVimeoId:function(url){var match=url.match(VIMEO_REGEXP);return match&&match[3]?match[3]:null},getVimeoPicture:function(url){var videoId=serviceObject.url.getVimeoId(url),cachedVimeoResponse=cachedVimeoResponses[videoId];if(cachedVimeoResponse)return $q.when(cachedVimeoResponse);var jsonUrl=getVimeoJsonUrl(videoId);return $http.get(jsonUrl,{skipAuthorization:!0}).then(function(response){var video=response.data[0],picture=video.thumbnail_large;return cachedVimeoResponses[videoId]=picture,picture})},isYoutube:function(url){return!(url.indexOf("youtube.com")===-1&&url.indexOf("youtu.be")===-1&&url.indexOf("youtube-nocookie.com")===-1||!serviceObject.url.getYoutubeId(url))},getYoutubeId:function(url){var match=url.match(YOUTUBE_REGEXP);return match&&match[1]?match[1]:null},getYoutubePicture:function(url){var videoId=serviceObject.url.getYoutubeId(url),pictureUrl=getYoutubeImageUrl(videoId);return $q.when(pictureUrl)},getVideoEmbed:function(url,autoplay){if(url){autoplay!==!1&&(autoplay=!0);var videoId;return serviceObject.url.isYoutube(url)?(videoId=serviceObject.url.getYoutubeId(url),"https://www.youtube.com/embed/"+videoId+"?feature=oembed&wmode=opaque&autoplay="+(autoplay?1:0)+"&showsearch=0&fs=1&autohide=1&showinfo=0&rel=0&theme=light&color=white&amp;ap=%2526fmt"):serviceObject.url.isVimeo(url)?(videoId=serviceObject.url.getVimeoId(url),"https://player.vimeo.com/video/"+videoId+"?&autoplay="+(autoplay?"true":"false")):void 0}},isSpotify:function(url){var spotifyMatch=url.match(SPOTIFY_REGEXP);return spotifyMatch&&spotifyMatch[1]}}};return serviceObject}]);
angular.module("russ").filter("textOnEnd",function(){return function(input,text){if(!input)return input;if(!text)throw new Error("text is required");var hasYear=input.indexOf(text);return hasYear!==-1?input:input+" "+text}});
angular.module("russ").directive("whenInView",["$timeout",function($timeout){return{restrict:"A",scope:{callback:"&whenInView",minTime:"@"},link:function(scope,elem,attrs){if(!angular.isFunction(scope.callback))throw new Error("No callback supplied to whenInView");var minTime;scope.minTime&&(minTime=parseInt(scope.minTime,10));if(angular.isNumber(minTime)){if(isNaN(minTime))throw new Error("minTime provided is not a number")}else minTime=80;var lastCallDate,performCallback=function(){var nowDate=new Date;lastCallDate&&nowDate-lastCallDate<minTime||isElementInViewport(elem[0])&&(scope.$apply(function(){scope.callback()}),lastCallDate=nowDate)};angular.element(window).on("optimizedResize",performCallback),angular.element(window).on("optimizedScroll",performCallback)}}}]);
angular.module("russ").directive("classifiedPage",["vehicleService","classifiedService","currentVehicle",function(vehicleService,classifiedService,currentVehicle){return{restrict:"E",templateUrl:"js/angular-app/classified/classified-page.directive.html",link:function(scope,elem,attrs){scope.vehicleService=vehicleService,vehicleService.getCurrent().then(function(vehicle){classifiedService.get(vehicle),scope.vehicle=vehicle})}}}]);
angular.module("russ").factory("classifiedService",["$http","$q","$filter","ENDPOINT","currentVehicle","Upload","auth","russDataParse","songService","russUrl",function($http,$q,$filter,ENDPOINT,currentVehicle,Upload,auth,russDataParse,songService,russUrl){var classifiedsEndpoint="classifieds",serviceObject={get:function(vehicle){return $http.get(ENDPOINT+classifiedsEndpoint+"/"+vehicle.id).then(function(response){if(204==response.status)return null;var parsedData=russDataParse.classified(response.data);return parsedData.tacho=String(parsedData.tacho),0==parsedData.seats_regular&&(parsedData.seats_regular=""),0==parsedData.seats_groups&&(parsedData.seats_groups=""),0==parsedData.seats_lateral&&(parsedData.seats_lateral=""),vehicle.classified=parsedData,parsedData})["catch"](function(response){return null})},getActive:function(){return $http.get(ENDPOINT+classifiedsEndpoint).then(function(response){var parsedData=russDataParse.classifieds(response.data);return parsedData})["catch"](function(response){return[]})},create:function(vehicle){return $http.post(ENDPOINT+classifiedsEndpoint,{vehicle_id:vehicle.id}).then(function(response){return response.data})},update:function(id,data){return $http.post(ENDPOINT+classifiedsEndpoint+"/"+id,data)},uploadGalleryImage:function(vehicle,file){return Upload.upload({url:ENDPOINT+classifiedsEndpoint+"/"+vehicle.id+"/gallery",data:{picture:file}}).then(function(response){var image=russDataParse.galleryUpload(response.data);return image})},deleteGalleryImage:function(vehicle,image){return $http["delete"](ENDPOINT+classifiedsEndpoint+"/"+vehicle.id+"/gallery/"+image.id)}};return serviceObject}]);
"use strict";angular.module("feed").component("feed",{templateUrl:"js/angular-app/feed/feed.template.html",bindings:{userId:"@?",userName:"@?","public":"@?"},controller:["Feed","russDataParse",function(Feed,russDataParse){var self=this;self.FeedFactory=Feed,self.show_form=!1,self.$onInit=function(){self.show_form="1"!=self["public"],self.FeedFactory.load_items(self.userId)},self.loadMoreCards=function(){self.FeedFactory.load_offset(self.userId)}}]});
"use strict";var feedEndpoint="feed",vehiclesEndpoint="vehicles";angular.module("feed").factory("Feed",["$resource","ENDPOINT","russDataParse","flashService",function($resource,ENDPOINT,russDataParse,flashService){var feed={};return feed.items=[],feed.busy=!1,feed.load_items=function(user_id){feed.busy||(feed.busy=!0,"undefined"==typeof user_id?feed.get_items().query().$promise.then(function(result){var parsed=russDataParse.parse(result);parsed&&parsed.length&&(feed.items=parsed),feed.refresh().query().$promise.then(function(result){var new_items=russDataParse.parse(result);new_items&&new_items.length&&feed.insert_items(new_items),feed.busy=!1})}):feed.get_public_items(user_id).query().$promise.then(function(result){var parsed=russDataParse.parse(result);parsed&&parsed.length&&(feed.items=parsed),feed.refresh_public_feed(user_id).query().$promise.then(function(result){var new_items=russDataParse.parse(result);new_items&&new_items.length&&feed.insert_items(new_items),feed.busy=!1})}))},feed.insert_item=function(item){feed.items.unshift(item)},feed.insert_items=function(items){for(;items.length;)feed.items.unshift(items.pop())},feed.add_items=function(items){for(;items.length;)feed.items.push(items.shift())},feed.get_item=function(item_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id,{},{query:{method:"GET"}})},feed.delete_item=function(item_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id,{},{"delete":{method:"DELETE"}})},feed.get_items=function(){return $resource(ENDPOINT+feedEndpoint,{},{query:{method:"GET"}})},feed.get_public_items=function(user_id){return $resource(ENDPOINT+feedEndpoint+"/public/"+user_id,{},{query:{method:"GET"}})},feed.refresh=function(){return $resource(ENDPOINT+feedEndpoint+"/refresh",{},{query:{method:"GET"}})},feed.refresh_public_feed=function(user_id){return $resource(ENDPOINT+feedEndpoint+"/refresh/"+user_id,{},{query:{method:"GET"}})},feed.load_offset=function(user_id){if(!feed.busy){feed.busy=!0;var last_item=feed.items[feed.items.length-1];"undefined"==typeof user_id?feed.load_private_offset(last_item.id).query().$promise.then(function(result){var new_items=russDataParse.parse(result);new_items&&new_items.length&&feed.add_items(new_items),feed.busy=!1}):feed.load_public_offset(last_item.id,user_id).query().$promise.then(function(result){var new_items=russDataParse.parse(result);new_items&&new_items.length&&feed.add_items(new_items),feed.busy=!1})}},feed.load_private_offset=function(last_id){return $resource(ENDPOINT+feedEndpoint+"/offset/"+last_id,{},{query:{method:"GET"}})},feed.load_public_offset=function(last_id,user_id){return $resource(ENDPOINT+feedEndpoint+"/offset/"+last_id+"/"+user_id,{},{query:{method:"GET"}})},feed.post=function(){return $resource(ENDPOINT+feedEndpoint,{},{save:{method:"POST"}})},feed.like=function(item_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id+"/like",{},{save:{method:"POST"}})},feed.get_comments=function(item_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id+"/comment",{},{query:{method:"GET"}})},feed.post_comment=function(item_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id+"/comment",{},{save:{method:"POST"}})},feed.edit_comment=function(item_id,comment_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id+"/comment/"+comment_id,{},{save:{method:"POST"}})},feed.delete_comment=function(item_id,comment_id){return $resource(ENDPOINT+feedEndpoint+"/"+item_id+"/comment/"+comment_id,{},{"delete":{method:"DELETE"}})},feed.upload_image=function(file){return Upload.upload({url:ENDPOINT+feedEndpoint+"/"+vehicle.id+"/gallery",data:{picture:file}}).then(function(response){var image=russDataParse.galleryUpload(response.data);return image})},feed.save_follow=function(vehicle_id){return $resource(ENDPOINT+vehiclesEndpoint+"/"+vehicle_id+"/follow",{},{save:{method:"POST"}})},feed.follow_vehicle=function(vehicle_id,new_value){feed.save_follow(vehicle_id).save({},{value:new_value}).$promise.then(function(result){feed.items.forEach(function(feed_item){1!=feed_item.about_type&&6!=feed_item.about_type||feed_item.about_id!=vehicle_id||(feed_item.user_followed=!feed_item.user_followed,feed_item.user_followed?feed_item.num_follows+=1:feed_item.num_follows-=1)})})},feed}]);
angular.module("feed").filter("html",function($sce){return $sce.trustAsHtml});
angular.module("russ").directive("classifiedsOverviewContent",["$location","$filter",function($location,$filter){$filter("vehicleHasPicture");return{restrict:"E",templateUrl:"js/angular-app/overview/classifieds-overview-content.directive.html",scope:{classifieds:"=",filterCount:"<",meta:"<",filters:"="},link:function(scope,elem,attrs){scope.cardsPerPage=20,scope.currentCardLimit=scope.cardsPerPage;var popularCardDefault=6;scope.currentPopularCardLimit=popularCardDefault,scope.currentPage=0,scope.getTotalPages=function(){var pages=scope.classifieds.length/scope.cardsPerPage;return Math.ceil(pages)},scope.getRepeatStartIndex=function(){return scope.currentPage*scope.cardsPerPage},scope.showMoreCards=function(){scope.currentCardLimit+=scope.cardsPerPage},scope.showMorePopularCards=function(){scope.currentPopularCardLimit+=scope.cardsPerPage},scope.seeAllPopular=function(){scope.filters.popular=function(elem){return elem}};var hasBeenInit;scope.$watch("classifieds",function(newVal,oldVal){if(scope.currentPage=0,scope.currentCardLimit=scope.cardsPerPage,scope.currentPopularCardLimit=popularCardDefault,!hasBeenInit&&newVal!==oldVal&&!oldVal.length){hasBeenInit=!0;var searchPage=parseInt($location.search().page,10);isNaN(searchPage)||(scope.currentPage=searchPage)}});var $elem=jQuery(elem[0]);scope.changePage=function(incrementor){var newPage=scope.currentPage+incrementor;newPage<0||newPage>=scope.getTotalPages()||(scope.currentPage=newPage,jQuery("html, body").animate({scrollTop:$elem.offset().top},500))}}}}]);
angular.module("russ").directive("classifiedsOverview",["$timeout","classifiedService",function($timeout,classifiedService){return{restrict:"E",scope:{meta:"<"},templateUrl:"js/angular-app/overview/classifieds-overview.directive.html",link:function(scope,elem,attrs){scope.overviewType="classified",scope.overview={filters:{},meta:{}},classifiedService.getActive().then(function(data){scope.overview.data=data}),scope.filterData=function(excludeFilterKey){var data;data=scope.overview.data?scope.overview.data:[];var filterFn,filters=scope.overview.filters,filterFunctions=[];for(var filterKey in filters)filterKey!==excludeFilterKey&&angular.isFunction(filterFn=filters[filterKey])&&filterFunctions.push(filterFn);return data=data.filter(function(classified){for(var currentFilterFn,i=0;i<filterFunctions.length;i++)if(currentFilterFn=filterFunctions[i],!currentFilterFn(classified))return;return!0}),excludeFilterKey||(scope.overview.filterCount=filterFunctions.length),data};var broadcastDataUpdate=function(){scope.$broadcast("overviewDataUpdate")};scope.resetFilters=function(){scope.$broadcast("resetFilters")},scope.$watch("overview.data",function(newVal){scope.overview.filteredData=scope.filterData(),broadcastDataUpdate()}),scope.$watchCollection("overview.filters",function(newVal){var delay=window.innerWidth<800?60:15;$timeout(function(){scope.overview.filteredData=scope.filterData(),broadcastDataUpdate()},delay)})},controller:function($scope){}}}]);
angular.module("russ").directive("songOverviewContent",["$location",function($location){return{restrict:"E",templateUrl:"js/angular-app/overview/song-overview-content.directive.html",scope:{songs:"=",filterCount:"<",meta:"<",filters:"="},link:function(scope,elem,attrs){scope.cardsPerPage=20,scope.currentCardLimit=scope.cardsPerPage;var popularCardDefault=6;scope.currentPopularCardLimit=popularCardDefault,scope.currentPage=0,scope.getTotalPages=function(){var pages=scope.songs.length/scope.cardsPerPage;return Math.ceil(pages)},scope.getRepeatStartIndex=function(){return scope.currentPage*scope.cardsPerPage},scope.cardsOnCurrentPage=function(){var cardsLeft=scope.songs.length-scope.cardsPerPage*scope.currentPage;return cardsLeft>scope.cardsPerPage?scope.cardsPerPage:cardsLeft},scope.showMoreCards=function(){scope.currentCardLimit+=scope.cardsPerPage},scope.showMorePopularCards=function(){scope.currentPopularCardLimit+=scope.cardsPerPage},scope.seeAllPopular=function(){scope.filters.popular=function(elem){return elem}};var hasBeenInit;scope.$watch("songs",function(newVal,oldVal){if(scope.currentPage=0,scope.currentCardLimit=scope.cardsPerPage,scope.currentPopularCardLimit=popularCardDefault,!hasBeenInit&&newVal!==oldVal&&!oldVal.length){hasBeenInit=!0;var searchPage=parseInt($location.search().page,10);isNaN(searchPage)||(scope.currentPage=searchPage)}scope.conceptSongs=newVal.filter(function(song){return"concept"===song.type.toLowerCase()}).map(function(song,index){var songCopy=angular.copy(song);return songCopy.totalRank=index+1,songCopy})});var $elem=jQuery(elem[0]);scope.changePage=function(incrementor){var newPage=scope.currentPage+incrementor;newPage<0||newPage>=scope.getTotalPages()||(scope.currentPage=newPage,jQuery("html, body").animate({scrollTop:$elem.offset().top},500))};var body=angular.element(document.body);scope.toggleOverlay=function(song){if(song){var songId;angular.isObject(song)?songId=song.id:angular.isString(song)&&(songId=song),scope.showOverlay=!0,scope.overlaySong=song,body.css("overflow","hidden"),$location.search("song",songId).replace()}else scope.showOverlay=!1,scope.overlaySong=null,body.css("overflow","visible"),$location.search("song",""),$location.replace(!0)};var searchSong=$location.search().song;searchSong&&searchSong.length&&scope.toggleOverlay(searchSong)}}}]);
angular.module("russ").directive("songOverview",["$timeout","auth","songYears",function($timeout,auth,songYears){return{restrict:"E",templateUrl:"js/angular-app/overview/song-overview.directive.html",link:function(scope,elem,attrs){scope.songYears=songYears,scope.overview={filters:{},meta:{}};var setCurrentYear=function(year){angular.forEach(songYears,function(songYear){songYear.value===year&&songYear.count&&(scope.overview.meta.currentYear=songYear)}),scope.overview.meta.currentYear||angular.forEach(songYears,function(songYear){songYear.value===currentYear&&(scope.overview.meta.currentYear=songYear)}),scope.overview.meta.currentYear||(scope.overview.meta.currentYear=songYears[0])},now=new Date,currentYear=now.getFullYear(),currentMonth=now.getMonth()+1;currentMonth>7&&(currentYear+=1),auth.getUserPromise?auth.getUserPromise.then(function(user){setCurrentYear(user.year?user.year:currentYear)})["catch"](function(){setCurrentYear(currentYear)}):setCurrentYear(currentYear),scope.filterData=function(excludeFilterKey){var data;data=scope.overview.data?scope.overview.data:[];var filterFn,filters=scope.overview.filters,filterFunctions=[];for(var filterKey in filters)filterKey!==excludeFilterKey&&angular.isFunction(filterFn=filters[filterKey])&&filterFunctions.push(filterFn);return data=data.filter(function(song){for(var currentFilterFn,i=0;i<filterFunctions.length;i++)if(currentFilterFn=filterFunctions[i],!currentFilterFn(song))return;return!0}),excludeFilterKey||(scope.overview.filterCount=filterFunctions.length),data};var broadcastDataUpdate=function(){scope.$broadcast("overviewDataUpdate")};scope.resetFilters=function(){scope.$broadcast("resetFilters")},scope.$watch("overview.data",function(newVal){scope.overview.filteredData=scope.filterData(),broadcastDataUpdate()}),scope.$watchCollection("overview.filters",function(newVal){$timeout(function(){scope.overview.filteredData=scope.filterData(),broadcastDataUpdate()},30)})}}}]);
angular.module("russ").filter("vehicleHasPicture",["vehicleService",function(vehicleService){return function(input){var result=input.filter(vehicleService.getPicture);return result}}]);
angular.module("russ").directive("vehicleOverviewContent",["$location","$filter",function($location,$filter){var vehicleHasPictureFilter=$filter("vehicleHasPicture");return{restrict:"E",templateUrl:"js/angular-app/overview/vehicle-overview-content.directive.html",scope:{vehicles:"=",filterCount:"<",meta:"<",filters:"="},link:function(scope,elem,attrs){scope.cardsPerPage=20,scope.currentCardLimit=scope.cardsPerPage;var popularCardDefault=6;scope.currentPopularCardLimit=popularCardDefault,scope.currentPage=0,scope.getTotalPages=function(){var pages=scope.vehicles.length/scope.cardsPerPage;return Math.ceil(pages)},scope.getRepeatStartIndex=function(){return scope.currentPage*scope.cardsPerPage},scope.showMoreCards=function(){scope.currentCardLimit+=scope.cardsPerPage},scope.showMorePopularCards=function(){scope.currentPopularCardLimit+=scope.cardsPerPage},scope.seeAllPopular=function(){scope.filters.popular=function(elem){return elem}};var hasBeenInit;scope.$watch("vehicles",function(newVal,oldVal){if(scope.currentPage=0,scope.currentCardLimit=scope.cardsPerPage,scope.currentPopularCardLimit=popularCardDefault,!hasBeenInit&&newVal!==oldVal&&!oldVal.length){hasBeenInit=!0;var searchPage=parseInt($location.search().page,10);isNaN(searchPage)||(scope.currentPage=searchPage)}scope.vehiclesWithPicture=vehicleHasPictureFilter(newVal)});var $elem=jQuery(elem[0]);scope.changePage=function(incrementor){var newPage=scope.currentPage+incrementor;newPage<0||newPage>=scope.getTotalPages()||(scope.currentPage=newPage,jQuery("html, body").animate({scrollTop:$elem.offset().top},500))}}}}]);
angular.module("russ").directive("vehicleOverview",["$timeout","auth","vehicleYears",function($timeout,auth,vehicleYears){return{restrict:"E",templateUrl:"js/angular-app/overview/vehicle-overview.directive.html",link:function(scope,elem,attrs){scope.overview={filters:{},meta:{}};var now=new Date,currentYear=now.getFullYear(),currentMonth=now.getMonth()+1;currentMonth>7&&(currentYear+=1);var setCurrentYear=function(year){angular.forEach(vehicleYears,function(vehicleYear){vehicleYear.value===year&&vehicleYear.count&&(scope.overview.meta.currentYear=vehicleYear)}),scope.overview.meta.currentYear||angular.forEach(vehicleYears,function(vehicleYear){vehicleYear.value===currentYear&&(scope.overview.meta.currentYear=vehicleYear)}),scope.overview.meta.currentYear||(scope.overview.meta.currentYear=vehicleYears[0])};auth.getUserPromise?auth.getUserPromise.then(function(user){setCurrentYear(user.year?user.year:currentYear)})["catch"](function(){setCurrentYear(currentYear)}):setCurrentYear(currentYear),scope.filterData=function(excludeFilterKey){var data;data=scope.overview.data?scope.overview.data:[];var filterFn,filters=scope.overview.filters,filterFunctions=[];for(var filterKey in filters)filterKey!==excludeFilterKey&&angular.isFunction(filterFn=filters[filterKey])&&filterFunctions.push(filterFn);return data=data.filter(function(vehicle){for(var currentFilterFn,i=0;i<filterFunctions.length;i++)if(currentFilterFn=filterFunctions[i],!currentFilterFn(vehicle))return;return!0}),excludeFilterKey||(scope.overview.filterCount=filterFunctions.length),data};var broadcastDataUpdate=function(){scope.$broadcast("overviewDataUpdate")};scope.resetFilters=function(){scope.$broadcast("resetFilters")},scope.$watch("overview.data",function(newVal){scope.overview.filteredData=scope.filterData(),broadcastDataUpdate()}),scope.$watchCollection("overview.filters",function(newVal){var delay=window.innerWidth<800?60:15;$timeout(function(){scope.overview.filteredData=scope.filterData(),broadcastDataUpdate()},delay)})}}}]);
angular.module("russ").directive("vehiclePage",["vehicleService",function(vehicleService){return{restrict:"E",templateUrl:"js/angular-app/vehicle/vehicle-page.directive.html",link:function(scope,elem,attrs){scope.vehicleService=vehicleService,vehicleService.getCurrent().then(function(vehicle){scope.vehicle=vehicle,addSongs()});var addSongs=function(){var phases=scope.vehicle.phases,songs=[];phases.concept&&phases.concept.songs&&phases.concept.songs.length&&(songs=songs.concat(phases.concept.songs)),phases.cover&&phases.cover.songs&&phases.cover.songs.length&&(songs=songs.concat(phases.cover.songs)),phases.teaser&&phases.teaser.songs&&phases.teaser.songs.length&&(songs=songs.concat(phases.teaser.songs)),songs=songs.filter(function(elem){return elem}),songs.length&&(scope.songs=songs)}}}}]);
angular.module("russ").factory("vehicleService",["$http","$q","$filter","ENDPOINT","currentVehicle","Upload","auth","russDataParse","songService","russUrl","classifiedService",function($http,$q,$filter,ENDPOINT,currentVehicle,Upload,auth,russDataParse,songService,russUrl,classifiedService){var textOnEndFilter=$filter("textOnEnd"),vehiclesEndpoint="vehicles",years={},properVehicle=function(vehicle){if(vehicle.phases.length&&!(vehicle.members&&!vehicle.members.length||vehicle.hasOwnProperty("memberCount")&&vehicle.membersCount<1))return!0},decorateVehicle=function(vehicle){vehicle.id=parseInt(vehicle.id,10),auth.user&&auth.user.vehicle===vehicle.id&&(vehicle.isMember=!0),angular.isNumber(vehicle.totalRank)&&(vehicle.totalRank+=1),angular.isNumber(vehicle.trendingRank)&&(vehicle.trendingRank+=1),vehicle.type=vehicle.type.toLowerCase();var phases={};angular.forEach(vehicle.phases,function(phase){phases[phase.type]=phase}),vehicle.phases=phases,vehicle.meetups=vehicle.meetups.map(function(meetupId){return parseInt(meetupId,10)});var phaseTypes=["teaser","cover","concept"],processPhases=function(phases){for(var hasSong,phaseType,currentPhase,i=0;i<phaseTypes.length;i++)phaseType=phaseTypes[i],currentPhase=phases[phaseType],currentPhase&&(angular.isString(currentPhase.name)&&currentPhase.name||(currentPhase.name=""),angular.isArray(currentPhase.songs)&&currentPhase.songs.length?(currentPhase.songs=currentPhase.songs.map(songService.decorateSong),hasSong=!0):angular.isNumber(currentPhase.songCount)&&currentPhase.songCount>0&&(hasSong=!0));hasSong?vehicle.hasSong=!0:vehicle.hasSong=!1};processPhases(vehicle.phases)},serviceObject={get:function(year){return years[year]?$q.when(years[year]):$http.get(ENDPOINT+vehiclesEndpoint,{params:{year:year}}).then(function(response){var parsedData=russDataParse.vehicles(response.data);return parsedData=parsedData.filter(properVehicle),angular.forEach(parsedData,decorateVehicle),years[year]=parsedData,parsedData})["catch"](function(response){return[]})},getCurrent:function(){return $http.get(ENDPOINT+vehiclesEndpoint+"/"+currentVehicle).then(function(response){var parsedData=russDataParse.vehicle(response.data);return decorateVehicle(parsedData),parsedData})},getVehicle:function(id){return $http.get(ENDPOINT+vehiclesEndpoint+"/"+id).then(function(response){var parsedData=russDataParse.vehicle(response.data);return decorateVehicle(parsedData),parsedData})},follow:function(vehicle){if(!vehicle)throw new Error("No vehicle given to like function");if(auth.check("for å like grupper")){var vehicleId=vehicle.id;if(vehicleId){var followValue,hasFollowed=vehicle.is_following;return hasFollowed?(followValue=!1,vehicle.followers-=1):(followValue=!0,vehicle.followers+=1),vehicle.followers<0&&(vehicle.followers=0),vehicle.is_following=followValue,$http.post(ENDPOINT+vehiclesEndpoint+"/"+vehicle.id+"/follow",{value:followValue})}}},create:function(type){if(!type)throw new Error("No type provided to vehicle create");return auth.check("for å opprette en gruppe!")?$http.post(ENDPOINT+vehiclesEndpoint,{type:type}).then(function(response){return response.data}):$q.reject("Ikke logget inn eller ufullstendig profil")},"delete":function(vehicle){return $http["delete"](ENDPOINT+vehiclesEndpoint+"/"+vehicle.id).then(function(response){return $http.get(ENDPOINT+"capi/empty_user_cache").then(function(){return response.data})})},update:function(id,data){return $http.post(ENDPOINT+vehiclesEndpoint+"/"+id,data)},updateInvitedPhoneNumbers:function(id,data){return $http.post(ENDPOINT+vehiclesEndpoint+"/"+id+"/recruit",data)},updatePhase:function(id,data){var updatePromise;return updatePromise=data.picture?Upload.upload({url:ENDPOINT+vehiclesEndpoint+"/"+id+"/phases",data:data}):$http.post(ENDPOINT+vehiclesEndpoint+"/"+id+"/phases",data)},removeInstagram:function(vehicle){return $http.get(ENDPOINT+vehiclesEndpoint+"/"+vehicle.id+"/instagram/deauthorize")},uploadGalleryImage:function(vehicle,file){return Upload.upload({url:ENDPOINT+vehiclesEndpoint+"/"+vehicle.id+"/gallery",data:{picture:file}}).then(function(response){var image=russDataParse.galleryUpload(response.data);return image})},deleteGalleryImage:function(vehicle,image){return $http["delete"](ENDPOINT+vehiclesEndpoint+"/"+vehicle.id+"/gallery/"+image.id)},sendInquiry:function(id,message){if(auth.check("for å sende kjøpsforespørsler"))return $http.post(ENDPOINT+vehiclesEndpoint+"/"+id+"/buyrequest",{message:message})},applyForMembership:function(vehicle){if(auth.check("for å søke om medlemsskap"))return auth.user.appliedVehicles.push(vehicle.id),$http.post(ENDPOINT+vehiclesEndpoint+"/"+vehicle.id+"/apply")},hasApplied:function(vehicle){if(auth.user){var vehicleId=parseInt(vehicle.id,10),appliedToPageIndex=auth.user.appliedVehicles.indexOf(vehicleId);return appliedToPageIndex!==-1}},getName:function(vehicle){var phases=vehicle.phases;return phases.concept&&phases.concept.name&&(!phases.concept.hasOwnProperty("isPublished")||phases.concept.isPublished)?phases.concept.name:phases.cover&&phases.cover.name&&(!phases.cover.hasOwnProperty("isPublished")||phases.cover.isPublished)?phases.cover.name:phases.teaser&&phases.teaser.name&&(!phases.teaser.hasOwnProperty("isPublished")||phases.teaser.isPublished)?phases.teaser.name:void 0},getPicture:function(vehicle){var phases=vehicle.phases;return phases.concept&&phases.concept.picture&&(!phases.concept.hasOwnProperty("isPublished")||phases.concept.isPublished)?phases.concept.picture:phases.cover&&phases.cover.picture&&(!phases.cover.hasOwnProperty("isPublished")||phases.cover.isPublished)?phases.cover.picture:phases.teaser&&phases.teaser.picture&&(!phases.teaser.hasOwnProperty("isPublished")||phases.teaser.isPublished)?phases.teaser.picture:void 0},getSmallImage:function(vehicle){var phases=vehicle.phases;return phases.concept&&phases.concept.picture&&(!phases.concept.hasOwnProperty("isPublished")||phases.concept.isPublished)?phases.concept.images.small:phases.cover&&phases.cover.picture&&(!phases.cover.hasOwnProperty("isPublished")||phases.cover.isPublished)?phases.cover.images.small:phases.teaser&&phases.teaser.picture&&(!phases.teaser.hasOwnProperty("isPublished")||phases.teaser.isPublished)?phases.teaser.images.small:void 0},getAbout:function(vehicle){var phases=vehicle.phases;return phases.concept&&phases.concept.about&&(!phases.concept.hasOwnProperty("isPublished")||phases.concept.isPublished)?phases.concept.about:phases.cover&&phases.cover.about&&(!phases.cover.hasOwnProperty("isPublished")||phases.cover.isPublished)?phases.cover.about:phases.teaser&&phases.teaser.about&&(!phases.teaser.hasOwnProperty("isPublished")||phases.teaser.isPublished)?phases.teaser.about:void 0},share:function(vehicle){var vehicleUrl=russUrl.vehicle(vehicle.id,!0),vehicleName=serviceObject.getName(vehicle);vehicleName||(vehicleName=""),vehicleName=textOnEndFilter(vehicleName.toLowerCase(),vehicle.year);var vehiclePicture=serviceObject.getPicture(vehicle),vehicleAbout=vehicle.description||serviceObject.getAbout(vehicle),dialogName=vehicleName||"Bussprofil";dialogName+=" @ russ.no!";var dialogDescription=vehicleAbout||"Russ.no inviterer alle til å legge inn sin buss/van, og få muligheten til å vinne premier fra russ.no!";FB.ui({method:"feed",name:dialogName,link:vehicleUrl,picture:vehiclePicture,caption:"russ.no",description:dialogDescription,message:""})},validateNameUniqueness:function(vehicle,name){return $http.post(ENDPOINT+vehiclesEndpoint+"/"+vehicle.id+"/phases/available",{name:name})}};return serviceObject}]);
angular.module("russ").directive("songVideoValidation",["songService",function(songService){return{require:"ngModel",restrict:"A",link:function(scope,elem,attrs,ngModel){ngModel.$validators.songVideo=function(modelValue,viewValue){return!!ngModel.$isEmpty(modelValue)||!(!songService.url.isVimeo(viewValue)&&!songService.url.isYoutube(viewValue))}}}}]);
angular.module("russ").directive("spotifyValidation",["songService",function(songService){return{require:"ngModel",restrict:"A",link:function(scope,elem,attrs,ngModel){ngModel.$validators.spotify=function(modelValue,viewValue){return!!ngModel.$isEmpty(modelValue)||!!songService.url.isSpotify(viewValue)}}}}]);
angular.module("russ").directive("uniqueVehicleNameValidation",["$q","vehicleService",function($q,vehicleService){return{require:"ngModel",restrict:"A",scope:{vehicle:"<"},link:function(scope,elem,attrs,ngModel){ngModel.$asyncValidators.uniqueVehicleName=function(modelValue,viewValue){var value=modelValue||viewValue,validationPromise=vehicleService.validateNameUniqueness(scope.vehicle,value);return validationPromise.then(function(response){return!0},function(err){return $q.reject("Navnet eksisterer")}),validationPromise}}}}]);
angular.module("russ").directive("vehicleCreate",[function(){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/vehicle-create.directive.html",link:function(scope,elem,attrs){}}}]);
angular.module("russ").directive("vehicleEdit",["$q","auth","russUrl","flashService","vehicleService","currentVehicle","classifiedService",function($q,auth,russUrl,flashService,vehicleService,currentVehicle,classifiedService){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/vehicle-edit.directive.html",link:function(scope,elem,attrs){return currentVehicle?auth.getUserPromise?void $q.all([vehicleService.getCurrent(),auth.getUserPromise]).then(function(resolvedValues){var vehicle=resolvedValues[0];scope.vehicle=vehicle})["catch"](function(){flashService.showMessage("Kunne ikke finne gruppe med ID "+currentVehicle,999999999,!0)}):void flashService.showMessage("Kunne ikke finne innlogget bruker",999999999,!0):void flashService.showMessage("Ingen ID er oppgitt",999999999,!0)}}}]);
angular.module("russ").directive("classifiedCard",["classifiedService",function(classifiedService){return{restrict:"E",templateUrl:"js/angular-app/components/classified-card/classified-card.directive.html",scope:{classified:"="},link:function(scope,elem,attrs){var classified=scope.classified;scope.classifiedService=classifiedService,scope.classifiedPicture=classified.gallery[0].full,scope.sendQuestion=function(){return scope.questionForm.$invalid?void scope.questionForm.$setSubmitted():(scope.sendingQuestion=!0,void classifiedService.sendInquiry(scope.classified.id,scope.question.text).then(function(){scope.classified.showInquiry=!1})["catch"](function(){scope.sendingQuestionError="En feil skjedde under innsendelse av spørsmål. Vennligst prøv på nytt."})["finally"](function(){scope.sendingQuestion=!1}))}}}}]);
"use strict";var filterTagEndpoint="filtertags";angular.module("filter_tags",["ngAnimate","ngAria","ngMaterial","russ"]),angular.module("filter_tags").component("filterTags",{templateUrl:"js/angular-app/components/filter-tags/filter-tags.template.html",controller:["ENDPOINT","russDataParse","$window","$http",function(ENDPOINT,russDataParse,$window,$http){function querySearch(query){var results=query?self.filterTags.filter(createFilterFor(query)):[];return results}function createFilterFor(query){var lowercaseQuery=angular.lowercase(query);return function(filterTag){return 0===filterTag._lowername.indexOf(lowercaseQuery)||0===filterTag._lowertype.indexOf(lowercaseQuery)}}function loadFilterTags(){$http.get(ENDPOINT+filterTagEndpoint).then(function(response){var filterTags=russDataParse.parse(response.data);self.filterTags=filterTags.map(function(filterTag){return filterTag._lowername=filterTag.name.toLowerCase(),filterTag._lowertype=filterTag.type.toLowerCase(),filterTag})})["catch"](function(response){return[]})}var self=this;self.selectedItem=null,self.searchText=null,self.querySearch=querySearch,self.filterTags=[],self.selectedFilterTags=[],self.requireMatch=!0,$window.feedArticleFilterTags=self.selectedFilterTags,loadFilterTags()}]});
"use strict";angular.module("feed").component("search",{templateUrl:"js/angular-app/components/search/search.template.html",controller:["$window","$location",function($window,$location){var self=this;self.search=function(event,query){if(query&&13==event.keyCode){var searchpath=$location.path()+"/search?q="+query;$window.location.href=searchpath}}}]});
angular.module("russ").directive("songCard",["songService",function(songService){return{restrict:"A",templateUrl:"js/angular-app/components/song-card/song-card.directive.html",scope:{song:"<"},link:function(scope,elem,attrs){scope.songService=songService}}}]);
angular.module("russ").directive("songOverlay",["$timeout","songService","commentService",function($timeout,songService,commentService){return{restrict:"E",templateUrl:"js/angular-app/components/song-overlay/song-overlay.directive.html",scope:{song:"<",vehiclePage:"@"},link:function(scope,elem,attrs){scope.songService=songService,scope.commentService=commentService;var songId;if(angular.isObject(scope.song))songId=scope.song.id;else{if(!angular.isString(scope.song))throw new Error("No song or song id given to song overlay");songId=scope.song}songService.getOne(songId).then(function(fullSong){return scope.song=fullSong,songService.get(fullSong.vehicle.year)}).then(function(yearWithSongs){var filteredSongs;filteredSongs="concept"===scope.song.type?yearWithSongs.filter(function(song){return"concept"===song.type}):yearWithSongs.filter(function(song){return"concept"!==song.type});for(var currentSong,i=0;i<filteredSongs.length;i++)if(currentSong=filteredSongs[i],scope.song.id===currentSong.id){scope.songRank=i+1;break}}),scope.postComment=function(commentForm){if(scope.commentForm.$invalid)return void $scope.commentForm.$setSubmitted();commentForm.$setPristine();var commentContent=scope.newComment;scope.newComment="",songService.comment(scope.song,commentContent)},scope.deleteComment=function(comment){commentService["delete"](comment);var comments=scope.song.comments,commentIndex=comments.indexOf(comment);scope.song.comments.splice(commentIndex,1)}}}}]);
angular.module("russ").directive("vehicleCard",["vehicleService",function(vehicleService){return{restrict:"E",templateUrl:"js/angular-app/components/vehicle-card/vehicle-card.directive.html",scope:{vehicle:"="},link:function(scope,elem,attrs){var vehicle=scope.vehicle,phases=vehicle.phases;phases.concept?(phases.concept.isNewest=!0,scope.vehiclePicture=phases.concept.picture):phases.cover?(phases.cover.isNewest=!0,scope.vehiclePicture=phases.cover.picture):phases.teaser&&(phases.teaser.isNewest=!0,scope.vehiclePicture=phases.teaser.picture),scope.vehicleService=vehicleService,scope.sendQuestion=function(){return scope.questionForm.$invalid?void scope.questionForm.$setSubmitted():(scope.sendingQuestion=!0,void vehicleService.sendInquiry(scope.vehicle.id,scope.question.text).then(function(){scope.vehicle.showInquiry=!1})["catch"](function(){scope.sendingQuestionError="En feil skjedde under innsendelse av spørsmål. Vennligst prøv på nytt."})["finally"](function(){scope.sendingQuestion=!1}))}}}}]);
angular.module("russ").directive("vehicleSongs",["$location",function($location){return{restrict:"E",templateUrl:"js/angular-app/components/vehicle-songs/vehicle-songs.directive.html",scope:{songs:"<"},link:function(scope,elem,attrs){var body=angular.element(document.body);scope.toggleOverlay=function(song){if(song){var songId;angular.isObject(song)?songId=song.id:angular.isString(song)&&(songId=song),scope.showOverlay=!0,scope.overlaySong=song,body.css("overflow","hidden"),$location.search("song",songId).replace()}else scope.showOverlay=!1,scope.overlaySong=null,body.css("overflow","visible"),$location.search("song",""),$location.replace(!0)};var searchSong=$location.search().song;searchSong&&searchSong.length&&scope.toggleOverlay(searchSong)}}}]);
"use strict";angular.module("feed").component("feedAds",{templateUrl:"js/angular-app/feed/ads/feed-ads.template.html",controller:[function(){}]});
"use strict";angular.module("feed").component("commentForm",{templateUrl:"js/angular-app/feed/form/comment-form.template.html",bindings:{item:"<",comments:"=",edit:"=?"},controller:["Feed","russDataParse",function(Feed,russDataParse){var self=this;self.comment_text="",self.$onInit=function(){"undefined"!=typeof self.edit&&(self.comment_text=self.edit.comment_text)},self.check_input=function(event){13!=event.keyCode||event.shiftKey||self.post(),27==event.keyCode&&self.edit&&(console.log("esc!"),self.edit.editing_enabled=!1)},self.post=function(){if(""!=self.comment_text)if(self.edit){var response=Feed.edit_comment(self.item.id,self.edit.id).save({},{comment_text:self.comment_text});response.$promise.then(function(result){var new_comment=russDataParse.parse(result);self.edit.comment_text=new_comment.comment_text}),self.edit.editing_enabled=!1}else{var response=Feed.post_comment(self.item.id).save({},{comment_text:self.comment_text});response.$promise.then(function(result){var new_comment=russDataParse.parse(result);"undefined"==typeof self.comments&&(self.comments=[]),self.comments.push(new_comment),self.item.num_comments+=1}),self.comment_text=""}}}]});
"use strict";angular.module("feed").directive("commentFormDirective",[function(){return{restrict:"A",templateUrl:"js/angular-app/feed/item/feed-item.template.html",link:function(scope,elem,attrs){elem.bind("keydown keypress keyup",function(event){13!=event.keyCode||event.shiftKey||event.preventDefault()})}}}]);
"use strict";angular.module("feed").component("feedForm",{bindings:{userId:"<?",userName:"<?"},templateUrl:"js/angular-app/feed/form/feed-form.template.html",controller:["Feed","russDataParse","auth","Image","$window","$location","noticeService",function(Feed,russDataParse,auth,Image,$window,$location,noticeService){var self=this;self.$onInit=function(){},self.search=function(event,query){if(query&&13==event.keyCode){var searchpath=$location.path()+"/search?q="+query;$window.location.href=searchpath}},self.notices=!1,noticeService.get().query().$promise.then(function(result){self.notices=result}),self.hideButton=function(button){var response=noticeService.set().save({},{name:button,value:"true"});response.$promise.then(function(result){self.notices=result})},self.privacyModes=[{id:0,name:"Alle"},{id:1,name:"Venner"}],auth.getUserPromise.then(function(result){auth.user&&auth.user.vehicle&&self.privacyModes.push({id:2,name:"Bussen"})}),self.reset_form=function(){self.status="",self.selectedPrivacyMode=self.privacyModes[0],self.image="",self.uploaded_image=""},self.select_image=function($file){$file&&(self.image=$file)},self.post=function(){self.image?Image.upload_image(self.image).then(function(uploaded_image){self.uploaded_image=uploaded_image,self.save()},function(error){console.log("Error uploading image!"),console.log(error)},function(event){var progressPercentage=parseInt(100*event.loaded/event.total,10);self.image.uploadProgress=progressPercentage}):self.save()},self.save=function(){var data={description:self.status,privacy_mode:self.selectedPrivacyMode.id};"undefined"!=typeof self.userId&&(data.about_type=5,data.about_user_id=self.userId),self.uploaded_image&&(data.image_id=self.uploaded_image.id);var response=Feed.post().save({},data);response.$promise.then(function(result){var item=russDataParse.parse(result);Feed.insert_item(item),self.reset_form()})},self.reset_form()}]});
"use strict";angular.module("feed").controller("feedItemController",["$scope",function($scope){$scope.comment_limit=-4,$scope.limit=$scope.comment_limit,$scope.toggle_limit=function(){0==$scope.comments_fetched&&$scope.get_comments(),$scope.limit=$scope.limit==$scope.comment_limit?"Infinite":$scope.comment_limit}}]).directive("feedItem",["Feed","russDataParse","songService","$mdDialog","$window",function(Feed,russDataParse,songService,$mdDialog,$window){return{restrict:"E",templateUrl:"js/angular-app/feed/item/feed-item.template.html",link:function(scope,elem,attrs){scope.show_comments=!1,scope.comments_fetched=!1,scope.comment_menu=[{text:"Slett",method:"confirmDeleteComment"},{text:"Rediger",method:"editComment"}],scope.comments=scope.item.comments,scope.song_url=function(){var jsonData=JSON.parse(scope.item.json_data);return jsonData.youtube?jsonData.youtube:jsonData.vimeo?jsonData.vimeo:""},scope.embed="",scope.song=!1,3==scope.item.about_type&&(scope.embed=songService.url.getVideoEmbed(scope.song_url(),!1)),scope.editComment=function(ev,comment){comment.editing_enabled=!comment.editing_enabled},scope.like=function(){Feed.like(scope.item.id).save({},{value:!scope.item.user_liked});scope.item.user_liked=!scope.item.user_liked,scope.item.user_liked?scope.item.num_likes+=1:scope.item.num_likes-=1},scope.follow=function(){switch(scope.item.about_type){case 1:case 6:Feed.follow_vehicle(scope.item.about_id,!scope.item.user_followed);break;default:return}},scope.vote=function(){scope.item.user_voted=!scope.item.user_voted,3==scope.item.about_type&&(scope.song?songService.vote(scope.song,1):songService.getOne(scope.item.about_id).then(function(song){scope.song=song,songService.vote(scope.song,1)})),scope.item.user_voted?scope.item.num_votes+=1:scope.item.num_votes-=1},scope.get_comments=function(){scope.comments_query=Feed.get_comments(scope.item.id).query(),scope.comments_query.$promise.then(function(result){scope.comments=russDataParse.parse(result),scope.show_comments=!0,scope.comments_fetched=!0})},scope.delete_comment=function(comment){var response=Feed.delete_comment(scope.item.id,comment.id)["delete"]();response.$promise.then(function(result){response.id==comment.id&&(scope.comments.splice(scope.comments.indexOf(comment),1),scope.item.num_comments-=1)})},scope.delete_item=function(){var response=Feed.delete_item(scope.item.id)["delete"]();response.$promise.then(function(result){response.id==scope.item.id&&Feed.items.splice(Feed.items.indexOf(scope.item),1)})},scope.confirmDeleteComment=function(ev,comment){var confirm=$mdDialog.confirm().title("Er du sikker du vil slette kommentaren?").ariaLabel("Slett kommentar").targetEvent(ev).ok("Ja").cancel("Nei");$mdDialog.show(confirm).then(function(){scope.delete_comment(comment)},function(){})},scope.confirmDeletePost=function(ev){var confirm=$mdDialog.confirm().title("Er du sikker du vil slette posten?").ariaLabel("Slett post").targetEvent(ev).ok("Ja").cancel("Nei");$mdDialog.show(confirm).then(function(){scope.delete_item()},function(){})},scope.clickImage=function(ev,item){item.link?$window.location.href=item.link:scope.showImage(ev,item.id)},scope.showImage=function(ev,itemId){$mdDialog.show({contentElement:"#show-image-"+itemId,parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0})},scope.socialImage=function(){var jsonData=JSON.parse(scope.item.json_data);return 7==scope.item.about_type?jsonData.instagram:8==scope.item.about_type?jsonData.preview_image:void 0}}}}]);
"use strict";angular.module("feed").component("feedProfile",{bindings:{userId:"@?","public":"@?"},templateUrl:"js/angular-app/feed/profile/feed-profile.template.html",controller:["Profile","vehicleService","russDataParse",function(Profile,vehicleService,russDataParse){var self=this;self.vehicleService=vehicleService,self.profile={},self.vehicle={},self.show_profile=!1,self.vehicleFriends=[],self.$onInit=function(){self.show_profile="1"==self["public"],Profile.get(self.userId).query().$promise.then(function(profile){self.profile=russDataParse.parse(profile),self.profile.vehicle_id&&vehicleService.getVehicle(self.profile.vehicle_id).then(function(vehicle){if(vehicle.current_phase){self.vehicle=vehicle;for(var i=self.profile.friends.length-1;i>=0;i--)self.profile.friends[i].vehicleId==self.vehicle.id&&self.vehicleFriends.push(self.profile.friends[i])}})})},self.translatePhaseName=function(phaseName){var translatedPhaseName="";return"teaser"==phaseName?translatedPhaseName="teasernavn":"cover"==phaseName?translatedPhaseName="dekknavn":"concept"==phaseName&&(translatedPhaseName="konseptnavn"),translatedPhaseName}}]});
"use strict";var profileEndpoint="profile";angular.module("feed").factory("Profile",["$resource","ENDPOINT",function($resource,ENDPOINT){var profile={};return profile.get=function(user_id){return"undefined"==typeof user_id?$resource(ENDPOINT+profileEndpoint,{},{query:{method:"GET"}}):$resource(ENDPOINT+profileEndpoint+"/"+user_id,{},{query:{method:"GET"}})},profile}]);
angular.module("russ").directive("buysellOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/buysell-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="buysell",generateMeta=function(data){var meta={none:0,for_sale:0,total:0};angular.forEach(data,function(vehicle){meta.total+=1,vehicle.sellingState?meta.for_sale+=1:meta.none+=1}),scope.buysellMeta=meta},getFilterFn=function(selectedSellingState){var filterFn=function(elem){var elemState=elem.sellingState?"for_sale":"none";return elemState===selectedSellingState};return function(vehicle){return scope.meta.currentYear.value<$rootScope.currentMinYear?vehicle:filterFn(vehicle)}};scope.$watch("selectedSellingState",function(newVal){newVal&&newVal.trim()?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedSellingState=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsCountyOptions",["$rootScope",function($rootScope){var counties=[{name:"Østfold",id:1},{name:"Akershus",id:2},{name:"Oslo",id:3},{name:"Hedmark",id:4},{name:"Oppland",id:5},{name:"Buskerud",id:6},{name:"Vestfold",id:7},{name:"Telemark",id:8},{name:"Aust-Agder",id:9},{name:"Vest-Agder",id:10},{name:"Rogaland",id:11},{name:"Hordaland",id:12},{name:"Sogn og Fjordane",id:14},{name:"Møre og Romsdal",id:15},{name:"Sør-Trøndelag",id:16},{name:"Nord-Trøndelag",id:17},{name:"Nordland",id:18},{name:"Troms",id:19},{name:"Finnmark",id:20}];return counties=counties.map(function(county){return county.lowerCaseName=county.name.toLowerCase(),county}),{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-county-options.directive.html",link:function(scope,elem,attrs,ngModel){scope.counties=angular.copy(counties);var filterKey="county";scope.selected={county:void 0},scope.showLimit=5;var generateMeta=function(data){var meta={total:0};angular.forEach(data,function(classified){meta.total+=1;var countyName=classified.county.county.toLowerCase();meta.hasOwnProperty(countyName)||(meta[countyName]=0),meta[countyName]+=1}),angular.forEach(scope.counties,function(county){meta[county.lowerCaseName]||(meta[county.lowerCaseName]=0)}),scope.counties.sort(function(countyA,countyB){var aCount=meta[countyA.name.toLowerCase()],bCount=meta[countyB.name.toLowerCase()];return aCount>bCount?-1:aCount<bCount?1:0}),scope.countiesMeta=meta},getFilterFn=function(selectedCounty){var filterFn=function(elem){return elem.county.county&&elem.county.county.toLowerCase()==selectedCounty};return function(classified){return filterFn(classified)}};scope.$watch("selected.county",function(newVal){angular.isString(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selected.county=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsGearboxOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-gearbox-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="classifiedsGearbox";scope.selectedGearbox="all";var generateMeta=function(data){var meta={automatic:0,manual:0,total:0};angular.forEach(data,function(classified){meta.total+=1;var gearboxType=1==classified.gearbox?"automatic":"manual";meta.hasOwnProperty(gearboxType)||(meta[gearboxType]=0),meta[gearboxType]+=1}),scope.gearboxMeta=meta},getFilterFn=function(selectedGearbox){var filterFn=function(elem){var gearboxType=1==elem.gearbox?"automatic":"manual";return"all"==selectedGearbox||gearboxType==selectedGearbox};return function(classified){return filterFn(classified)}};scope.$watch("selectedGearbox",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedGearbox="all",scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsMileageOptions",["$filter",function($filter){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-mileage-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="mileageRange";scope.mileageFrom=void 0,scope.mileageTo=void 0;var getFilterFn=function(newValFrom,newValTo){var filterFn=function(elem){return("undefined"==typeof newValFrom||elem.mileage>=parseInt(newValFrom))&&("undefined"==typeof newValTo||elem.mileage<=parseInt(newValTo))};return function(classified){return filterFn(classified)}};scope.$watch("mileageFrom",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.mileageFrom=newVal:scope.mileageFrom=void 0,scope.filters[filterKey]=getFilterFn(scope.mileageFrom,scope.mileageTo)}),scope.$watch("mileageTo",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.mileageTo=newVal:scope.mileageTo=void 0,scope.filters[filterKey]=getFilterFn(scope.mileageFrom,scope.mileageTo)}),scope.$on("overviewDataUpdate",function($event){scope.filterData({filterKey:filterKey})}),scope.$on("resetFilters",function($event){scope.mileageFrom=void 0,scope.mileageTo=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsModelyearOptions",["$filter",function($filter){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-modelyear-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="modelyearRange";scope.modelyearFrom=void 0,scope.modelyearTo=void 0;var getFilterFn=function(newValFrom,newValTo){var filterFn=function(elem){return("undefined"==typeof newValFrom||elem.model_year>=parseInt(newValFrom))&&("undefined"==typeof newValTo||elem.model_year<=parseInt(newValTo))};return function(classified){return filterFn(classified)}};scope.$watch("modelyearFrom",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.modelyearFrom=newVal:scope.modelyearFrom=void 0,scope.filters[filterKey]=getFilterFn(scope.modelyearFrom,scope.modelyearTo)}),scope.$watch("modelyearTo",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.modelyearTo=newVal:scope.modelyearTo=void 0,scope.filters[filterKey]=getFilterFn(scope.modelyearFrom,scope.modelyearTo)}),scope.$on("overviewDataUpdate",function($event){scope.filterData({filterKey:filterKey})}),scope.$on("resetFilters",function($event){scope.modelyearFrom=void 0,scope.modelyearTo=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsPriceOptions",["$filter",function($filter){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-price-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="priceRange";scope.mPriceFrom=void 0,scope.mPriceTo=void 0;var getFilterFn=function(newValFrom,newValTo){var filterFn=function(elem){return("undefined"==typeof newValFrom||elem.price>=parseInt(newValFrom))&&("undefined"==typeof newValTo||elem.price<=parseInt(newValTo))};return function(classified){return filterFn(classified)}};scope.$watch("mPriceFrom",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.mPriceFrom=newVal:scope.mPriceFrom=void 0,scope.filters[filterKey]=getFilterFn(scope.mPriceFrom,scope.mPriceTo)}),scope.$watch("mPriceTo",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.mPriceTo=newVal:scope.mPriceTo=void 0,scope.filters[filterKey]=getFilterFn(scope.mPriceFrom,scope.mPriceTo)}),scope.$on("overviewDataUpdate",function($event){scope.filterData({filterKey:filterKey})}),scope.$on("resetFilters",function($event){scope.mPriceFrom=void 0,scope.mPriceTo=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsSeatsOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-seats-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="classifiedsSeats";scope.selectedSeats="all";var generateMeta=function(data){var meta={normal:0,side:0,groups:0,total:0};angular.forEach(data,function(classified){meta.total+=1,classified.seats_regular&&classified.seats_regular>0&&(meta.normal+=1),classified.seats_groups&&classified.seats_groups>0&&(meta.groups+=1),classified.seats_lateral&&classified.seats_lateral>0&&(meta.side+=1)}),scope.seatsMeta=meta},getFilterFn=function(selectedSeats){var filterFn=function(elem){return"all"==selectedSeats||"normal"==selectedSeats&&elem.seats_regular&&elem.seats_regular>0||"side"==selectedSeats&&elem.seats_lateral&&elem.seats_lateral>0||"groups"==selectedSeats&&elem.seats_groups&&elem.seats_groups>0};return function(classified){return filterFn(classified)}};scope.$watch("selectedSeats",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedSeats="all",scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsSeatsnumberOptions",["$filter",function($filter){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-seatsnumber-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="seatNumberRange";scope.seatsnumberFrom=void 0,scope.seatsnumberTo=void 0;var getFilterFn=function(newValFrom,newValTo){var filterFn=function(elem){return("undefined"==typeof newValFrom||elem.seats_total>=parseInt(newValFrom))&&("undefined"==typeof newValTo||elem.seats_total<=parseInt(newValTo))};return function(classified){return filterFn(classified)}};scope.$watch("seatsnumberFrom",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.seatsnumberFrom=newVal:scope.seatsnumberFrom=void 0,scope.filters[filterKey]=getFilterFn(scope.seatsnumberFrom,scope.seatsnumberTo)}),scope.$watch("seatsnumberTo",function(newVal){newVal=parseInt(newVal),angular.isNumber(newVal)&&!isNaN(newVal)?scope.seatsnumberTo=newVal:scope.seatsnumberTo=void 0,scope.filters[filterKey]=getFilterFn(scope.seatsnumberFrom,scope.seatsnumberTo)}),scope.$on("overviewDataUpdate",function($event){scope.filterData({filterKey:filterKey})}),scope.$on("resetFilters",function($event){scope.seatsnumberFrom=void 0,scope.seatsnumberTo=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsTachoOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-tacho-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="classifiedsTacho";scope.selectedTacho="all";var generateMeta=function(data){var meta={yes:0,no:0,total:0};angular.forEach(data,function(classified){meta.total+=1;var tachoType=classified.tacho?"yes":"no";meta.hasOwnProperty(tachoType)||(meta[tachoType]=0),meta[tachoType]+=1}),scope.tachoMeta=meta},getFilterFn=function(selectedTacho){var filterFn=function(elem){var tachoType=elem.tacho?"yes":"no";return"all"==selectedTacho||tachoType==selectedTacho};return function(classified){return filterFn(classified)}};scope.$watch("selectedTacho",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedTacho="all",scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("classifiedsTypeOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/classifieds-type-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="classifiedsType";scope.selectedType="all";var generateMeta=function(data){var meta={bus:0,van:0,total:0};angular.forEach(data,function(classified){meta.total+=1;var vehicleType="Buss"==classified.type?"bus":"van";meta.hasOwnProperty(vehicleType)||(meta[vehicleType]=0),meta[vehicleType]+=1}),scope.typeMeta=meta},getFilterFn=function(selectedType){var filterFn=function(elem){var vehicleType="Buss"==elem.type?"bus":"van";return"all"==selectedType||vehicleType==selectedType};return function(classified){return filterFn(classified)}};scope.$watch("selectedType",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedType="all",scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("countyOptions",["$rootScope",function($rootScope){var counties=[{name:"Østfold",id:1},{name:"Akershus",id:2},{name:"Oslo",id:3},{name:"Hedmark",id:4},{name:"Oppland",id:5},{name:"Buskerud",id:6},{name:"Vestfold",id:7},{name:"Telemark",id:8},{name:"Aust-Agder",id:9},{name:"Vest-Agder",id:10},{name:"Rogaland",id:11},{name:"Hordaland",id:12},{name:"Sogn og Fjordane",id:14},{name:"Møre og Romsdal",id:15},{name:"Sør-Trøndelag",id:16},{name:"Nord-Trøndelag",id:17},{name:"Nordland",id:18},{name:"Troms",id:19},{name:"Finnmark",id:20}];return counties=counties.map(function(county){return county.lowerCaseName=county.name.toLowerCase(),county}),{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/county-options.directive.html",link:function(scope,elem,attrs,ngModel){scope.counties=angular.copy(counties);var filterKey="county";scope.selected={county:void 0},scope.showLimit=5;var generateMeta=function(data){var meta={total:0};angular.forEach(data,function(vehicle){meta.total+=1;var counties=vehicle.uniqueCounties;counties&&counties.length&&angular.forEach(counties,function(countyName){countyName=countyName.toLowerCase(),meta.hasOwnProperty(countyName)||(meta[countyName]=0),meta[countyName]+=1})}),angular.forEach(scope.counties,function(county){meta[county.lowerCaseName]||(meta[county.lowerCaseName]=0)}),scope.counties.sort(function(countyA,countyB){var aCount=meta[countyA.name.toLowerCase()],bCount=meta[countyB.name.toLowerCase()];return aCount>bCount?-1:aCount<bCount?1:0}),scope.countiesMeta=meta},getFilterFn=function(selectedCounty){var filterFn=function(elem){return elem.uniqueCounties&&elem.uniqueCounties.indexOf(selectedCounty)!==-1};return function(vehicle){return filterFn(vehicle)}};scope.$watch("selected.county",function(newVal){angular.isString(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selected.county=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("genderOptions",[function(){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/gender-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="gender",generateMeta=function(data){var meta={male:0,female:0,both:0,total:0};angular.forEach(data,function(vehicle){meta.total+=1,"female"===vehicle.genders?meta.female+=1:"male"===vehicle.genders?meta.male+=1:meta.both+=1}),scope.genderMeta=meta},getFilterFn=function(selectedGender){var filterFn=function(elem){return elem.genders===selectedGender};return function(vehicle){return filterFn(vehicle)}};scope.$watch("selectedGender",function(newVal){newVal&&newVal.trim()?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedGender=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("hasSongOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/has-song-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="hasSong",generateMeta=function(data){var meta={yes:0,no:0,total:0};angular.forEach(data,function(vehicle){meta.total+=1,vehicle.hasSong?meta.yes+=1:meta.no+=1}),scope.hasSongMeta=meta},getFilterFn=function(selectedHasSong){var filterFn=function(elem){var hasSong=!!elem.hasSong;return selectedHasSong===hasSong};return function(vehicle){return scope.meta.currentYear.value<$rootScope.currentMinYear?vehicle:filterFn(vehicle)}};scope.$watch("selectedHasSong",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedHasSong=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("meetupOptions",["$rootScope","vehicleYears",function($rootScope,vehicleYears){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/meetup-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="meetup";scope.vehicleYears=vehicleYears,scope.selected={meetup:void 0};var generateMeta=function(data){var meta={total:0};angular.forEach(data,function(vehicle){meta.total+=1;var meetups=vehicle.meetups;meetups&&meetups.length&&angular.forEach(meetups,function(meetupId){meta.hasOwnProperty(meetupId)||(meta[meetupId]=0),meta[meetupId]+=1})}),angular.forEach(scope.currentYearMeetups,function(meetup){meta[meetup.id]||(meta[meetup.id]=0)}),scope.currentYearMeetups.sort(function(meetupA,meetupB){var aCount=meta[meetupA.id],bCount=meta[meetupB.id];return aCount>bCount?-1:aCount<bCount?1:0}),scope.meetupsMeta=meta},getFilterFn=function(selectedMeetup){var filterFn=function(elem){return elem.meetups&&elem.meetups.indexOf(selectedMeetup)!==-1};return function(vehicle){return scope.meta.currentYear.value<$rootScope.currentMinYear?vehicle:filterFn(vehicle)}};scope.$watch("selected.meetup",function(newVal){newVal?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});scope.currentYearMeetups=angular.copy(scope.meta.currentYear.meetups),generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selected.meetup=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("overviewSearch",["$filter",function($filter){return{restrict:"E",scope:{filters:"=",overviewType:"@"},templateUrl:"js/angular-app/overview/options/overview-search.directive.html",link:function(scope,elem,attrs,ngModel){var filterFilter=$filter("filter"),filterKey="search",isSong="song"===scope.overviewType,isClassified="classified"===scope.overviewType,getFilterFn=function(searchInput){return function(dataObject){var dataObjectResult;return dataObjectResult=isSong?filterFilter([dataObject],{vehicle:{name:searchInput}}):isClassified?filterFilter([dataObject],{$:searchInput}):filterFilter([dataObject],{phases:{$:searchInput}}),dataObjectResult.length}};scope.$watch("searchInput",function(newVal){newVal&&newVal.trim()?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("resetFilters",function($event){scope.searchInput=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("releasedPhasesOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",overviewType:"@",meta:"<"},transclude:!0,templateUrl:"js/angular-app/overview/options/released-phases-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="releasedPhase",isSong="song"===scope.overviewType,phaseTypes=["teaser","cover","concept"],generateMeta=function(data){var meta={teaser:0,cover:0,concept:0,total:0};angular.forEach(data,function(dataObject){var phaseType,currentPhase,phases=dataObject.phases;if(meta.total+=1,isSong)meta[dataObject.type]+=1;else for(var i=0;i<phaseTypes.length;i++)phaseType=phaseTypes[i],currentPhase=phases[phaseType],currentPhase&&(meta[phaseType]+=1)}),scope.phasesMeta=meta},getFilterFn=function(selectedPhase){var filterFn=function(elem){return isSong?elem.type===selectedPhase:elem.phases[selectedPhase]};return function(dataObject){return scope.meta.currentYear.value<$rootScope.currentMinYear?dataObject:filterFn(dataObject)}};scope.$watch("selectedPhase",function(newVal){newVal&&newVal.trim()?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedPhase=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("songGenreOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/song-genre-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="songGenre",generateMeta=function(data){var meta={hiphop:0,electronic:0,other:0,total:0};angular.forEach(data,function(dataObject){meta.total+=1,meta[dataObject.genre]+=1}),scope.songGenreMeta=meta},getFilterFn=function(selectedSongGenre){var filterFn=function(elem){var songGenre=elem.genre;return selectedSongGenre===songGenre};return function(dataObject){return scope.meta.currentYear.value<$rootScope.currentMinYear?dataObject:filterFn(dataObject)}};scope.$watch("selectedSongGenre",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedSongGenre=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("songProductionOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/song-production-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="songProduction",generateMeta=function(data){var meta={artist:0,self:0,total:0};angular.forEach(data,function(dataObject){meta.total+=1,meta[dataObject.production]+=1}),scope.songProductionMeta=meta},getFilterFn=function(selectedSongProduction){var filterFn=function(elem){var songProduction=elem.production;return selectedSongProduction===songProduction};return function(dataObject){return scope.meta.currentYear.value<$rootScope.currentMinYear?dataObject:filterFn(dataObject)}};scope.$watch("selectedSongProduction",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedSongProduction=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("songVehicleTypeOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/song-vehicle-type-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="songVehicleType",generateMeta=function(data){var meta={Buss:0,Van:0,Gruppe:0,total:0};angular.forEach(data,function(dataObject){meta.total+=1,meta[dataObject.vehicle.type]+=1}),scope.songVehicleTypeMeta=meta},getFilterFn=function(selectedSongVehicleType){var filterFn=function(elem){var songVehicleType=elem.vehicle.type;return selectedSongVehicleType===songVehicleType};return function(dataObject){return scope.meta.currentYear.value<$rootScope.currentMinYear?dataObject:filterFn(dataObject)}};scope.$watch("selectedSongVehicleType",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){var data=scope.filterData({filterKey:filterKey});generateMeta(data)}),scope.$on("resetFilters",function($event){scope.selectedSongVehicleType=void 0,scope.filters[filterKey]=null})}}}]);
angular.module("russ").directive("vehicleTypeOptions",["$rootScope",function($rootScope){return{restrict:"E",scope:{filters:"=",filterData:"&",meta:"<"},templateUrl:"js/angular-app/overview/options/vehicle-type-options.directive.html",link:function(scope,elem,attrs,ngModel){var filterKey="vehicleType",getFilterFn=function(selectedVehicleType){var filterFn=function(elem){var vehicleType=elem.type;return selectedVehicleType===vehicleType};return function(vehicle){return scope.meta.currentYear.value<$rootScope.currentMinYear?vehicle:filterFn(vehicle)}};scope.setVehicleType=function(type){scope.selectedVehicleType===type?scope.selectedVehicleType=void 0:scope.selectedVehicleType=type},scope.$watch("selectedVehicleType",function(newVal){angular.isDefined(newVal)?scope.filters[filterKey]=getFilterFn(newVal):scope.filters[filterKey]=null}),scope.$on("overviewDataUpdate",function($event){scope.filterData({filterKey:filterKey})}),scope.$on("resetFilters",function($event){scope.selectedVehicleType=void 0,scope.filters[filterKey]=null}),scope.setVehicleType("buss")}}}]);
angular.module("russ").directive("yearSelector",["$http","ENDPOINT","vehicleYears","songYears","vehicleService","songService",function($http,ENDPOINT,vehicleYears,songYears,vehicleService,songService){return{restrict:"E",require:"ngModel",scope:{overviewType:"@",meta:"<"},templateUrl:"js/angular-app/overview/options/year-selector.directive.html",link:function(scope,elem,attrs,ngModel){var isSong="song"===scope.overviewType;if(scope.meta.currentYear)scope.selected={year:scope.meta.currentYear};else var watcher=scope.$watch("meta.currentYear",function(newVal){newVal&&(watcher(),scope.selected={year:scope.meta.currentYear})});var service;isSong?(scope.years=songYears,service=songService):(scope.years=vehicleYears,service=vehicleService);var getYearData=function(year){service.get(year.value).then(function(data){scope.selected.year===year&&ngModel.$setViewValue(data)})};scope.$watch("selected.year",function(newVal){newVal&&(getYearData(newVal),scope.meta.currentYear=newVal)})}}}]);
angular.module("russ").directive("vehicleGallerySection",["$timeout",function($timeout){return{restrict:"E",templateUrl:"js/angular-app/vehicle/sections/vehicle-gallery-section.html",scope:{images:"<"},link:function(scope,elem,attrs){if(!scope.images||!scope.images.length)return void console.error("No images given to gallery component");var imagesLength=scope.images.length;angular.forEach(scope.images,function(image,index){image.index=index});var getIndexDiff=function(index1,index2){var diff1=(index1-index2+imagesLength)%imagesLength,diff2=(index2-index1+imagesLength)%imagesLength;return Math.min(diff1,diff2)};scope.getIndex=function(incrementor,fromIndex){return angular.isUndefined(fromIndex)&&(fromIndex=scope.currentIndex),incrementor?(fromIndex+incrementor+imagesLength)%imagesLength:fromIndex};var minIndex,maxIndex;scope.goToImage=function(image){var index=image.index;getIndexDiff(scope.currentIndex,index)>1&&(scope.paginationClick=!0),$timeout(function(){scope.currentIndex=index;for(var imgIndex,image,currentImages=[],i=minIndex,j=maxIndex;i<j;i++)imgIndex=scope.getIndex(i),image=scope.images[imgIndex],image&&currentImages.push(image);scope.currentImages=currentImages,scope.paginationClick&&$timeout(function(){scope.paginationClick=!1})})},scope.centerIndex=null,imagesLength<5?(scope.currentImages=scope.images,1===imagesLength?(minIndex=0,maxIndex=1,scope.centerIndex=0):2===imagesLength?(minIndex=-1,maxIndex=1,scope.centerIndex=1):3===imagesLength?(minIndex=-1,maxIndex=2,scope.centerIndex=1):4===imagesLength&&(minIndex=-2,maxIndex=2,scope.centerIndex=2)):(minIndex=-2,maxIndex=3,scope.centerIndex=2),scope.goToImage(scope.images[0])}}}]);
angular.module("russ").directive("vehicleGeneralInfoSection",["vehicleService",function(vehicleService){return{restrict:"E",templateUrl:"js/angular-app/vehicle/sections/vehicle-general-info-section.html",scope:{vehicle:"<"},link:function(scope,elem,attrs){scope.vehicleService=vehicleService;var phases=scope.vehicle.phases;scope.names=[],phases.concept&&phases.concept.isPublished&&phases.concept.name&&scope.names.push({text:phases.concept.name,desc:"Konseptnavn",about:phases.concept.about,aboutDesc:"Om konsept"}),phases.cover&&phases.cover.isPublished&&phases.cover.name&&scope.names.push({text:phases.cover.name,desc:"Dekknavn",about:phases.cover.about,aboutDesc:"Om dekk"}),phases.teaser&&phases.teaser.isPublished&&phases.teaser.name&&scope.names.push({text:phases.teaser.name,desc:"Teasernavn",about:phases.teaser.about,aboutDesc:"Om teaser"}),scope.schools=[];var schoolIds={},members=scope.vehicle.members;angular.forEach(members,function(member){schoolIds.hasOwnProperty(member.school.id)||(schoolIds[member.school.id]=!0,scope.schools.push(member.school))})}}}]);
angular.module("russ").directive("vehicleInstagramSection",[function(){return{restrict:"E",templateUrl:"js/angular-app/vehicle/sections/vehicle-instagram-section.html",scope:{instagram:"<"},link:function(scope,elem,attrs){scope.images=scope.instagram.images,scope.currentIndex=null,scope.openLightbox=function(image){scope.isLightboxVisible=!0,scope.currentImage=image,scope.currentIndex=scope.images.indexOf(image)},scope.closeLightbox=function(){scope.isLightboxVisible=!1},scope.changeLightboxImage=function(incrementor){var newIndex=scope.currentIndex+incrementor;newIndex<0?newIndex=0:newIndex>=scope.images.length&&(newIndex=scope.images.length-1),scope.currentIndex=newIndex,scope.currentImage=scope.images[newIndex]}}}}]);
angular.module("russ").directive("vehicleMemberSection",[function(){return{restrict:"E",templateUrl:"js/angular-app/vehicle/sections/vehicle-member-section.html",scope:{members:"<"},link:function(scope,elem,attrs){}}}]);
angular.module("russ").directive("vehicleMember",["$timeout","auth","friend",function($timeout,auth,friend){return{restrict:"A",templateUrl:"js/angular-app/vehicle/sections/vehicle-member.html",scope:{user:"<"},link:function(scope,elem,attrs){scope.friend=friend;var addFriendTimeout,timeoutDuration=3e3,cancelTimeout=function(){addFriendTimeout&&($timeout.cancel(addFriendTimeout),addFriendTimeout=null)};scope.addFriend=function(user){auth.check("for å legge til venner")&&(scope.addingFriend=!0,cancelTimeout(),addFriendTimeout=$timeout(function(){friend.add(user),scope.addingFriend=!1},timeoutDuration))},scope.cancelFriendRequest=function(){cancelTimeout(),scope.addingFriend=!1}}}}]);
angular.module("russ").directive("vehicleSpotifySection",[function(){return{restrict:"E",templateUrl:"js/angular-app/vehicle/sections/vehicle-spotify-section.html",scope:{spotify:"<"},link:function(scope,elem,attrs){}}}]);
angular.module("russ").directive("vehicleRegistrationClassifiedGallery",["classifiedService",function(classifiedService){return{restrict:"E",scope:{vehicle:"="},templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-classified-gallery.directive.html",link:function(scope,elem,attrs,ngModel){var vehicle=scope.vehicle;scope.uploadingImages=[],scope.removeUploadImage=function(image){var imageIndex=scope.uploadingImages.indexOf(image);scope.uploadingImages.splice(imageIndex,1)},scope.uploadImage=function($file,$invalidFiles,isReupload){return scope.gallery=scope.vehicle.classified.gallery,$file?(scope.validationError=!1,$file.error=!1,isReupload||scope.uploadingImages.push($file),void classifiedService.uploadGalleryImage(vehicle,$file).then(function(newImage){scope.gallery.push(newImage),scope.removeUploadImage($file)},function(error){$file.error=!0},function(event){var progressPercentage=parseInt(100*event.loaded/event.total,10);$file.uploadProgress=progressPercentage})):void($invalidFiles&&$invalidFiles.length&&(scope.validationError=$invalidFiles[0].$error))},scope.removeImage=function(image){if(scope.gallery=scope.vehicle.classified.gallery,image&&confirm("Er du sikker på at du vil slette dette bildet?")){var imageIndex=scope.gallery.indexOf(image);scope.gallery.splice(imageIndex,1),classifiedService.deleteGalleryImage(vehicle,image)}}}}}]);
angular.module("russ").directive("vehicleRegistrationClassified",["$http","vehicleService","classifiedService","flashService","russUrl","auth","$timeout","$location",function($http,vehicleService,classifiedService,flashService,russUrl,auth,$timeout,$location){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-classified.directive.html",scope:{vehicle:"=",expanded:"@?"},link:function(scope,elem,attrs){var states={saved:"Alle endringer lagret",saving:"Lagrer...",error:"Feil under lagring"};scope.states=states,scope.renewal_state=!1;var vehicle=scope.vehicle,tab=$location.search().tab;"classifieds"==tab&&(scope.expanded=!0),scope.save=function(){scope.savingState=states.saving;var updateObject={post_number:scope.vehicle.classified.post_number,plate_number:scope.vehicle.classified.plate_number,price:scope.vehicle.classified.price,transfer_fee:scope.vehicle.classified.transfer_fee,transfer_fee_included:scope.vehicle.classified.transfer_fee_included,transfer_fee_exempt:scope.vehicle.classified.transfer_fee_exempt,mileage:scope.vehicle.classified.mileage,is_published:scope.vehicle.classified.is_published,published:scope.vehicle.classified.published,description:scope.vehicle.classified.description,gearbox:scope.vehicle.classified.gearbox,brand:scope.vehicle.classified.brand,model_year:scope.vehicle.classified.model_year,old_concept_name:scope.vehicle.classified.old_concept_name,length:scope.vehicle.classified.length,tacho:"true"==scope.vehicle.classified.tacho,seats_regular:scope.vehicle.classified.seats_regular?scope.vehicle.classified.seats_regular:0,seats_groups:scope.vehicle.classified.seats_groups?scope.vehicle.classified.seats_groups:0,seats_lateral:scope.vehicle.classified.seats_lateral?scope.vehicle.classified.seats_lateral:0};classifiedService.update(vehicle.id,updateObject).then(function(response){scope.savingState=states.saved,scope.lastSavedDate=new Date})["catch"](function(){scope.savingState=states.error})},scope.setPublishedState=function(newState){var oldState=!!scope.vehicle.classified.is_published;newState!==oldState&&(scope.vehicle.classified.is_published=!1,scope.vehicle.classified.published=null,newState&&(scope.vehicle.classified.post_number&&scope.vehicle.classified.brand&&scope.vehicle.classified.price&&scope.vehicle.classified.price>0?(scope.vehicle.classified.is_published=!0,scope.vehicle.classified.published=new Date):flashService.showMessage("Du må skrive inn postnummer, merke og pris.",null,!0)),scope.save())},scope.renewPublishTime=function(){scope.vehicle.classified.published=new Date,scope.save(),scope.renewal_state=!0,$timeout(function(){scope.renewal_state=!1},750)},scope.checkZip=function(){scope.vehicle.classified.post_number?$http.get("/postal_city/postal_code/"+scope.vehicle.classified.post_number).then(function(response){response.data.length?(scope.vehicle.classified.post_city=response.data,scope.save()):(scope.vehicle.classified.post_city="Ugyldig postnummer",scope.vehicle.classified.post_number="")})["catch"](function(response){scope.vehicle.classified.post_city="Ugyldig postnummer",scope.vehicle.classified.post_number=""}):(scope.vehicle.classified.post_city="Ugyldig postnummer",scope.vehicle.classified.post_number="")}},controller:function($scope){$scope.vehicle.classified=classifiedService.get($scope.vehicle).then(function(resolvedValues){})}}}]);
angular.module("russ").directive("vehicleRegistrationGallery",["vehicleService",function(vehicleService){return{restrict:"E",scope:{vehicle:"="},templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-gallery.directive.html",link:function(scope,elem,attrs,ngModel){var vehicle=scope.vehicle;scope.gallery=scope.vehicle.gallery,scope.uploadingImages=[],scope.removeUploadImage=function(image){var imageIndex=scope.uploadingImages.indexOf(image);scope.uploadingImages.splice(imageIndex,1)},scope.uploadImage=function($file,$invalidFiles,isReupload){return $file?(scope.validationError=!1,$file.error=!1,isReupload||scope.uploadingImages.push($file),void vehicleService.uploadGalleryImage(vehicle,$file).then(function(newImage){scope.gallery.push(newImage),scope.removeUploadImage($file)},function(error){$file.error=!0},function(event){var progressPercentage=parseInt(100*event.loaded/event.total,10);$file.uploadProgress=progressPercentage})):void($invalidFiles&&$invalidFiles.length&&(scope.validationError=$invalidFiles[0].$error))},scope.removeImage=function(image){if(image&&confirm("Er du sikker på at du vil slette dette bildet?")){var imageIndex=scope.gallery.indexOf(image);scope.gallery.splice(imageIndex,1),vehicleService.deleteGalleryImage(vehicle,image)}}}}}]);
angular.module("russ").directive("vehicleRegistrationGeneral",["vehicleService","flashService","russUrl","auth","$timeout",function(vehicleService,flashService,russUrl,auth,$timeout){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-general.directive.html",scope:{vehicle:"="},link:function(scope,elem,attrs){var states={saved:"Alle endringer lagret",saving:"Lagrer...",error:"Feil under lagring"};scope.states=states;var sellingStateChangeTimeout,vehicle=scope.vehicle;scope.$watch("vehicle.sellingState",function(newVal,oldVal){newVal!==oldVal&&(sellingStateChangeTimeout&&$timeout.cancel(sellingStateChangeTimeout),sellingStateChangeTimeout=$timeout(function(){scope.save(),sellingStateChangeTimeout=null},500))}),scope.$watch("vehicle.meetups",function(newVal,oldVal){newVal!==oldVal&&scope.save()}),scope.$watch("vehicle.members",function(newVal,oldVal){newVal!==oldVal&&scope.save()});var isVehicleAdmin=function(){if(auth.user.isAdmin)return!0;var result;return angular.forEach(vehicle.members,function(member){member.isAdmin&&member.id===auth.user.id&&(result=!0)}),result};scope.userIsOrWasAdmin=isVehicleAdmin(),scope.$watch("vehicle.invitedPhoneNumbers",function(newVal,oldVal){newVal!==oldVal&&vehicleService.updateInvitedPhoneNumbers(vehicle.id,{invitedPhoneNumbers:newVal})}),scope.amountOfMembersOptions=[];for(var i=0,j=40;i<j;i++)scope.amountOfMembersOptions.push(i+1);scope.vehicle.amountOfMembers=scope.amountOfMembersOptions[scope.vehicle.amountOfMembers-1];var snapchatNameChangeTimeout;scope.snapchatNameChanged=function(){vehicle.snapchatName=vehicle.snapchatName.replace(/\s/g,""),snapchatNameChangeTimeout&&$timeout.cancel(snapchatNameChangeTimeout),snapchatNameChangeTimeout=$timeout(function(){scope.save(),snapchatNameChangeTimeout=null},500)},scope.save=function(){scope.savingState=states.saving;var id=scope.vehicle.id,updateObject={description:vehicle.description,amountOfMembers:vehicle.amountOfMembers,facebookUrl:vehicle.facebookUrl,snapchatName:vehicle.snapchatName,invitedPhoneNumbers:vehicle.invitedPhoneNumbers,members:vehicle.members.map(function(member){return member.id}),sellingState:vehicle.sellingState,meetups:vehicle.meetups};scope.userIsOrWasAdmin&&(updateObject.admins=vehicle.members.filter(function(member){if(member.isAdmin)return!0}).map(function(member){return member.id}),scope.userIsOrWasAdmin=isVehicleAdmin()),vehicleService.update(id,updateObject).then(function(response){var data=response.data,members=data.members;if(!members.length)throw new Error("No members returned");!auth.user.isAdmin&&members.indexOf(auth.user.id)<0&&(window.location.href=russUrl.vehicle(vehicle.id)),scope.savingState=states.saved,scope.lastSavedDate=new Date})["catch"](function(e){scope.savingState=states.error;var errMessage=states.error;e.data.length&&e.data.forEach(function(item){errMessage+=" - "+item}),flashService.showMessage(errMessage,void 0,!0)})},scope.connectWithInstagram=function(){var options={path:russUrl.instagram(scope.vehicle.id)};options.windowName="ConnectWithInstagram",options.windowOptions="location=0,status=0,width=800,height=400";window.open(options.path,options.windowName,options.windowOptions)},scope.removeInstagram=function(){confirm("Er du sikker på at du vil fjerne Instagram-koblingen til @"+scope.vehicle.instagram.name+"?")&&vehicleService.removeInstagram(scope.vehicle).then(function(){scope.vehicle.instagram=null})},scope.isMember=function(user){return scope.vehicle.members.map(function(member){return member.id}).indexOf(user.id)!==-1},scope.deleteVehicle=function(force){(force||confirm("Er du helt sikker?\nDenne handlingen kan ikke angres."))&&vehicleService["delete"](scope.vehicle).then(function(){window.location.href=russUrl.vehicles()})["catch"](function(){scope.deletionError=!0})},scope.leaveVehicle=function(){var adminCount=0,userIndex=scope.vehicle.members.map(function(member,index){return member.isAdmin&&adminCount++,member.id}).indexOf(auth.user.id);userIndex<0||(isVehicleAdmin()&&1===adminCount?1===scope.vehicle.members.length?confirm("Du er det eneste medlemmet av gruppen. Vil du slette gruppen?\nDenne handlingen kan ikke angres.")&&scope.deleteVehicle(!0):flashService.showMessage("Det må være minst 1 admin på gruppen. Gjør noen andre til admin for å kunne forlate gruppen.",null,!0):confirm("Er du sikker på at du vil forlate gruppen?")&&(scope.vehicle.members.splice(userIndex,1),scope.save()))}}}}]);
angular.module("russ").directive("vehicleRegistrationMeetups",["vehicleYears",function(vehicleYears){return{restrict:"E",scope:{vehicle:"="},templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-meetups.html",link:function(scope,elem,attrs,ngModel){var now=new Date,currentYear=now.getFullYear();angular.forEach(vehicleYears,function(year){year.value===currentYear&&(scope.meetups=year.meetups)}),scope.meetups||(scope.meetups=vehicleYears[0].meetups),angular.forEach(scope.meetups,function(meetup){scope.vehicle.meetups.indexOf(meetup.id)!==-1&&(meetup.isGoing=!0)}),scope.updateVehicleMeetups=function(){var vehicleMeetups=[];angular.forEach(scope.meetups,function(meetup){meetup.isGoing&&vehicleMeetups.push(meetup.id)}),scope.vehicle.meetups=vehicleMeetups}}}}]);
angular.module("russ").directive("vehicleRegistrationMembers",["flashService","auth",function(flashService,auth){return{restrict:"E",scope:{vehicle:"="},templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-members.directive.html",link:function(scope,elem,attrs,ngModel){var vehicle=scope.vehicle,memberIds=[];angular.forEach(vehicle.members,function(member){memberIds.push(member.id),member.isAdmin&&member.id===auth.user.id&&(scope.isCurrentUserAdmin=!0)}),scope.isMember=function(friend){return memberIds.indexOf(friend.id)!==-1},scope.addMember=function(friend){memberIds.push(friend.id),vehicle.members=vehicle.members.concat([friend])},scope.showAlreadyMemberFlash=function(friend){flashService.showMessage(friend.name+" er allerede medlem av en gruppe.",null,!0)},scope.getMember=function(id){var resultMember;return angular.forEach(vehicle.members,function(member){member.id===id&&(resultMember=member)}),resultMember},scope.removeMember=function(member){if(confirm("Er du sikker på at du vil fjerne "+member.name+" fra gruppen?")){var memberIdsIndex=(vehicle.members.indexOf(member),memberIds.indexOf(member.id));memberIds.splice(memberIdsIndex,1),vehicle.members=vehicle.members.slice(0,memberIdsIndex).concat(vehicle.members.slice(memberIdsIndex+1))}},scope.makeAdmin=function(newAdmin){newAdmin.isAdmin=1,vehicle.members=vehicle.members.slice()},scope.removeAdmin=function(oldAdmin){var adminCount=0;return angular.forEach(vehicle.members,function(member){member.isAdmin&&adminCount++}),1===adminCount?void flashService.showMessage("Det må være minst 1 admin på gruppen",null,!0):(oldAdmin.isAdmin=0,oldAdmin.id===auth.user.id&&(scope.isCurrentUserAdmin=!1),void(vehicle.members=vehicle.members.slice()))},scope.sendPhoneInvite=function(){var currentInvitedPhoneNumbers=vehicle.invitedPhoneNumbers||[],newPhoneNumber=scope.newPhoneNumber;newPhoneNumber&&currentInvitedPhoneNumbers.indexOf(newPhoneNumber)<0&&(vehicle.invitedPhoneNumbers=currentInvitedPhoneNumbers.concat(newPhoneNumber)),scope.newPhoneNumber=null};var searchInput=document.querySelector('input[name="q"]');searchInput||(scope.noSearchInput=!0),scope.focusSearch=function(){searchInput.focus()}}}}]);
angular.module("russ").directive("vehicleRegistrationPhase",["$timeout","vehicleService","russDataParse","flashService",function($timeout,vehicleService,russDataParse,flashService){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-phase.directive.html",scope:{vehicle:"<",phaseName:"@phase"},link:function(scope,elem,attrs){var words={teaser:{title:"Teaser",name:"Teasernavn",song:"Teaserlåt",concept:"teaser-konsept",picture:"Logo / profilbilde",explanation:'Teaser"-navn er navnet på bussen før dere har lansert dekknavnet. Dersom dere lanserer dekknavn direkte kan dere droppe teaser og ikke fylle inn noe.',publishCta:"Husk å publisere når du er klar for å gjøre Teaser-informasjonen offentlig. Dere må ha et teasernavn for å kunne publisere.",publishError:"Dere må ha et navn for å publisere teaser."},cover:{title:"Dekk",name:"Dekknavn",song:"Dekknavnlåt",concept:"dekk-konsept",picture:"Logo",explanation:'"Dekk"-navn er navnet på bussen før dere har lansert konsept. Dersom dere lanserer konsept direkte kan dere droppe teaser og dekknavn og ikke fylle inn noe.',publishCta:"Husk å publisere når du er klar for å gjøre Dekknavn-informasjonen offentlig. Dere må ha et dekknavn for å kunne publisere.",publishError:"Dere må ha et navn for å publisere dekk."},concept:{title:"Konsept",name:"Konseptnavn",song:"Konseptlåt",concept:"hovedkonsept",picture:"Logo",explanation:'"Konsept"-navn er det endelige navnet på kjøretøyet/gjengen. Dersom dere lanserer konsept direkte, kan dere droppe teaser og dekknavn og ikke fylle inn noe.',publishCta:"Husk å publisere når du er klar for å gjøre Konsept-informasjonen offentlig. Dere må ha et konseptnavn for å kunne publisere.",publishError:"Dere må ha et navn for å publisere konsept."}},states={saved:"Alle endringer lagret",saving:"Lagrer...",error:"Feil under lagring"};scope.phase=scope.vehicle.phases[scope.phaseName]||{songs:[]},scope.words=words[scope.phaseName];var hasPicture;scope.phase.picture&&(hasPicture=!0);var pictureUploadPromise;scope.removePicture=function(){hasPicture?(scope.phase.newPicture=!1,scope.phase.picture=!1,scope.pictureChanged=!0,scope.save()):scope.phase.newPicture=void 0,pictureUploadPromise&&(angular.isFunction(pictureUploadPromise.abort)&&pictureUploadPromise.abort(),pictureUploadPromise=null)};var nameChangedTimeout;scope.$watch("phase.name",function(newVal,oldVal){newVal!==oldVal&&(scope.nameChanged=!0,nameChangedTimeout&&$timeout.cancel(nameChangedTimeout),nameChangedTimeout=$timeout(function(){scope.save(),nameChangedTimeout=null},500))});var isPublishedChangedTimeout;scope.$watch("phase.isPublished",function(newVal,oldVal){newVal!==oldVal&&(scope.isPublishedChanged=!0,isPublishedChangedTimeout&&$timeout.cancel(isPublishedChangedTimeout),isPublishedChangedTimeout=$timeout(function(){scope.save(),isPublishedChangedTimeout=null},500))}),scope.setPublishedState=function(newState){var oldState=!!scope.phase.isPublished;if(newState!==oldState)return!newState||scope.phase.name&&scope.phase.name.length?void(scope.phase.isPublished=newState):flashService.showMessage(scope.words.publishError,null,!0)},scope.save=function(){scope.savingState=states.saving;var phase=scope.phase;phase.name&&phase.name.length||(phase.isPublished=!1);var id=scope.vehicle.id,updateObject={type:scope.phaseName,name:phase.name,about:phase.about,isPublished:!!phase.isPublished};angular.isDefined(phase.newPicture)&&(updateObject.picture=phase.newPicture);var updatePromise=vehicleService.updatePhase(id,updateObject);updatePromise.then(function(response){var data=russDataParse.phase(response.data);angular.isString(data.name)&&data.name||(data.name=""),data.isPublished=!!data.isPublished,angular.isDefined(phase.newPicture)&&(phase.newPicture=void 0,angular.isString(data.picture)&&(scope.phase.picture=data.picture)),updateObject.hasOwnProperty("picture")&&(hasPicture=!!updateObject.picture),scope.pictureChanged=!1,scope.isPublishedChanged=!1,scope.savingState=states.saved},function(){scope.savingState=states.error},function(event){var progressPercentage=parseInt(100*event.loaded/event.total,10);phase.newPicture&&(phase.newPicture.uploadProgress=progressPercentage)})["finally"](function(){pictureUploadPromise=null}),updateObject.picture&&phase.newPicture&&(pictureUploadPromise=updatePromise)},scope.validateImage=function($file,$invalidFiles){return $file?(scope.validationError=!1,void scope.save()):void($invalidFiles&&$invalidFiles.length&&(scope.validationError=$invalidFiles[0].$error))}}}}]);
angular.module("russ").directive("vehicleRegistrationSong",["songService","auth",function(songService,auth){return{restrict:"A",templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-song.directive.html",scope:{song:"<",remove:"&removeFunction"},link:function(scope,elem,attrs){scope.song.id||(scope.isCreate=!0,scope.song.isEditing=!0);var songCopy=angular.copy(scope.song);scope.save=function(){var form=scope.songForm;if(form.$invalid||!scope.song.picture)return void form.$setSubmitted();scope.saving=!0;var savePromise;if(scope.isCreate)savePromise=songService.create(scope.song).then(function(newId){scope.song.id=newId,scope.isCreate=!1});else{var songUpdateObject=angular.copy(scope.song);auth.user.isAdmin||delete songUpdateObject.video,savePromise=songService.update(songUpdateObject)}savePromise.then(function(){scope.song.error=!1,songCopy=angular.copy(scope.song),scope.song.isEditing=!1})["catch"](function(error){scope.song.error=!0})["finally"](function(){scope.saving=!1})},scope["delete"]=function(){confirm("Er du helt sikker?\nDenne handlingen kan ikke angres.")&&songService["delete"](scope.song).then(function(){scope.remove({song:scope.song})})},scope.cancel=function(){scope.isCreate?scope.remove({song:scope.song}):(angular.extend(scope.song,songCopy),scope.song.isEditing=!1)},scope.getPicture=function(){var video=scope.song.video;if(!video||!video.trim().length)return void(scope.song.picture="");scope.gettingPicture=!0;var picturePromise;picturePromise=songService.url.isVimeo(video)?songService.url.getVimeoPicture(video):songService.url.getYoutubePicture(video),picturePromise.then(function(picture){scope.song.picture=picture,scope.songForm.video.$setValidity("vimeo",!0)})["catch"](function(err){scope.song.picture="",scope.songForm.video.$setValidity("vimeo",!1)})["finally"](function(){scope.gettingPicture=!1})}}}}]);
angular.module("russ").directive("vehicleRegistrationSongs",[function(){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-songs.directive.html",scope:{vehicleSongs:"<songs",vehicleId:"<",phaseName:"<",words:"<"},link:function(scope,elem,attrs,ngModel){if(scope.vehicleSongs?scope.songs=angular.copy(scope.vehicleSongs):scope.songs=[],!scope.vehicleId||!scope.phaseName)throw new Error("Directive needs both vehicleId and phaseName");var songTemplate={vehicle:scope.vehicleId,phase:scope.phaseName,genre:"electronic",production:"artist",isEditing:!0};scope.addNewSong=function(){var newSong=angular.copy(songTemplate);scope.songs.push(newSong)},scope.removeSong=function(song){var index=scope.songs.indexOf(song);if(index!==-1){var first=scope.songs.slice(0,index),second=scope.songs.slice(index+1);scope.songs=first.concat(second)}},scope.isAnySongEditing=function(){for(var i=0,j=scope.songs.length;i<j;i++)if(scope.songs[i].isEditing)return!0}}}}]);
angular.module("russ").directive("vehicleRegistrationType",["$timeout","$http","russUrl","vehicleService",function($timeout,$http,russUrl,vehicleService){return{restrict:"E",templateUrl:"js/angular-app/vehicle-registration/sections/vehicle-registration-type.directive.html",scope:{vehicle:"=",create:"<"},link:function(scope,elem,attrs){var states={saved:"Alle endringer lagret",saving:"Lagrer...",error:"Feil under lagring"};scope.states=states,scope.isCreate=!1,scope.vehicle?(scope.originalType=scope.vehicle.type,scope.type=scope.vehicle.type):(scope.originalType=null,scope.type=null,scope.isCreate=!0),scope.setVehicleType=function(type){scope.type!==type&&(scope.type=type,scope.updateVehicleType())},scope.updateVehicleType=function(){if(scope.vehicleTypeState="saving",scope.isCreate){var newVehicleId;vehicleService.create(scope.type).then(function(data){return newVehicleId=data.id,$http.get(russUrl.cacheBust())}).then(function(){window.location.href=russUrl.vehicleEdit(newVehicleId)})}else{scope.savingState=states.saving;var originalType=scope.originalType;scope.originalType=scope.type,vehicleService.update(scope.vehicle.id,{type:scope.type}).then(function(){scope.vehicleTypeState="saved",scope.lastSavedDate=new Date,scope.savingState=states.saved,$timeout(function(){scope.vehicleTypeState=null},5e3)})["catch"](function(){scope.savingState=states.error,scope.vehicleTypeState="error",scope.originalType=originalType,$timeout(function(){scope.vehicleTypeState=null},5e3)})}}}}}]);
//# sourceMappingURL=rr-angular-scripts.min.js.map
